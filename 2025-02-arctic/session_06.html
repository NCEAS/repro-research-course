<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>6&nbsp; Data Modeling Essentials – Reproducible Approaches to Arctic Research Using R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./session_07.html" rel="next">
<link href="./session_05.html" rel="prev">
<link href="./cover.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-a34d670291f06f286357e447776a572a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="mermaid-theme" content="forest">
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.33/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./session_06.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Modeling Essentials</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Modeling Essentials</span></h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Training Materials</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://www.nceas.ucsb.edu/learning-hub" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-house-door-fill"></i></a>
    <a href="https://twitter.com/ucsb_nceas" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://github.com/NCEAS/nceas-training/tree/2025-01-arctic" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About the course</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to the Arctic Data Center and RStudio Server Setup</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to Quarto</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Management Plans</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Submitting to the Arctic Data Center</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Introduction to git and GitHub</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_06.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Modeling Essentials</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Cleaning and Wrangling Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Collaborating with git and GitHub</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Publishing Analysis to the Web</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Data Visualization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Practice Session I</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Writing Functions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Writing Packages</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_14.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Collaboration and Thinking Preferences</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_15.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">FAIR/CARE and Ethical Data Collection</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_16.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">R Practice II</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_17.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Data Portals</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_18.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Working with Spatial Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session_19.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Reproducibility and Provenance</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link active" data-scroll-target="#learning-objectives">Learning Objectives</a></li>
  <li><a href="#simple-guidelines-for-data-management" id="toc-simple-guidelines-for-data-management" class="nav-link" data-scroll-target="#simple-guidelines-for-data-management"><span class="header-section-number">6.1</span> Simple guidelines for data management</a></li>
  <li><a href="#tidy-data" id="toc-tidy-data" class="nav-link" data-scroll-target="#tidy-data"><span class="header-section-number">6.2</span> Tidy data</a>
  <ul class="collapse">
  <li><a href="#tidy-data-in-action" id="toc-tidy-data-in-action" class="nav-link" data-scroll-target="#tidy-data-in-action"><span class="header-section-number">6.2.1</span> Tidy data in action</a></li>
  <li><a href="#recognizing-untidy-data" id="toc-recognizing-untidy-data" class="nav-link" data-scroll-target="#recognizing-untidy-data"><span class="header-section-number">6.2.2</span> Recognizing untidy data</a></li>
  </ul></li>
  <li><a href="#introduction-to-the-relational-data-model" id="toc-introduction-to-the-relational-data-model" class="nav-link" data-scroll-target="#introduction-to-the-relational-data-model"><span class="header-section-number">6.3</span> Introduction to the relational data model</a>
  <ul class="collapse">
  <li><a href="#data-normalization" id="toc-data-normalization" class="nav-link" data-scroll-target="#data-normalization"><span class="header-section-number">6.3.1</span> Data Normalization</a></li>
  <li><a href="#managing-table-relationships" id="toc-managing-table-relationships" class="nav-link" data-scroll-target="#managing-table-relationships"><span class="header-section-number">6.3.2</span> Managing table relationships</a></li>
  <li><a href="#joining-tables" id="toc-joining-tables" class="nav-link" data-scroll-target="#joining-tables"><span class="header-section-number">6.3.3</span> Joining tables</a></li>
  <li><a href="#entity-relationship-diagrams" id="toc-entity-relationship-diagrams" class="nav-link" data-scroll-target="#entity-relationship-diagrams"><span class="header-section-number">6.3.4</span> Entity Relationship Diagrams</a></li>
  </ul></li>
  <li><a href="#data-modeling-exercise" id="toc-data-modeling-exercise" class="nav-link" data-scroll-target="#data-modeling-exercise"><span class="header-section-number">6.4</span> Data modeling exercise</a></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources"><span class="header-section-number">6.5</span> Resources</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="learning-objectives" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="learning-objectives">Learning Objectives</h2>
<ul>
<li>Review high level best practices for effective data management</li>
<li>Understand the principles of tidy data</li>
<li>Introduce the relational data model</li>
<li>Learn how to design and diagram multi-table data models</li>
</ul>
<!--
::: callout-note
Slides for this lesson available [here](files/intro-tidy-data-slides.pdf).
:::
-->
</section>
<section id="simple-guidelines-for-data-management" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="simple-guidelines-for-data-management"><span class="header-section-number">6.1</span> Simple guidelines for data management</h2>
<p>A great paper called ‘Some Simple Guidelines for Effective Data Management’ <span class="citation" data-cites="borer_simple_2009">(<a href="#ref-borer_simple_2009" role="doc-biblioref">Borer et al. 2009</a>)</span> lays out exactly that - guidelines that make your data management, and your reproducible research, more effective. Although not strictly about data modeling, the first six guidelines are worth remembering as foundational guidelines, here slightly revised to reflect changes over the intervening years:</p>
<div>

</div>
<div class="quarto-layout-panel" data-layout="[[1,1,1], [1,1,1]]">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Use a scripted workflow
</div>
</div>
<div class="callout-body-container callout-body">
<p>Manipulating data using scripts (like R!) gives you much more control over all decisions and changes. Scripts allow you to document, audit, edit, reuse, and reproduce all steps. In contrast, point-and-click manipulations, such as manually editing data in a spreadsheet application, are time consuming, poorly documented, and difficult to reproduce.</p>
</div>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Keep a raw version of data
</div>
</div>
<div class="callout-body-container callout-body">
<p>In conjunction with using a scripted language, keeping a raw version of your data is essential for maintaining a reproducible workflow. When you keep your raw data, your scripts can read from that raw data and create as many derived data products as you need, and you will always be able to re-run your scripts and know that you will get the same output.</p>
</div>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prefer open file formats (e.g.&nbsp;csv, txt)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Using a file that can be read by free, open source software greatly increases the longevity and accessibility of your data. In contrast, proprietary formats bind your data to a particular vendor or software license that may be hard to maintain and may become obsolete.</p>
</div>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Use simple but descriptive names
</div>
</div>
<div class="callout-body-container callout-body">
<p>File and variable names should be <em>descriptive</em>, helping your future self and others more quickly understand what type of data they contain, but also <em>simple</em> - in particular, without spaces or special characters - to reduce issues when reading and referring to them in scripts and other programmatic environments.</p>
</div>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Include a header line in your data tables
</div>
</div>
<div class="callout-body-container callout-body">
<p>When creating and managin tabular data, using a single header line of column names as the first row of your table is the most common and easiest way to achieve consistency among files.</p>
</div>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Use plain ASCII or UTF-8 for text
</div>
</div>
<div class="callout-body-container callout-body">
<p>Standard character encodings such as ASCII and UTF-8 are widely used for text files, hence far more likely to be parsed correctly and supported well into the future as compared with more esoteric formats.</p>
</div>
</div>
</div>
</div>
</div>
<p>Before moving on to discuss the remaining guidelines, here is an example of how you might organize the files themselves following the simple rules above. Note that we have all open formats, plain text formats for data, sortable file names without special characters, scripts, and a special folder for raw files.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/file-organization.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="images/file-organization.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="350"></a></p>
</figure>
</div>
</section>
<section id="tidy-data" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="tidy-data"><span class="header-section-number">6.2</span> Tidy data</h2>
<p>The final 3 guidelines focus on the structural design of data tables:</p>
<ul>
<li>Design tables to add rows, not columns</li>
<li>Each column should contain only one type of information</li>
<li>Record a single piece of data only once; separate information collected at different scales into different tables.</li>
</ul>
<p>More recently, these have been popularized under the <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html"><strong>tidy data principles</strong></a>, which articulate a simple but effective pattern for organizing data tables in a way that allows us to understand, manage, and analyze data efficiently:</p>
<ol type="1">
<li>Every column is a variable.</li>
<li>Every row is an observation.</li>
<li>Every cell is a single value.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why Tidy Data?
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Efficiency:</strong> less re-creating the wheel. Easier to apply the same tools to different datasets.</li>
<li><strong>Collaboration:</strong> Makes it easier to work with others as you can work with the same tools in the same ways.</li>
<li><strong>Reuse:</strong> It makes it easier to apply similar techniques and analysis across different or new datasets.</li>
<li><strong>Generalizability:</strong> Tools built for one tidy data set can be used to multiple other datasets. Opening posibilities of data you can work with.</li>
</ul>
<blockquote class="blockquote">
<p>“<em>There is a specific advantage to placing varables in columns becasuse it allows R’s vectorized nature to shine. …most buit-in R functions work with vactors of values. That makes transforming tidy data feel particularly natural.</em>” (R for Data Science by Grolemund and Wickham)</p>
</blockquote>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tidy Data: A way of life
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Tidy data is not a language or tool specific.</li>
<li>Tidy data is not an R thing.</li>
<li>Tidy data is not a <code>tidyverse</code> thing.</li>
</ul>
<p><strong>Tidy Data is a way to organize data that will make life easier for people working with data.</strong></p>
<p>(Allison Horst &amp; Julia Lowndes)</p>
</div>
</div>
<p>Let’s make sure we understand the basic terms used above, along with a fourth term (“entity”) that we’ll discuss more later.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 74%">
</colgroup>
<thead>
<tr class="header">
<th>Concept</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Variables</strong></td>
<td><p>A characteristic that is being measured, counted, or described with data.</p>
<p>Example: car type, salinity, year, height, mass.</p></td>
</tr>
<tr class="even">
<td><strong>Observations</strong></td>
<td><p>A single “data point” for which the measure, count, or description of one or more variables is recorded.</p>
<p>Example: If you are collecting variables <em>height</em>, <em>species</em>, and <em>location</em> of plants, then <strong>each plant</strong> is an observation.</p></td>
</tr>
<tr class="odd">
<td><strong>Value</strong></td>
<td><p>The record measured, count, or description of a variable.</p>
<p>Example: 3 ft</p></td>
</tr>
<tr class="even">
<td><strong>Entity</strong></td>
<td><p>Each <em>type</em> of observation is an entity.</p>
<p>Example: If you are recording the <em>species name</em> and <em>height</em> of plants observed at various sites that each have a <em>site name</em> and <em>location</em>, then <strong>plants</strong> is an entity and <strong>site</strong> is an entity.</p></td>
</tr>
</tbody>
</table>
<section id="tidy-data-in-action" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="tidy-data-in-action"><span class="header-section-number">6.2.1</span> Tidy data in action</h3>
<p>The following is an example of tidy data - it’s easy to see the three tidy data principles apply.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/tidy-data-images/tidy_data/tidy_data.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="images/tidy-data-images/tidy_data/tidy_data.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></a></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/tidy-data-images/tidy_data/tidy_variables.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="images/tidy-data-images/tidy_data/tidy_variables.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></a></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/tidy-data-images/tidy_data/tidy_observations.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="images/tidy-data-images/tidy_data/tidy_observations.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></a></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/tidy-data-images/tidy_data/tidy_values.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="images/tidy-data-images/tidy_data/tidy_values.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></a></p>
</figure>
</div>
</section>
<section id="recognizing-untidy-data" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="recognizing-untidy-data"><span class="header-section-number">6.2.2</span> Recognizing untidy data</h3>
<p>Anything that does not follow the three tidy data principles is <strong>untidy data</strong>.</p>
<p>There are <em>many</em> ways in which data can become untidy. Some are obvious once you know what to look for, while others are more subtle. In this section we will look at some examples of common untidy data situations.</p>
<p>The following is a screenshot of an actual dataset that came across NCEAS. We have all seen spreadsheets that look like this - and it is fairly obvious that whatever this is, it isn’t very tidy.</p>
<p><a href="images/tidy-data-images/tidy_data/excel-org-01.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="images/tidy-data-images/tidy_data/excel-org-01.png" class="img-fluid"></a></p>
<p>Let’s dive deeper into why we consider this untidy data.</p>
<section id="multiple-tables" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="multiple-tables">Multiple tables</h4>
<p>First, notice there are actually three smaller tables within this table. Although for our human brain it is easy to see and interpret this, it is extremely difficult to get a computer to see it this way. <strong>Having multiple tables immediately breaks the tidy data principles</strong>, as we will see next.</p>
<p><a href="images/tidy-data-images/tidy_data/excel-org-02.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="images/tidy-data-images/tidy_data/excel-org-02.png" class="img-fluid"></a></p>
</section>
<section id="inconsistent-columns-variables" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="inconsistent-columns-variables">Inconsistent columns (variables)</h4>
<p>In tidy data, <strong>each column corresponds to a single variable</strong>. If you look down a column, and see that multiple variables exist in the table, the data are not tidy. A good test for this can be to see if you think the column consists of only one unit type.</p>
<p><a href="images/tidy-data-images/tidy_data/excel-org-04.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="images/tidy-data-images/tidy_data/excel-org-04.png" class="img-fluid"></a></p>
</section>
<section id="inconsistent-rows-observations" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="inconsistent-rows-observations">Inconsistent rows (observations)</h4>
<p>In tidy data, <strong>each row must be a single observation</strong>. If you look across a single row, and you notice that there are clearly multiple observations in one row, the data are likely not tidy.</p>
<p><a href="images/tidy-data-images/tidy_data/excel-org-03.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="images/tidy-data-images/tidy_data/excel-org-03.png" class="img-fluid"></a></p>
</section>
<section id="marginal-sums-and-statistics" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="marginal-sums-and-statistics">Marginal sums and statistics</h4>
<p><strong>Marginal sums and statistics are not considered tidy</strong>. They break the first principle (“<em>Every column is a variable</em>”), because a marginal statistic does not represent the same variable as the values it is summarizing. They also break the second principle (“<em>Every row is an observation</em>”), because they represent a combination of observations, rather than a single one.</p>
<p><a href="images/tidy-data-images/tidy_data/excel-org-05.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="images/tidy-data-images/tidy_data/excel-org-05.png" class="img-fluid"></a></p>
</section>
</section>
</section>
<section id="introduction-to-the-relational-data-model" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="introduction-to-the-relational-data-model"><span class="header-section-number">6.3</span> Introduction to the relational data model</h2>
<p>The Relational Model, first developed in the late 1960s, provides a highly structured approach for modeling data, and remains the basis for modern relational databases like SQLite, MariaDB, PostgreSQL, and Microsoft Access. It is fully consistent with the tidy data principles, but goes further by providing a formalized framework for decomposing data into multiple tables, while maintaining the relationships between those tables in a way that allows them to be flexibly joined back together on demand.</p>
<p>A database organized following a relational data model is a <strong>relational database</strong>. However, you don’t have to be using a relational database to enjoy the benefits of using a relational data model, and your data don’t have to be large or complex for you to benefit. Here are a few of the benefits of using a relational data model:</p>
<ul>
<li>Enabling powerful search and filtering</li>
<li>Ability to handle large, complex data sets</li>
<li>Enforcing data integrity</li>
<li>Decreasing errors from redundant updates</li>
</ul>
<p>In this module, we’ll introduce two concepts integral to the relational model. The first involves <em>normalization</em>, and the difference between denormalized and normalized data. The second involves <em>relationships between tables</em>, and different ways of combining records across tables using operations called <em>joins</em>.</p>
<section id="data-normalization" class="level3" data-number="6.3.1">
<h3 data-number="6.3.1" class="anchored" data-anchor-id="data-normalization"><span class="header-section-number">6.3.1</span> Data Normalization</h3>
<p><strong>Data normalization</strong> is the process of creating <strong>normalized data</strong>, which are datasets free from data redundancy to simplify query, analysis, storing, and maintenance. In normalized data we organize data so that:</p>
<ul>
<li>We have separate tables for each type of entity measured</li>
<li>Each table follows the tidy data principles</li>
<li>Each column represents either an identifying variable or a measured variable</li>
<li>We are not repeating information across rows</li>
</ul>
<p>In contrast, a <strong>denormalized table</strong> combines observations about different entities in the same table. A good indication that a data table is denormalized and needs normalization is seeing the same column values repeated across multiple rows. This can sometimes be a convenient way to represent data for certain analysis or visualization tasks, but it is typically an inefficient and error-prone way to manage and store data.</p>
<p>Consider the following table, which shows data about species observed at a specific site and date. The column headers refer to the following:</p>
<ul>
<li><em>date</em>: date when a species was observed</li>
<li><em>site</em>: site where a species was observed</li>
<li><em>name</em>: site’s name</li>
<li><em>altitude</em>: site’s altitude</li>
<li><em>sp1code</em>, <em>sp2code</em>: species code for two plants observed</li>
<li><em>sp1height</em>, <em>sp2height</em>: corresponding height of the plants observed</li>
</ul>
<p>Take a moment to see why this is not tidy data.</p>
<p><img src="images/tidy-data-images/tidy_data/untidy_1.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>Before reading on, try to answer the following questions:</p>
<ol type="1">
<li>What are the observed entities in the example above?</li>
<li>What are the measured variables associated with those observations?</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li>The table has <em>two</em> entities: Site and plants</li>
<li>For plant observations, the table records the species names, plant heights, and dates of observation. For sites, the table records the name and altitude.</li>
</ol>
</div>
</div>
</div>
<p>The table above is <em>not</em> in a normalized form (nor is it tidy!). Each row has measurements about both the <em>site</em> at which observations occurred, as well as observations of two individual plants of possibly different species found at that site.</p>
<p><img src="images/tidy-data-images/tidy_data/untidy_2.png" class="img-fluid"></p>
<p>You’ll often see this described as a <strong><em>wide</em></strong> table, because the observations are spread across a wide number of columns. Note that if we observed a new species in the survey, we would need to add new columns to the table. This is difficult to analyze, understand, and maintain.</p>
<p>To solve this problem, we can create a single column for species code, and a single column for species height. The table is now in a <strong><em>long</em></strong> format, which looks like this:</p>
<p><img src="images/tidy-data-images/tidy_data/tidy_not_normal.png" class="img-fluid"></p>
<p>This was an important first step toward normalizing the data, and technically this is now a tidy table. But we’re not done! Notice that in our new table, the row values for the last three columns are repeated.</p>
<p><img src="images/tidy-data-images/data_normalization/denormalized.png" class="img-fluid"></p>
<p>This happens because each row has variables (columns) and values about more than one entity:</p>
<ul>
<li>1st entity: individual plants found at that site</li>
<li>2nd entity: sites at which the plants were observed</li>
</ul>
<p><img src="images/tidy-data-images/data_normalization/two_entities.png" class="img-fluid"></p>
<p>If we use this information to normalize our data, we should end up with:</p>
<ul>
<li>one tidy table for plants</li>
<li>one tidy table for sites</li>
<li>new columns for uniquely identifying observations (such as site ID)</li>
</ul>
<p>Here’s how our normalized data looks:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/tidy-data-images/data_normalization/normalized.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>Now all of the following are true:</p>
<ul>
<li>Separate tables for each type of entity measured</li>
<li>Each row represents a single observed entity</li>
<li>Each column represents either an identifier, measured variable, or other attribute of that entity</li>
<li>All values in a row describe the corresponding observed entity</li>
<li>All values in a column are of the same type</li>
<li>Information is not repeated across rows</li>
</ul>
<p>In addition, notice that each table also satisfies the tidy data principles!</p>
<p>And last but not least, notice that this normalized version of the data meets the three guidelines set by <span class="citation" data-cites="borer_simple_2009">(<a href="#ref-borer_simple_2009" role="doc-biblioref">Borer et al. 2009</a>)</span>:</p>
<ul>
<li>Design tables to add rows, not columns</li>
<li>Each column should contain only one type of information</li>
<li>Record a single piece of data only once; separate information collected at different scales into different tables.</li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
From one table to multiple tables
</div>
</div>
<div class="callout-body-container callout-body">
<p>Normalizing data by separating it into multiple tables often makes researchers really uncomfortable. This is understandable! The person who designed this study collected all of these measurements for a reason - so that they could analyze the measurements together. Now that our site and plant information are in separate tables, how would we use site altitude as a predictor variable for species composition, for example?</p>
<p>We will go over a solution in the next section.</p>
</div>
</div>
</section>
<section id="managing-table-relationships" class="level3" data-number="6.3.2">
<h3 data-number="6.3.2" class="anchored" data-anchor-id="managing-table-relationships"><span class="header-section-number">6.3.2</span> Managing table relationships</h3>
<p>To reiterate, the <strong>relational data model</strong> is not just about decomposing your data into tidy tables, but also connecting those tables to one another so that observations of related entities can linked back together as needed.</p>
<p>This linkage is accomplished via <em>keys</em>, the cornerstone of relational data models. Keys are columns (or combinations of columns) whose values unambiguously identify observations of an entity.</p>
<p>Two types of keys are common within relational data models:</p>
<ul>
<li><strong>Primary Key</strong>: chosen key for a table, uniquely identifying each observation in the table</li>
<li><strong>Foreign Key</strong>: reference to a primary key in another table, used to create links between tables</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>In our normalized tables below, identify the following:</p>
<ul>
<li>the primary key for each table</li>
<li>any foreign keys that exist</li>
</ul>
<p><a href="images/tidy-data-images/data_normalization/normalized.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="images/tidy-data-images/data_normalization/normalized.png" class="img-fluid" width="450"></a></p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The primary key of the top table is <code>id</code>. The primary key of the bottom table is <code>site</code>.</p>
<p>The <code>site</code> column is the <em>primary key</em> of that table because it uniquely identifies each row of the table as a unique observation of a site. In the first table, however, the <code>site</code> column is a <em>foreign key</em> that references the primary key from the second table. This linkage tells us that the first height measurement for the <code>DAPU</code> observation occurred at the site with the name <code>Taku</code>.</p>
<p><a href="images/tidy-data-images/relational_data_models/primary_foreign_keys.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="images/tidy-data-images/relational_data_models/primary_foreign_keys.png" class="img-fluid" width="450"></a></p>
</div>
</div>
</div>
<p>In the examples above, each key corresponds to an individual column in a table. However, it’s also possible to define a key based on multiple columns. Imagine a table containing one unique observation for each <em>date</em> from each <em>site</em>. In that case, although neither date nor site alone uniquely identifies each table record, the combination of these two columns contains all the information we need. Keys made up of two or more columns in a table are called <em>composite keys</em>, and you’ll see a lot of these in practice.</p>
<p>Finally, note that there are various strategies for choosing and/or creating keys when desiging a data model, including natural keys, surrogate keys, and compound keys. Each type of key has advantages and disadvantages. We won’t discuss them more here, but you can read more about it in <a href="https://www.databasestar.com/database-keys">this article</a>.</p>
</section>
<section id="joining-tables" class="level3" data-number="6.3.3">
<h3 data-number="6.3.3" class="anchored" data-anchor-id="joining-tables"><span class="header-section-number">6.3.3</span> Joining tables</h3>
<p>Frequently, analysis of data will require merging these separately managed tables back together. There are multiple ways to join the observations in two tables, based on how the rows of one table are merged with the rows of the other. Regardless of the join we will perform, we need to start by identifying the primary key in each table and how these appear as foreign keys in other tables.</p>
<p>When conceptualizing merges, one can think of two tables, one on the <em>left</em> and one on the <em>right</em>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/tidy-data-images/merging_data/join-diagrams-separate.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="images/tidy-data-images/merging_data/join-diagrams-separate.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></a></p>
</figure>
</div>
<section id="inner-join" class="level4" data-number="6.3.3.1">
<h4 data-number="6.3.3.1" class="anchored" data-anchor-id="inner-join"><span class="header-section-number">6.3.3.1</span> Inner Join</h4>
<p>The most common (and often useful) join is when you merge the subset of rows that have matches in both the left table and the right table: this is called an <em>INNER JOIN</em>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/tidy-data-images/merging_data/join-diagrams-inner.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="images/tidy-data-images/merging_data/join-diagrams-inner.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></a></p>
</figure>
</div>
</section>
<section id="left-join" class="level4" data-number="6.3.3.2">
<h4 data-number="6.3.3.2" class="anchored" data-anchor-id="left-join"><span class="header-section-number">6.3.3.2</span> Left Join</h4>
<p>A <em>LEFT JOIN</em> takes all of the rows from the left table, and merges on the data from matching rows in the right table. Keys that don’t match from the left table are still provided with a missing value (na) from the right table.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/tidy-data-images/merging_data/join-diagrams-left.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="images/tidy-data-images/merging_data/join-diagrams-left.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></a></p>
</figure>
</div>
</section>
<section id="right-join" class="level4" data-number="6.3.3.3">
<h4 data-number="6.3.3.3" class="anchored" data-anchor-id="right-join"><span class="header-section-number">6.3.3.3</span> Right Join</h4>
<p>A <em>RIGHT JOIN</em> is the same as a left join, except that all of the rows from the right table are included with matching data from the left, or a missing value. Notice that left and right joins can ultimately be the same depending on the positions of the tables.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/tidy-data-images/merging_data/join-diagrams-right.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="images/tidy-data-images/merging_data/join-diagrams-right.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></a></p>
</figure>
</div>
</section>
<section id="full-outer-join" class="level4" data-number="6.3.3.4">
<h4 data-number="6.3.3.4" class="anchored" data-anchor-id="full-outer-join"><span class="header-section-number">6.3.3.4</span> Full Outer Join</h4>
<p>Finally, a <em>FULL OUTER JOIN</em> includes all data from all rows in both tables, and includes missing values wherever necessary.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/tidy-data-images/merging_data/join-diagrams-full.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17"><img src="images/tidy-data-images/merging_data/join-diagrams-full.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></a></p>
</figure>
</div>
<p>Sometimes people represent these as Venn diagrams showing which parts of the left and right tables are included in the results for each join. This representation is useful, but it misses part of the story related to where the missing value comes from in each result.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/tidy-data-images/merging_data/join-venn.png" class="img-fluid figure-img"></p>
<figcaption>Image source: R for Data Science, Wickham &amp; Grolemund.</figcaption>
</figure>
</div>
<p>We suggest reading the <a href="https://r4ds.had.co.nz/relational-data.html#join-problems">Relational Data chapter in the “R for Data Science” book</a> for more examples and best practices about joins.</p>
</section>
</section>
<section id="entity-relationship-diagrams" class="level3" data-number="6.3.4">
<h3 data-number="6.3.4" class="anchored" data-anchor-id="entity-relationship-diagrams"><span class="header-section-number">6.3.4</span> Entity Relationship Diagrams</h3>
<p><strong>Entity-relationship modeling</strong> is the important process of stepping back to think about your data, deciding what are your entities, their attributes, and the relationships between them. Ideally you will do this early in the process of gather and recording data, but often you’ll need to do it as part of the process of organizing and cleaning up an existing dataset. In either case, an <strong>Entity Relationship Diagram</strong> (ERD) is a simple but powerful way to compactly describe the structure and relationships of tables in a relational database, including the primary and foreign keys. If you can draw an ERD for your data, it will make it easier to reason about the assumptions you’re making about your data, and validate that your data model is a solid representation of the real-world entities and phenomena captured in your data.</p>
<p>Here are the steps to building up an ERD:</p>
<div>

</div>
<div class="quarto-layout-panel" data-layout="[[1,1], [1]]">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Step 1: Identify your entities
</div>
</div>
<div class="callout-body-container callout-body">
<p>Identify the entities in the relational database and draw a box for each one. In our case, the entities are <strong>plants</strong> and <strong>sites</strong>, since we are gathering observations about both of these.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">erDiagram
    Plants { }
    Sites { }
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Step 2: Add variables and identify keys
</div>
</div>
<div class="callout-body-container callout-body">
<p>In each box, add the variables as a list, identifying all primary keys (PKs) and foreign keys (FKs).</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">erDiagram
    Plants {
        numeric id PK
        date date
        numeric site FK
        string sp_code
        numeric sp_height
    }
    Sites {
        numeric site PK
        string name
        numeric altitude
    }
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: flex-start;">
<!--
::: callout-note
#### Step 3: Add relationships between entities.

- Draw a line between the boxes of any two entities that have a PK-FK relationship, and annotate it to describe how they are related. The "direction" of the relationship is from the table with the FK to the table with the FK. In this example, "site" is the primary key of **Sites** and appears as a foreign key in **Plants**, so we might label Plants as "_observed_in_" sites.




::::::{.cell layout-align="default"}

:::::{.cell-output-display}

::::{}
`<figure class=''>`{=html}

:::{}

<pre class="mermaid mermaid-js">erDiagram
    Plants --- Sites : observed_in
    Sites {
        numeric site PK
        string name
        numeric altitude
    }
    Plants {
        numeric id PK
        date date
        numeric site FK
        string sp_code
        numeric sp_height
    }
</pre>
:::
`</figure>`{=html}
::::
:::::
::::::



:::
-->
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: flex-start;">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Step 3: Add entity relationships and indicate cardinality
</div>
</div>
<div class="callout-body-container callout-body">
<p>First draw a line between each pair of boxes that have a PK-FK relationship, and annotate it to describe how they are related. The “direction” of the relationship is from the table with the FK to the table with the FK. In this example, <code>site</code> is the primary key of <strong>Sites</strong> and appears as a foreign key in <strong>Plants</strong>, so we might label <strong>Plants</strong> as <em>observed_in</em> <strong>Sites</strong>.</p>
<p>Then quantify how many items in one entity can be related to each observation in another entity. The options are <em>zero</em>, <em>one</em>, <em>many</em>, or some combination thereof. In this case, if every site has one or more plant, we add the symbol for “One or Many” at the end of the line going from Sites to Plants. In the other direction, a plant must be observed in exactly one site, so we add the symbol for “One and ONLY One” at the end of the line going from Plants to Sites.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">erDiagram
    Plants |{--|| Sites : observed_in
    Plants {
        numeric id PK
        date date
        numeric site FK
        string sp_code
        numeric sp_height
    }
    Sites {
        numeric site PK
        string name
        numeric altitude
    }
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Here is an example of a more complicated ERD, with details about how to indicate the other types of relationships.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/tidy-data-images/relational_data_models/ERD_Relationship_Symbols_Quick_Reference.png" class="lightbox" data-gallery="quarto-lightbox-gallery-18"><img src="images/tidy-data-images/relational_data_models/ERD_Relationship_Symbols_Quick_Reference.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></a></p>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you need to produce a publishable ERD such as the one above, <a href="https://mermaid.js.org/intro">Mermaid</a> is a great option. Here is the Mermaid “code” used to produce the ERD above for our simple Plants and Sites database. Just like with R code, we can put this in a Quarto code chunk, and it will be used to generate a visual diagram when we render the document.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>erDiagram</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    Plants |{--|| Sites : observed_in</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    Sites {</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        numeric site PK</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        string name</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        numeric altitude</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    Plants {</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        numeric id PK</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        date date</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        numeric site FK</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>        string sp_code</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        numeric sp_height</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">erDiagram
    Plants |{--|| Sites : observed_in
    Sites {
        numeric site PK
        string name
        numeric altitude
    }
    Plants {
        numeric id PK
        date date
        numeric site FK
        string sp_code
        numeric sp_height
    }
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>Read more <a href="https://mermaid.js.org/syntax/entityRelationshipDiagram.html">here</a> about how to use this tool to create diagrams.</p>
</div>
</div>
</section>
</section>
<section id="data-modeling-exercise" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="data-modeling-exercise"><span class="header-section-number">6.4</span> Data modeling exercise</h2>
<p>Let’s practice what we’ve learned!</p>
<p>In this exercise, we’ll be working with a tidied up version of a dataset from ADF&amp;G containing commercial catch data from 1878-1997. The dataset and reference to the original source can be viewed at its public archive: <a href="https://knb.ecoinformatics.org/#view/df35b.304.2" class="uri">https://knb.ecoinformatics.org/#view/df35b.304.2</a>. That site includes metadata describing the full data set, including column definitions.</p>
<p>Here’s the first <code>catch</code> table:</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-f168667aa6e6cb3a59fc" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f168667aa6e6cb3a59fc">{"x":{"filter":"none","vertical":false,"data":[["SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","SSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","NSE","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","YAK","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","GSE","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","BER","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","COP","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","PWS","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","CKI","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","BRB","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","KSK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","YUK","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","NRS","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KTZ","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","KOD","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","CHG","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","SOP","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","ALU","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP","NOP"],[1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997],["0","0","0","0","0","0","0","0","0","3","4","5","9","12","0","3","4","0","4","9","3","17","43","34","66","80","152","191","133","119","39","115","122","121","81","54","79","140","49","106","63","69","145","76","220","297","315","341","200","36","399","609","485","152","57","93","378","146","152","257","298","319","266","257","187","211","263","204","169","151","107","121","138","150","124","100","73","84","118","102","113","108","110","95","112","125","142","113","152","144","104","61","96","127","84","88","106","93","68","74","70","66","78","84","125","120","88","98","56","32","24","38","0","0","0","0","0","0","0","0","0","0","0","7","9","11","15","0","13","11","9","5","6","33","46","27","61","32","38","37","62","68","65","71","94","135","176","173","246","149","223","124","478","479","251","197","295","239","379","307","163","312","73","121","597","278","263","265","493","370","515","180","252","173","169","261","170","205","222","192","262","263","293","226","218","126","173","184","207","185","127","130","174","238","184","193","191","218","213","198","197","140","226","187","151","130","185","264","217","207","167","174","194","193","174","183","212","159","184","209","204","134","182","152","170","187","256","0","0","0","0","0","0","7","0","2","0","5","4","12","9","1","17","13","13","24","13","9","16","20","20","19","10","0","0","83","0","0","13","18","8","4","7","7","7","2","5","0","1","3","11","9","8","9","1","0","1","2","2","2","4","6","4","1","1","1","3","3","1","2","1","2","2","4","5","10","10","6","4","8","6","6","38","41","24","31","17","20","5","10","10","12","10","7","6","11","9","4","17","9","12","10","7","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","6","6","0","4","6","8","12","6","6","2","36","0","13","13","11","19","42","70","5","181","94","124","60","80","19","103","200","97","156","133","156","288","223","174","254","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","I","0","2","2","6","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","5","20","2","1","0","3","1","1","6","2","3","7","14","14","20","13","23","11","10","10","16","20","21","42","45","47","25","35","29","19","13","3","11","14","11","9","5","12","25","20","10","22","24","15","6","9","18","17","29","12","16","20","12","8","7","10","9","8","15","11","13","15","11","10","10","14","19","16","22","20","19","20","31","22","29","18","8","20","47","53","39","42","41","41","31","31","22","35","40","30","48","67","58","53","0","5","6","0","9","8","10","1","2","2","5","3","7","3","5","0","0","0","0","0","0","0","0","0","1","0","0","0","0","1","7","6","0","0","1","1","3","2","3","4","1","2","2","8","4","4","3","3","2","1","2","1","0","1","0","1","0","2","1","0","1","1","4","0","0","0","0","0","1","12","1","2","0","2","2","0","1","1","4","2","3","1","4","1","2","2","3","1","1","1","2","0","0","0","1","1","1","1","1","1","1","0","0","1","2","1","1","1","1","30","16","25","18","14","16","17","27","34","49","66","30","18","22","63","34","60","49","56","48","64","48","84","63","65","35","24","40","14","31","30","27","51","76","87","70","68","72","51","71","59","72","75","81","86","58","53","63","105","95","111","85","69","64","107","106","111","163","188","75","89","65","46","65","43","23","33","28","20","20","18","5","10","10","8","5","12","8","20","16","5","7","5","11","15","19","15","14","13","22","22","11","25","40","41","31","29","18","15","20","23","21","22","15","15","0","0","0","0","0","0","0","0","0","44","11","20","17","20","19","38","58","106","109","87","98","117","143","138","90","130","102","113","98","74","101","148","105","91","87","202","127","92","74","67","72","97","75","84","66","151","105","47","68","49","46","4","22","37","46","33","15","31","19","41","16","27","27","42","49","51","45","40","53","43","56","75","66","91","103","84","112","89","84","62","140","113","77","117","104","125","140","123","70","44","46","30","96","131","192","208","95","237","253","199","102","120","94","75","45","40","34","30","69","86","141","99","87","77","8","0","0","1","8","3","5","35","10","9","7","19","2","0","0","0","0","8","9","9","0","0","6","1","0","1","0","0","0","0","0","0","0","2","5","0","0","0","4","0","0","0","0","0","0","0","4","6","23","21","19","21","24","26","30","43","22","27","7","57","51","31","28","50","59","64","8","49","79","78","81","74","74","45","65","75","67","85","48","68","29","29","73","23","48","12","105","58","70","17","13","27","0","0","0","0","0","0","0","5","9","25","7","21","6","14","10","18","30","22","28","14","20","23","54","34","36","42","56","39","59","65","56","62","64","64","78","68","120","95","117","94","118","93","129","107","134","117","148","93","75","98","64","88","96","99","128","154","158","124","106","120","144","100","132","101","102","96","102","120","96","115","92","112","5","7","7","2","1","2","2","1","2","2","3","3","2","3","2","2","5","10","11","6","8","6","10","8","19","6","7","4","6","9","6","5","9","5","9","0","13","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","5","4","3","1","3","2","4","4","3","4","2","1","1","1","1","1","1","1","2","2","2","1","1","2","1","2","1","4","3","3","5","2","2","1","1","1","3","1","1","2","1","3","1","1","1","2","0","0","1","1","2","2","1","3","1","2","1","1","2","2","1","1","1","0","1","1","1","2","2","2","1","1","1","1","1","0","1","1","3","2","1","1","1","4","5","5","4","5","22","0","19","22","24","42","23","19","13","19","0","0","0","0","0","0","0","0","3","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","2","0","1","2","1","1","1","1","1","0","1","1","0","1","1","1","0","2","0","1","1","1","1","1","1","1","1","2","0","1","2","1","2","1","2","1","1","1","1","1","0","1","0","1","1","1","1","1","0","0","0","2","1","2","1","1","1","3","1","2","0","1","0","1","2","1","2","1","2","3","5","5","4","2","3","3","7","4","10","3","11","20","4","5","3","3","0","0","0","0","0","2","1","5","7","6","9","10","8","1","7","4","4","11","9","10","8","11","11","11","17","13","18","14","14","9","6","17","9","13","5","22","10","21","6","3","1","4","4","2","9","7","4","5","5","6","1","1","2","1","3","2","2","2","1","2","1","2","2","2","1","0","1","0","2","1","1","2","5","11","10","27","9","7","6","9","11","7","17","8","8","14","10","17","6","8","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","2","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","2","2","1","2","0","0","1","1","8","14","44","20","10","20","19","12","10","9","10","11","24","16","5","4","4","2","3","1","2","1","1","2","6","4","1","1","0","0","0","0","2","0","2","1","1","1","1","1","3","4","4","1","15","29","10","6","6","4","4","6","9","6","4","5","5","2","2","5","5","2","5","5","14","17","18","19","30","29","23","24","12","14","17","11","12","9","13","24","19","8","5","10"],[5,155,224,182,251,274,207,189,253,408,989,791,708,797,763,264,256,230,1143,1009,981,808,731,723,978,1032,808,392,826,781,596,657,789,1240,941,329,673,1007,1065,682,832,573,454,624,780,883,626,412,456,736,1215,1056,1072,1098,851,1008,954,533,823,826,402,250,244,221,246,281,457,606,440,234,337,501,541,364,211,212,346,299,466,485,445,580,309,248,185,237,463,422,346,115,256,650,455,552,739,713,839,935,638,1129,904,540,888,1131,1276,1328,1797,2313,1704,1353,2110,2012,108,143,26,113,143,212,557,636,670,578,428,349,337,469,338,337,485,1024,711,1185,1278,2072,1335,1330,1056,1365,1585,1541,1313,1567,1254,2128,1538,1274,1454,1486,1480,1221,631,810,972,1014,934,978,625,897,1278,1494,661,1026,441,431,751,940,903,1089,1063,485,424,455,454,716,623,370,367,199,191,306,390,352,659,641,336,470,420,388,336,329,449,345,326,365,477,423,303,441,445,371,257,324,455,259,57,207,254,202,356,210,210,440,469,475,497,388,577,410,664,535,505,555,532,480,288,478,354,53,0,142,267,297,331,431,483,465,508,638,562,544,433,435,493,454,494,486,513,377,360,395,201,207,242,0,0,313,280,0,157,355,407,248,228,375,326,171,243,158,138,183,233,116,129,82,78,0,148,110,112,127,111,108,111,42,77,48,83,81,53,92,123,185,88,81,118,112,129,132,128,82,73,131,186,131,165,160,149,213,153,103,235,151,260,162,330,345,230,315,347,208,154,209,111,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,127,117,148,114,0,192,269,262,389,583,553,59,0,12,5,18,0,2,44,6,10,3,73,76,18,93,49,96,26,40,72,32,26,28,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,66,0,40,36,113,24,39,39,27,106,0,0,0,123,0,54,0,0,0,0,0,41,39,10,106,141,163,173,140,163,121,131,192,87,53,37,0,0,0,0,0,0,20,78,0,50,29,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,9,0,34,41,29,24,27,33,60,72,23,13,11,25,12,26,38,24,37,52,15,4,22,31,14,34,139,0,56,130,180,99,27,19,17,7,9,8,19,20,34,28,22,38,10,502,320,265,264,466,317,222,408,456,405,571,819,770,920,1492,1329,855,570,506,626,791,161,211,341,532,968,830,760,830,629,914,112,863,1024,768,634,436,444,562,700,770,824,550,354,173,442,800,452,1136,564,1100,637,541,542,307,300,361,528,678,375,700,818,1006,508,573,697,1115,617,727,333,607,335,865,619,250,81,19,478,1178,627,900,928,780,1181,577,1028,846,1208,971,1398,1153,1272,2357,2986,243,411,711,0,793,710,508,715,371,417,527,748,781,800,814,109,100,61,18,117,150,68,23,48,75,72,52,72,222,249,153,130,93,141,170,158,97,157,118,183,265,207,159,256,107,144,175,153,108,116,121,76,75,97,165,141,176,111,199,208,93,75,208,74,49,6,13,156,66,14,0,35,69,54,60,67,116,100,46,122,285,104,88,198,125,130,190,113,310,222,150,190,251,1055,102,336,496,489,545,184,138,58,508,781,419,334,230,606,1167,170,407,324,310,355,551,559,585,482,710,564,489,96,226,461,671,583,840,1249,1195,1369,1473,1861,1699,1660,1668,944,1315,984,860,1099,1056,1511,2000,1459,1173,1050,918,806,1132,1336,1815,1356,2390,1581,2425,2335,1649,1293,1540,1468,1940,1557,1474,1474,2035,2153,2642,2481,1510,1490,1247,1064,1295,671,497,634,948,1185,1173,958,991,1426,1867,1409,1200,815,753,659,938,699,525,713,1722,2154,2778,989,1643,1550,3391,5237,2376,4339,5030,9718,7165,5185,3820,2508,9301,5004,3706,3243,4376,4450,0,0,0,0,0,0,0,0,0,940,1235,1472,2100,3318,4928,5113,8547,10221,12809,16320,11903,14834,10823,10193,16234,15498,11594,8815,19696,20582,20195,14788,17522,24514,23091,7161,8898,15680,23632,18182,10302,7910,19414,11072,19710,12189,4259,12791,14940,23709,20601,3023,20587,21258,24700,13332,4727,7154,6343,17330,11546,7300,8051,18642,14544,6449,7157,4327,11266,6112,4653,4549,8881,6276,2986,4608,13705,11914,4718,2871,5596,24255,9314,4331,2793,6617,20354,9584,2825,761,1362,4899,5617,4878,9928,20737,22373,25603,15103,37372,24710,23703,15776,16069,13990,28735,33444,25821,31880,40463,35224,44269,29592,12159,0,3,0,0,0,0,0,0,0,6,0,1,6,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,2,10,0,13,2,1,1,6,11,13,4,4,5,28,18,16,20,16,705,43,106,96,89,81,121,142,171,150,83,204,203,194,172,194,200,123,124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,59,189,282,469,646,1005,2781,3755,3593,3846,3126,3245,3830,2247,3329,2786,2033,1935,3450,4826,3868,1826,2875,2142,3980,4232,2488,1915,1955,2686,2246,1663,1255,1664,3373,3646,1894,1619,1958,2858,1097,1090,1408,1693,3015,1155,1592,712,466,1183,1058,1428,1829,1614,2657,1881,1966,1786,1318,1730,1282,1991,1818,2041,839,993,1260,892,921,468,604,317,325,164,271,234,288,330,363,408,785,407,498,346,632,309,760,591,917,478,222,167,419,136,641,623,1072,631,651,1289,1204,1232,1951,1843,3188,1794,2701,1290,5248,5704,4168,4378,2878,4489,4970,2506,13,560,453,775,522,600,600,683,850,765,1165,904,1047,907,1782,1150,1690,1297,1324,1623,1631,1731,1315,1078,1331,833,1057,1330,1003,1457,1543,885,1773,1829,1249,643,877,713,511,456,786,1049,21,715,1578,596,1108,619,981,629,411,1482,250,654,659,1248,402,221,869,2085,370,543,353,259,127,295,92,353,670,305,320,428,710,323,365,409,558,631,222,468,878,310,1326,1016,378,870,663,400,1164,1972,1576,1049,860,1839,1522,1824,2661,922,1646,1899,796,1159,2094,1899,1277,1697,1618,1724,1958,770,69,108,46,241,334,300,629,368,731,1486,1014,619,1142,831,3377,1827,1352,820,3072,715,972,936,935,1863,2977,1997,1372,978,3663,1558,772,1882,1040,1072,810,2398,539,813,752,1137,286,637,1745,264,895,1039,636,550,641,342,186,217,385,457,408,204,371,880,606,297,700,922,1779,716,557,330,197,244,375,312,577,1150,3613,2242,2346,2557,2318,2145,1225,1450,1474,2661,2387,2320,3446,3689,2107,3016,1543,2282,9,0,0,0,0,76,70,55,4,10,0,14,0,25,19,1,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,43,4,6,13,0,27,0,6,8,3,5,5,0,0,1,0,3,0,0,0,0,0,0,19,0,0,2,12,9,5,3,6,67,2,6,0,4,8,12,1,3,0,0,0,0,0,135,67,167,143,0,130,253,889,1325,1974,1975,680,1209,389,1372,1746,668,732,702,400,673,231,856,878,168,761,977,350,1091,479,611,861,1010,746,679,492,0,567,415,394,698,358,478,137,128,359,355,537,355,587,1371,328,474,635,693,388,256,225,235,199,245,225,237,321,573,354,179,172,256,238,641,472,897,1979,2786,1857,1435,2092,1735,2596,2464,1209,1528,1719,2415,2392,3576,3867,2783,3273,1911,2155],[0,0,16,11,42,24,11,1,5,8,192,161,132,139,84,107,34,125,242,184,169,180,186,128,235,355,517,157,225,332,501,633,640,690,272,159,554,585,482,462,446,241,907,850,1285,722,484,692,1076,1198,1094,867,1359,714,1107,1563,1414,1273,940,1989,1833,997,1324,1364,1031,1257,637,525,615,467,366,488,500,354,294,399,642,386,722,593,598,169,658,120,281,428,821,349,640,271,295,299,697,547,529,607,800,811,687,984,1568,663,349,815,1259,1307,1302,1331,1735,1093,1173,540,0,0,0,0,0,0,0,2,0,5,0,11,11,9,12,37,4,38,66,107,249,136,162,388,221,202,137,238,365,449,283,566,299,830,626,701,799,535,456,442,456,475,448,400,599,1252,519,630,430,906,398,643,416,499,356,640,324,502,611,612,300,275,425,411,474,716,872,621,1925,918,488,888,670,420,666,357,530,306,360,391,743,696,829,561,577,762,415,437,442,635,443,558,119,476,519,810,615,450,586,1071,1018,962,1213,1588,672,437,1078,1325,1668,1914,1825,3220,1716,1492,1034,12,0,97,50,81,101,46,68,164,158,127,112,116,157,127,189,225,244,211,198,180,190,155,148,144,292,0,0,84,0,0,133,238,146,207,178,201,84,230,341,185,107,91,173,123,75,106,45,0,128,188,151,267,202,130,63,99,139,121,130,190,146,170,125,67,120,122,60,39,41,56,43,79,38,52,100,209,123,137,166,237,101,261,402,248,208,260,311,284,221,479,509,761,536,492,401,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,256,331,590,40,95,123,138,176,109,82,280,43,3,22,0,24,0,9,24,6,26,7,82,130,22,64,71,130,99,83,111,102,154,196,152,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,52,78,80,77,64,0,0,25,80,57,53,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,46,14,0,92,70,53,27,21,59,70,51,56,89,79,52,50,46,67,4,79,88,20,65,29,24,42,47,91,114,109,83,145,118,212,419,115,16,87,27,43,111,126,116,259,282,94,0,0,0,0,0,0,0,18,34,36,0,42,12,118,126,74,53,74,0,0,0,42,153,178,410,304,184,598,92,0,96,0,80,0,46,0,7,229,566,710,186,294,324,284,279,267,173,146,154,164,30,158,158,109,59,82,132,138,134,175,203,243,71,116,161,231,77,162,209,103,132,47,54,112,131,220,195,225,310,455,237,382,588,296,112,316,195,247,386,292,281,678,543,193,19,0,0,0,0,72,17,143,32,26,0,0,88,0,0,0,0,0,0,0,0,0,14,20,16,0,13,7,48,45,100,73,89,9,9,27,69,84,79,259,190,66,108,55,100,76,100,34,44,60,53,36,90,48,64,73,65,44,159,66,35,116,74,48,51,37,0,1,35,21,23,1,31,11,32,49,31,45,24,41,12,8,12,32,3,2,1,6,6,1,1,7,3,4,30,10,29,18,14,48,76,203,234,145,202,48,122,140,172,64,34,19,0,28,28,83,55,20,9,55,59,24,0,93,177,95,88,80,88,71,81,188,122,210,61,251,173,302,21,200,143,188,198,353,388,523,185,498,328,375,188,251,170,328,216,214,163,478,359,645,280,257,330,581,444,408,280,351,285,234,228,337,180,208,127,242,113,314,119,358,204,462,154,295,180,475,101,279,104,82,106,206,234,212,196,226,285,286,495,841,528,467,678,777,466,571,353,512,447,475,321,600,466,336,164,0,0,0,0,0,0,0,0,0,74,47,28,245,150,56,100,0,4,194,60,129,78,207,129,103,81,139,130,195,67,99,130,293,62,109,47,153,85,160,9,40,17,13,0,5,59,34,1,5,16,12,2,24,2,5,0,25,35,29,2,25,16,51,10,12,26,29,42,5,5,24,21,63,69,136,17,16,21,39,41,37,8,34,54,93,81,15,13,15,57,44,46,27,107,94,74,348,314,620,128,575,163,182,65,203,240,103,118,192,73,175,49,125,50,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,8,0,0,1,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,13,16,29,12,23,58,154,29,25,5,24,152,179,110,112,264,252,406,328,278,570,199,830,382,736,479,626,556,445,558,783,695,864,562,1102,168,26,37,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,3,23,6,2,1,19,11,13,97,50,17,22,37,16,3,5,39,26,17,9,24,37,13,82,57,47,0,98,85,44,106,8,0,6,54,35,14,9,17,0,2,6,2,7,7,4,3,0,9,2,5,7,4,7,31,30,31,92,50,68,22,36,24,37,44,57,64,105,43,102,48,70,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,2,19,32,32,0,35,120,103,87,24,38,74,52,44,22,17,28,32,52,50,30,78,104,89,46,120,78,121,93,174,152,291,144,229,170,52,91,90,77,184,165,155,112,148,200,107,60,52,60,56,76,32,54,41,49,52,42,66,35,53,35,21,15,54,29,55,57,36,27,68,10,57,49,66,23,17,4,14,24,24,28,49,141,139,122,345,158,230,284,169,193,303,3,294,325,280,313,296,308,202,381,0,0,0,0,0,64,0,0,57,11,1,13,2,7,0,9,0,0,0,1,0,0,37,8,19,24,34,30,46,13,21,35,22,13,15,19,94,30,32,101,66,37,19,40,25,53,27,18,40,19,24,9,0,31,12,20,14,8,7,5,1,6,15,7,9,1,0,0,5,5,0,5,8,3,1,10,2,9,15,9,2,18,15,15,20,22,12,53,35,17,20,99,120,79,303,62,110,191,117,150,370,68,130,166,311,229,231,282,193,91,0,7,6,12,27,0,10,16,34,5,16,56,48,1,2,75,127,127,194,125,97,85,161,129,112,190,247,117,285,74,221,99,184,183,123,91,239,116,151,56,39,19,71,56,39,48,49,45,62,50,71,8,3,10,16,17,14,34,6,3,31,11,33,17,8,7,9,0,0,2,56,357,274,162,256,128,311,173,236,225,506,444,307,317,418,220,256,264,293,116,0,0,0,0,0,1,4,4,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,11,19,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,26,38,33,54,26,35,6,8,18,57,59,44,25,40,41,37,34,37,47,65,48,26,8,10,27,24,28,26,34,62,113,128,155,238,75,199,176,164,172,234,228,193,217,207,64,242,136,157,95],[0,0,0,92,0,0,8,187,529,606,996,2218,673,1545,2040,1049,1547,669,2381,2060,3859,8055,7120,6784,6832,15252,17141,18098,8433,17992,8608,16706,20021,16789,9844,4631,18494,28786,19896,22660,19268,2581,18062,13000,21228,13567,14784,15245,35204,22982,37428,20988,20207,17453,18493,37016,19610,13165,9949,16294,21318,10681,12770,33981,7737,16393,6335,3798,6462,5248,10076,4683,6460,3569,1542,3875,11007,5145,11259,5710,15650,642,15201,1199,5371,6259,9153,4559,4221,3333,5162,11298,18425,6990,12924,13525,12956,31462,19677,30708,45019,4631,9055,45763,26683,43497,19010,39219,21059,41315,53676,15298,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,1120,1233,951,1330,858,2540,3781,5458,2560,2446,4970,4726,6622,3924,9863,9809,22219,15781,6999,7113,1775,5064,9059,9232,4660,12386,5471,17990,8849,22183,13676,7822,10420,15016,7178,13150,14051,9953,6228,10493,22978,13459,4845,9332,5345,3442,3336,1482,9922,1687,5792,3431,1175,2406,4060,3635,2158,3315,4269,1429,8698,550,13921,7282,5165,4787,2437,9882,3609,5244,3015,3237,1883,664,617,144,2528,2782,3832,1432,5376,11254,6058,5008,21221,1144,5635,2031,13636,5627,18424,15933,18067,36573,6594,10921,13591,35,0,111,45,63,54,54,18,42,181,32,45,6,157,41,93,116,24,44,35,73,294,311,104,246,100,0,0,72,0,0,118,108,88,169,127,129,41,108,67,58,29,64,15,62,25,100,18,0,35,37,9,40,26,17,16,62,13,14,65,28,79,40,4,3,33,2,64,4,81,3,17,4,80,29,78,36,154,144,138,12,26,21,26,9,14,122,61,32,5,21,13,14,55,32,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,634,1155,889,1367,2214,5356,5286,3908,1356,98,575,84,960,135,106,1006,113,530,205,2339,1482,1310,3370,519,1120,1294,371,1740,590,822,294,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,10,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,32,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,2,2,3,0,11,2,1,0,0,0,0,0,0,0,0,6,0,0,0,1,2,9,1,0,2,2,1,1,1,1,1,4,1,1,2,2,9,10,0,3,23,4,1,4,24,34,8,32,19,3,27,3,26,2,1,2,10,12,20,6,8,0,0,0,0,0,0,0,308,302,375,213,51,314,375,399,574,0,0,252,18,0,197,156,402,426,225,449,3270,2591,4303,1008,5315,13,2421,2447,8396,4085,11154,6125,8034,9614,6777,4860,3466,3030,6789,2618,9581,3332,7546,2075,11543,3775,7002,10814,8347,11632,8026,8077,2461,6089,1851,803,2162,1996,12,27,4525,649,6290,0,1842,2298,6742,5295,4207,2460,2699,2626,2452,4829,2810,7311,55,2057,449,4453,3019,4512,2914,15630,14157,20524,20368,13972,21561,25110,11408,29337,11829,21860,44163,37134,8635,5751,36874,16045,26042,25828,0,0,0,38,0,0,0,0,6,79,0,0,0,64,6,375,4,218,71,1662,11,1256,19,1683,54,721,43,446,5,637,39,752,12,586,252,568,377,1023,472,441,118,930,431,853,488,849,319,2604,715,966,1457,1815,1368,1339,682,1660,433,1132,417,2277,550,2460,1286,1803,307,2598,137,2023,337,4960,234,4287,140,2586,408,2864,236,1386,428,657,634,534,1400,1393,1846,2041,3052,2676,3406,1342,998,1318,1318,2710,311,1396,1365,988,843,1176,968,2172,2982,696,2886,0,0,0,0,0,0,0,0,0,0,0,0,0,35,60,17,8,231,502,242,398,291,1902,344,399,101,652,92,1681,425,565,135,684,37,619,0,2045,1,290,0,103,0,288,0,47,0,249,0,172,0,33,0,524,0,0,0,258,0,172,0,55,0,41,0,53,0,32,0,14,0,103,0,92,0,1136,0,302,1,914,0,1550,1,2493,1,1936,2,457,0,127,0,940,0,1037,5,5160,4,2565,7,1492,0,3366,0,401,0,956,0,497,0,500,0,90,0,38,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,1,0,0,0,76,1,27,0,2,1,60,1,40,1,309,1,30,0,18,0,24,0,31,0,38,1,16,1,86,0,85,0,2,0,26,37,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,3,23,6,2,1,19,11,13,97,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,34,33,56,13,0,13,29,71,87,64,5,45,48,149,32,88,49,326,165,227,230,225,76,118,4,41,2,75,0,0,0,6,163,982,82,487,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,10,5,0,0,0,286,154,215,230,547,590,1726,252,3182,225,2467,283,1977,68,2766,929,5435,2674,4607,5297,1535,6108,1651,6840,4720,6574,7642,10781,5648,16787,8398,11741,9998,7602,6093,12480,4955,9045,9546,8857,5968,4928,5305,2100,4577,5175,8439,10794,3319,4716,4039,1967,6738,3926,14114,5480,12044,2887,10756,188,8768,12497,12037,4334,2478,512,2645,2943,11078,6252,15004,11286,17291,10337,8090,4603,10847,7335,11809,5076,14564,6825,5984,16643,3311,34019,8163,42849,3487,11035,0,0,0,0,0,0,0,0,0,6,0,18,52,40,0,84,28,0,0,0,0,0,17,23,55,30,80,56,267,10,396,5,298,31,360,9,1015,43,677,187,46,73,68,170,812,325,537,373,597,1205,223,273,87,327,486,96,568,442,907,472,1072,92,617,19,82,137,348,823,177,305,131,67,198,445,1518,1662,1683,1118,684,109,1291,1780,1287,632,72,25,70,66,395,618,985,1905,1093,1163,873,321,445,160,647,247,2997,28,550,1169,1554,1648,431,2058,189,844,0,0,0,25,40,0,311,120,576,72,2151,80,2110,47,757,144,3931,382,3720,1456,901,1794,6095,998,3605,3109,6539,5386,9471,9302,7169,6005,7183,5347,6763,4360,2654,3640,1964,2320,1684,1544,1614,2845,909,2744,2033,2529,2741,913,1385,885,1511,1728,1961,2303,2722,2859,302,78,1285,1204,1732,1425,78,58,101,61,2367,1436,5344,6565,7861,5033,6778,2828,11628,4431,4033,1209,7045,7293,2866,10617,9770,9928,9180,16312,2208,2321,0,0,0,0,0,180,1,76,4,0,0,0,0,674,4,522,335,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,32,69,566,31,5,0,613,12,445,94,2002,90,194,0,63,8,894,242,642,45,3,2,0,1,0,0,38,539,2597,303,1405,3,2271,0,41,0,183,7,283,0,320,0,860,0,0,0,0,2,0,0,0,0,0,0,0,0,3,1,1,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,3,0,1,3,2,0,0,0,0,0,20,1,18,18,1,28,3,60,10,35,3,28,7,7,2,16,1,0,0,35,0,0,1,11,0,1,1,485,5,302,14,12,3,27,3,23,3,65,4,518,4,194,5,226,12,54,51],[0,0,0,0,0,0,0,0,0,0,0,7,0,1,2,0,0,0,102,343,473,437,616,249,1121,1141,2685,1384,3783,2385,2443,3786,2686,4120,4344,609,2330,2437,4375,4454,2578,620,2830,1032,967,1671,2724,1650,1068,2917,3726,3042,2815,1843,2192,1592,3156,3136,3048,1780,2402,2122,3094,1953,3340,1807,2498,1466,988,388,1535,1428,1169,523,521,1044,971,637,1193,289,706,290,1263,69,635,703,1030,792,685,374,509,425,649,330,833,343,814,512,1823,1394,1845,1184,2078,1256,899,1549,2176,2938,3441,4582,5605,5348,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,187,869,869,917,1187,450,873,1575,2632,1044,1595,1102,2059,2774,6436,4937,3880,1102,1362,1301,2735,3563,3189,1572,2041,1595,1742,1180,2870,2895,2734,2165,3878,2509,1740,1545,2432,1362,2285,3697,3833,1534,1608,1235,904,941,1438,2311,1668,2060,3239,1116,1142,1909,1580,687,485,1504,1007,831,738,1181,2564,1516,1367,476,1786,1237,1905,964,984,310,514,302,213,550,789,483,511,645,2229,1868,1496,1523,1428,696,1313,1784,2752,4936,6951,6572,10459,6441,0,0,0,0,0,0,0,0,2,14,6,0,0,0,0,0,0,0,0,0,0,6,0,2,4,1,0,0,0,0,0,3,3,2,1,4,1,0,1,5,0,0,0,4,1,3,7,0,0,5,13,16,16,24,24,32,18,37,12,12,18,11,6,4,260,4,14,15,7,5,8,9,4,4,7,9,7,8,20,11,6,11,32,13,18,15,30,17,6,3,8,6,5,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,28,7,31,0,0,0,69,449,32,0,21,0,0,55,19,32,67,105,240,292,231,211,390,135,37,168,156,168,335,26,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,44,20,45,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,23,0,8,0,5,23,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,5,1,10,1,1,0,0,2,0,0,2,3,2,7,6,18,14,11,6,8,20,6,13,19,56,26,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,46,370,1342,559,261,3,51,112,385,781,587,655,468,1282,980,560,351,286,261,471,219,227,250,273,532,507,702,476,1209,1754,757,706,458,828,456,549,550,353,6,5,507,706,687,0,382,224,892,943,539,201,427,274,343,321,231,574,45,730,89,100,370,573,485,326,482,1879,1334,1042,1238,1282,1687,1940,1840,996,960,332,329,1173,1039,702,2078,2225,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,122,11,40,28,128,78,108,54,98,42,74,23,37,15,118,59,101,135,100,63,65,57,91,161,265,149,191,232,281,272,401,302,259,306,384,279,439,239,464,292,451,537,776,317,870,1208,596,411,776,405,1150,526,1402,345,661,382,1194,331,999,476,706,783,416,973,521,1380,645,873,463,1170,1632,1307,773,803,1229,511,1037,139,362,305,298,139,334,577,167,110,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,59,254,509,460,378,310,348,355,285,567,593,1490,356,746,204,434,355,516,185,285,232,326,196,397,622,227,636,909,256,332,72,259,302,545,935,293,524,169,377,315,635,236,216,497,269,146,157,249,387,401,212,316,259,358,482,1316,728,678,370,803,361,343,476,364,392,857,832,418,1063,913,888,1489,1791,1270,941,1650,2182,1239,1632,2023,1068,1227,1529,1470,1259,1055,1290,921,838,895,980,827,318,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,46,0,1,4,3,8,20,43,60,31,97,185,194,224,233,299,313,182,559,483,323,295,489,225,349,602,1447,802,523,503,449,103,373,723,296,68,74,328,156,111,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,14,0,11,0,0,0,0,42,54,0,8,23,71,49,67,201,348,359,288,518,868,985,757,792,1286,1139,1222,1473,686,966,797,761,861,442,1310,1253,444,586,351,98,97,249,153,48,183,155,145,37,80,42,45,82,107,131,101,124,164,213,96,200,189,138,181,170,183,319,146,135,147,103,107,43,65,87,83,54,18,43,5,34,9,5,19,45,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,130,54,76,40,32,29,30,59,159,155,170,379,627,564,160,193,112,142,366,677,416,176,320,521,261,109,353,256,164,240,289,71,149,80,143,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,25,4,13,20,29,16,82,60,55,25,224,39,118,212,325,418,726,1058,419,184,237,537,661,382,328,346,640,642,673,445,565,454,507,559,298,295,331,700,685,483,1243,548,1251,482,705,1208,931,734,1300,519,795,305,1134,431,763,227,750,535,920,1541,1163,318,249,84,740,1072,814,358,1076,1345,1263,1085,649,431,1134,682,1427,20,578,1029,680,588,739,1523,544,520,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,15,28,91,32,65,89,125,344,137,152,221,213,88,111,102,265,171,123,185,50,46,50,120,134,191,114,123,71,79,25,162,151,52,67,136,265,72,369,129,92,26,152,230,124,291,267,216,189,187,152,183,364,113,334,121,239,76,224,68,462,359,78,9,34,25,81,113,121,189,253,580,390,159,63,23,177,127,267,2,270,261,222,122,227,381,121,156,0,0,0,83,195,7,221,333,509,415,1501,921,934,85,349,539,1331,1117,1180,1300,2416,2429,1278,1211,817,1174,1940,2003,2311,1507,1477,1441,2326,1542,1321,924,986,949,1220,1219,1140,561,563,683,1041,1465,1413,688,1619,1281,841,576,1071,749,823,464,751,538,485,239,325,394,991,1361,732,293,72,131,533,241,515,483,1353,1768,2272,1706,1655,1363,1787,1376,1909,994,1238,1589,1317,1048,2192,1728,795,628,0,0,0,0,0,0,23,0,0,0,0,0,0,0,9,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,95,26,1,0,0,0,14,0,0,0,0,1,0,2,0,1,0,1,0,3,0,0,0,0,2,0,0,0,0,5,7,6,10,32,0,2,0,0,0,1,0,2,1,1,0,0,0,0,0,0,1,0,0,2,2,0,55,191,90,252,143,37,33,43,26,48,54,72,87,84,145,94,55,56,16,13,34,19,66,35,82,66,30,0,50,158,335,36,75,162,41,218,203,247,224,405,130,427,275,255,405,607,153,37,56,139,70,79,41,74,28,71,64,85,156,36,9,74,129,164,66,717,709,331,348,797,667,271,369,393,157,126,191,342,135,84,99,68,97],[5,155,240,285,292,298,226,377,788,1026,2181,3182,1521,2493,2889,1423,1840,1024,3873,3605,5485,9499,8696,7919,9233,17859,21303,20221,13400,21610,12187,21898,24258,22960,15482,5783,22131,32955,25867,28365,23187,4084,22398,15582,24480,17140,18933,18341,38004,27868,43863,26562,25938,21261,22699,41273,25511,18253,14913,21147,26253,14368,17699,37776,12541,19948,10191,6599,8673,6488,12421,7221,8808,4961,2691,5630,13040,6551,13758,7180,17512,1788,17541,1732,6584,7752,11608,6234,6044,4236,6327,12733,20322,8546,15110,15276,15514,33813,22893,34289,49407,7084,12449,49049,30242,47801,24373,45898,27996,48376,62589,23235,108,143,26,113,143,212,557,639,670,583,428,367,358,489,365,375,501,1140,1906,2530,2484,3759,3270,5153,6037,8245,4770,5135,8285,9441,9268,8284,12897,14107,27249,24576,14461,12898,4187,7802,12266,13935,9857,17149,8563,22419,12619,26355,16110,12935,14227,18944,11107,18745,18083,13686,9653,14281,25890,16991,9547,14328,8097,6091,5582,3505,12148,4245,10682,6631,4674,7400,6399,5793,5326,5824,6030,2735,11138,2423,15995,9319,7836,8529,5025,12670,5159,8036,5149,6241,3972,2652,1254,1471,3788,4272,5571,3087,6822,13450,8384,8866,24973,4798,8619,4464,16259,9009,22586,21287,25541,47376,15339,23537,21676,100,0,349,362,441,486,538,569,676,861,807,724,677,757,605,792,807,775,766,758,639,867,882,475,620,645,0,0,553,280,0,424,722,649,630,544,713,458,512,660,402,275,342,438,312,240,303,141,0,318,350,289,453,366,286,226,222,266,197,292,319,289,310,258,260,248,223,261,172,266,204,202,177,201,225,412,424,474,492,480,489,296,427,686,438,507,581,724,678,469,827,892,996,761,745,614,56,70,68,92,120,0,0,0,0,0,0,0,0,0,0,389,454,738,795,1255,1239,1793,2688,5859,5953,4778,1527,563,653,100,1042,177,187,1134,325,691,405,2659,2008,1661,3860,1050,1832,1711,663,2246,1168,1393,1025,447,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,68,0,88,60,165,24,39,39,27,106,0,0,0,124,0,54,0,0,0,0,0,49,39,10,106,208,242,254,217,227,121,131,217,167,110,90,0,0,0,0,0,0,20,78,0,50,29,0,0,0,0,0,0,0,0,0,0,0,0,0,50,14,9,92,104,95,57,45,86,103,112,128,112,92,63,75,58,93,42,103,125,72,81,33,46,74,62,128,283,109,157,275,305,335,456,135,33,94,36,51,130,145,150,287,304,132,10,507,340,268,264,466,320,241,443,499,407,616,854,934,1069,1592,1395,952,582,516,637,849,334,411,794,881,1199,1452,887,859,745,930,194,874,1086,782,653,670,1034,1299,907,1074,1170,858,648,445,624,965,624,1337,606,1274,816,663,612,405,443,508,672,869,590,956,906,1134,680,819,789,1298,849,856,504,683,410,1012,796,505,294,257,834,1717,926,1361,1583,1137,1375,937,1286,1123,1649,1310,1732,1910,1958,2640,3068,243,417,717,0,873,735,661,1056,701,794,745,891,1102,1178,1218,683,100,61,270,135,150,279,200,465,502,310,510,3436,3228,5994,1799,5801,118,2622,2756,9010,5050,11979,7160,8880,11228,8074,5636,4181,3502,7298,3301,10000,3730,7966,2507,12242,4405,7866,11529,9763,13606,9055,9050,3162,7127,2456,1611,2837,2435,25,45,5224,1443,7026,3,2291,2603,7722,6350,4844,2824,3250,2990,2930,5446,3157,8009,301,2915,670,4752,3509,5397,3623,16116,14832,22659,22787,15127,23164,26907,13600,31872,13930,23198,45416,38120,9949,7394,38370,17119,28899,29286,234,441,349,393,397,651,631,632,531,893,689,543,113,406,707,1175,734,1188,1464,3097,1536,3004,2114,3783,1919,2784,1238,2200,1065,1803,1335,2060,1787,3133,2245,2434,1814,2611,1720,2084,1759,3160,2193,3918,2519,3737,3102,5075,2745,3647,3619,4356,3630,3842,2986,4649,3216,4752,3663,4546,2894,4884,2894,4242,2355,3956,1328,4089,2067,7661,1939,7147,2075,5419,2388,5738,1496,3426,1687,2399,2228,1688,3325,3859,5591,5709,5214,5082,6634,7228,8092,4945,7162,9786,11046,10199,7070,5698,4118,11270,6455,6833,7289,5590,7624,4,146,509,758,937,1210,1235,1391,662,1058,1293,1520,2362,3523,5063,5268,8613,10562,13614,16708,12566,15379,13329,11313,17286,16188,12797,9498,22024,21433,21527,15794,20094,25060,24651,7615,11658,16213,24672,18443,10803,8255,20116,11352,20224,13019,4874,13474,16093,24030,21024,3101,21416,21598,25296,14301,5318,7743,6733,17750,11957,7979,8407,18909,15155,6796,7410,4566,11588,6546,5236,4858,9419,6695,4718,5192,15451,12752,6433,3345,8124,24738,12262,4979,5290,7216,21823,10552,3454,1926,3305,5864,8265,6911,16643,21963,27032,28344,18707,39331,30776,25055,17680,17739,16663,30274,35134,27259,33560,41460,36525,45398,30668,12604,8,3,0,1,8,3,5,35,10,15,7,34,8,0,0,0,0,10,9,9,0,0,15,1,0,1,0,1,1,0,0,0,0,3,5,0,0,0,4,0,0,0,0,0,0,0,4,17,50,94,35,65,43,53,97,299,107,153,47,184,394,492,379,452,642,954,1302,1008,947,1086,665,1498,802,1304,1317,2336,1509,1273,1313,1579,999,1545,1559,1544,407,112,470,214,182,17,13,27,0,0,0,0,0,0,0,5,9,25,7,21,6,14,10,18,30,22,28,14,20,23,54,34,36,42,56,50,65,79,56,73,64,64,78,68,165,172,123,104,142,184,190,187,432,517,527,403,630,982,1052,850,927,1412,1284,1385,1655,846,1086,999,962,1008,574,1510,1441,585,794,479,194,218,395,300,102,232,234,160,40,100,75,124,179,178,142,149,183,317,252,193,257,532,345,444,439,506,455,341,180,230,136,224,93,131,157,200,270,1108,181,563,79,9,5,19,45,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,130,55,77,40,32,29,30,59,159,155,170,379,627,564,160,193,119,142,368,678,416,176,320,521,262,110,353,256,164,240,289,71,149,80,143,59,189,282,469,646,1005,2781,3755,3593,3846,3126,3245,3830,2255,3329,2787,2052,1968,3488,4832,3906,1957,2987,2232,4008,4275,2851,2124,2216,2945,2836,2286,3028,1990,6635,3919,4524,2068,4081,2997,4208,2137,7082,4674,8122,7026,4147,8026,2771,8378,6069,8632,10223,12854,8820,19181,11160,14284,12139,9978,8047,14985,7332,11707,10740,10221,7594,6574,6953,3103,6476,6084,10083,11478,4349,6195,5280,3047,8456,4882,15749,6250,13714,3692,12218,735,10338,13675,13941,6378,3882,1001,3327,3187,12484,7977,16942,12417,19157,13094,10902,7082,13681,9897,16305,7749,19018,8137,12123,23723,8462,39341,12099,49187,9216,14462,13,560,453,775,522,664,600,683,910,781,1167,935,1103,954,1782,1243,1718,1297,1324,1624,1631,1731,1369,1123,1433,980,1204,1482,1406,1605,2305,1062,2246,2094,1837,759,2098,889,1486,917,1020,1345,158,971,2467,1094,1807,1202,1733,1978,730,1844,362,1175,1309,1417,1053,808,2050,2634,1813,770,1078,313,370,664,564,1468,1120,832,641,688,1069,955,2249,2195,2578,1880,1160,663,2396,2179,3091,2024,549,927,780,545,1678,2721,2704,3244,2328,3664,3095,2372,3283,1298,2589,2426,4438,1260,3054,3499,3375,3717,2511,4450,2465,1865,69,116,52,361,597,308,1172,842,1857,1985,4691,1686,4241,965,4492,2589,6745,2457,8174,3605,4393,5253,8480,4212,7529,6482,10116,8499,15743,12450,9645,9443,10743,8157,9022,7795,4426,5539,4094,4735,3150,2766,3996,3849,2892,5303,4137,3818,5067,2592,2484,1687,2972,2945,3211,2990,3859,4313,1401,618,2343,2533,4535,3521,1377,688,380,435,3277,1991,6493,8557,13107,9216,11662,7245,15920,8118,7286,4268,10944,11399,6814,14851,14959,14900,13745,21338,4844,5355,9,0,0,0,0,258,98,135,9,13,0,14,0,699,32,531,352,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,107,101,75,574,44,5,44,614,18,453,97,2008,95,197,0,65,8,898,243,645,46,3,2,0,22,0,0,40,552,2612,315,1413,18,2372,2,49,0,188,15,296,1,325,1,860,0,0,0,137,73,167,146,0,130,267,910,1333,2043,2213,797,1472,564,1428,1792,721,767,761,465,768,334,944,1027,265,818,1037,367,1106,514,634,928,1050,832,745,526,0,619,575,732,736,433,659,204,384,617,658,807,817,727,1839,626,861,1137,1389,575,367,332,421,312,387,319,380,402,710,429,276,360,332,278,746,642,1622,2180,3950,2754,2047,2547,2781,3465,2933,1768,2237,2118,3265,2814,4331,4095,3354,3527,2195,2408],["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Includes Yakutat catches","Includes Yakutat catches","","","Includes Yakutat catches","","","","","","","","","","","","","","","","","","Includes Yakutat catches","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Yakutat catch included in No SE AK catch","Yakutat catch included in No SE AK catch","","","Yakutat catch included in No SE AK catch","","","","","","","","","","","","","","","","","","Yakutat catch included in No SE AK catch","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Estimated from canned production, probably sockeye","Estimated from canned production, probably sockeye","Estimated from canned production, probably sockeye","Estimated from canned production, probably sockeye","Estimated from canned production, probably sockeye","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","No fishery","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","","","Bering River catches included in Copper River catches","","","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","Bering River catches included in Copper River catches","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Includes Bering River catches; estimated from canned","Includes Bering River catches; estimated from canned","Includes Bering River catches; estimated from canned","Includes Bering River catches","Includes Bering River catches","Coho and pink catch estimated from canned production","Coho and pink catch estimated from canned production","Includes Bering River; coho and pink estimated fro canned","Pink catch estimated from canned","Includes Bering River; coho pink and chum estimated from canned","Includes Bering River; pink estimated from canned","Includes Bering River; pink estimated from canned","Includes Bering River catches","Includes Bering River; pink and chum estimated from canned","Includes Bering River; coho pink and chum estimated from canned","Includes Bering River; coho pink and chum estimated from canned","Includes Bering River; coho pink and chum estimated from canned","Includes Bering River; coho pink and chum estimated from canned","Includes Bering River catches","Includes Bering River catches","Includes Bering River catches","Includes Bering River catches","Includes Bering River; pink and chum estimated from canned","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Includes Copper River catches","Includes Copper River catches","Includes Copper River catches","No fishery","Includes Copper River catches; coho catch porbably mostly pinks","Includes Copper River catches; coho catch porbably mostly pinks","Includes Copper River catches; coho catch porbably mostly pinks","Includes Copper River catches; coho catch porbably mostly pinks","Includes Copper River catches; coho catch porbably mostly pinks","Includes Copper River catches","Includes Copper River catches","Includes Copper River catches; coho catch porbably mostly pinks","","Includes Copper River catches","Includes Copper River catches","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Eshamy District only","Eshamy District only","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Estimated from canned; excludes Resurrection Bay","Estimated from canned; excludes Resurrection Bay","Estimated from canned; excludes Resurrection Bay","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","No Resurrection Bay fishery","No Resurrection Bay fishery","Resurrection bay contribution estimated from canned production","Resurrection bay contribution estimated from canned production","Resurrection bay contribution estimated from canned production","Estimated from canned production","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","No reported catch","","","","","","","","","","","No reported catch","No reported catch","No reported catch","No reported catch","","","","No reported catch","No reported catch","","","","","","","","No reported catch","No reported catch","No reported catch","No reported catch","","","No reported catch","No reported catch","No reported catch","","No reported catch","No reported catch","","No reported catch","No reported catch","No reported catch","No reported catch","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","No reported catch","","","","","Sockeye and pink and 9922 chum from Port Clarence area","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","Chinook and coho and chum estimated from canned production","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Pink catch includes some chums","","","","","","","","","","","","","","","","","","","","","","","","","","","","Pink and chum catch estimated form canned production","Pink and chum catch estimated form canned production","Pink and chum catch estimated form canned production","Pink and chum catch estimated form canned production","Pink and chum catch estimated form canned production","Pink and chum catch estimated form canned production","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","Pink and chum catch estimated form canned production; from Castle Cp. To E. boundary","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Estimated from canned production; includes Aleautian Island catches","Estimated from canned production; includes Aleautian Island catches","Estimated from canned production; includes Aleautian Island catches","Estimated from canned production; includes Aleautian Island catches","Estimated from canned production; includes Aleautian Island catches","Estimated from canned production; includes Aleautian Island catches","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","Catches from Unalaksa to Castle Cape","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","No reported catch","No reported catch","No reported catch","No reported catch","","","","","","No reported catch","","No reported catch","","","","","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","Catches included in S. peninsula catches or none","","","","","","","","","","","","","","","No fishery","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","No reported catch","","","","","","","","","","","","","","","","","","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","Estimated from canned production","No fishery","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Region<\/th>\n      <th>Year<\/th>\n      <th>Chinook<\/th>\n      <th>Sockeye<\/th>\n      <th>Coho<\/th>\n      <th>Pink<\/th>\n      <th>Chum<\/th>\n      <th>All<\/th>\n      <th>notesRegCode<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[1,3,4,5,6,7]},{"name":"Region","targets":0},{"name":"Year","targets":1},{"name":"Chinook","targets":2},{"name":"Sockeye","targets":3},{"name":"Coho","targets":4},{"name":"Pink","targets":5},{"name":"Chum","targets":6},{"name":"All","targets":7},{"name":"notesRegCode","targets":8}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>And here’s the <code>region_defs</code> table:</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-f3d6a0c7fcfe7ed62b8f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f3d6a0c7fcfe7ed62b8f">{"x":{"filter":"none","vertical":false,"data":[["GSE","NSE","SSE","YAK","PWSmgmt","BER","COP","PWS","CKI","BRB","KSK","YUK","NRS","KTZ","KOD","CHG","ALUmgmt","SOP","ALU","NOP"],["Unallocated Southeast Alaska","Northern Southeast Alaska","Southern Southeast Alaska","Yakutat","Prince William Sound Management Area","Bering River Subarea Copper River Subarea","Copper River Subarea","Prince William Sound Subarea","Cook Inlet Management Area","Bristol Bay Management Area","Kuskokwim Management Area","Yukon Management Area","Norton Sound Management Area","Kotzebue Management Area","Kodiak Management Area","Chignik Management Area","Alaska Peninsula - Aleutian Islands Management Area","South Peninsula Subarea","Aleutian Islands Subarea","NorthPeninsual Subarea"],["mgmtArea","mgmtArea","mgmtArea","mgmtArea","mgmtArea","subarea","subarea","subarea","mgmtArea","mgmtArea","mgmtArea","mgmtArea","mgmtArea","mgmtArea","mgmtArea","mgmtArea","mgmtArea","subarea","subarea","subarea"],[1,1,1,1,2,2,2,2,2,2,3,3,3,3,4,4,4,4,4,4],["Included are Southeastern Alaska catches which could not be assigned\nto Northern or Southern Southeastern Alaska or Yakutat","Northern Southern Alaska includes Districts 9 through 16 from summer straight northwest to and including the fairweather Grounds but excludes Yakutat fisheries unless otherwise noted.","","","Includes the Bering River and Copper River and Prince William Sound Subareas","","","","Cook Inlet includes Resurrection Bay unless otherwise noted","","","","","","","","The Alaska Peninsula Management Area includes the North Peninsula and SouthPeninsula and the Aleutian Islands Subareas. Chignik Area catches are not included in these figures.","","",""]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>code<\/th>\n      <th>mgmtArea<\/th>\n      <th>areaClass<\/th>\n      <th>regionCode<\/th>\n      <th>notes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":3},{"name":"code","targets":0},{"name":"mgmtArea","targets":1},{"name":"areaClass","targets":2},{"name":"regionCode","targets":3},{"name":"notes","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>Using the live session started by your instructor, work through the following tasks:</p>
<p><strong>Part 1</strong>. Draw an Entity Relationship diagram for the tables, including labels as relevant for primary and foreign keys, along with entity relationships and corresponding cardinality.</p>
<p><strong>Part 2</strong>. Is the <code>catch</code> table in normal (aka tidy) form? If so, what single type of entity was observed? If not, how might you restructure the data to make it normalized, tidy, and well-modeled overall? Draw a new ERD for your new tables, again detailing all keys and relationships.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Part 1.</strong> We can start by creating one box for each of the two tables in the dataset. We have a <code>catch</code> table with annual catch by region for several species, and <code>region_defs</code> table with one record for each region. Next, we list all of the columns contained within each table.</p>
<p>What about keys? The <code>catch</code> table does not have a column uniquely identifying each record! However, given that the observations here are catch within region by year, the combination of <code>region</code> and <code>year</code> does the trick. To denote this composite primary key, we can label both fields as PK in this table.</p>
<p>Meanwhile, the <code>region</code> table appears to use <code>code</code> to uniquely identify each region, and this field is referenced in the <code>catch</code> table. So we’ll label <code>code</code> as the PK within the <code>region_defs</code> table, and label the corresponding (but differently named!) <code>Region</code> field as FK in the <code>catch</code> table. Note that the <code>region_defs</code> table also somewhat confusingly has a <code>regionCode</code> field, which superficially sounds like a candidate primary key. However, looking at the data, it is clearly that this does not uniquely identify each record in the <code>region_defs</code> table, nor is it referenced from the <code>catch</code> table.</p>
<p>Finally, let’s document the relationships. Each annual catch record counts fish caught within a particular region, so we definitely need a line between them to express this relationship. What is the cardinality? Clearly each catch record belongs to exactly one region, so we’ll use “one and ONLY one” on the <code>region_defs</code> side. Meanwhile, there can be many catch record per region. We could simple choose to label this as “many” cardinality, but let’s be more specific and label it as “one or many”; this asserts that the <code>region</code> table only contain regions that have at least one <code>catch</code> record.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/tidy-data-images/exercises/catch-erd-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-19"><img src="images/tidy-data-images/exercises/catch-erd-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="200"></a></p>
</figure>
</div>
<!--
Code for image above; using PNG because mermaid rendering breaks inside collapsed callouts



::::::{.cell layout-align="center"}

:::::{.cell-output-display}

::::{}
`<figure class=''>`{=html}

:::{}

<pre class="mermaid mermaid-js">erDiagram
    catch }|--|| region_defs : within
    catch {
        string Region PK, FK
        int Year PK
        int Chinook
        int Sockeye
        int Coho
        int Pink
        int Chum
        int All
        string NotesRegCode
    }
    region_defs {
        string code PK
        string mgmtArea
        string areaClass
        int regionCode
        string notes
    }
</pre>
:::
`</figure>`{=html}
::::
:::::
::::::



-->
<p><strong>Part 2.</strong> There are number of changes we might make here! There’s no single correct answer, but here are some improvements you might consider.</p>
<ul>
<li>The <code>catch</code> table is clearly not tidy, using a wide format. Let’s first pivot that to a long format, retaining the existing region and year identifier fields, then adding a single <code>species</code> field with a corresponding <code>count</code> (of fish caught) field.</li>
<li>As part of the previous step, note that we’ve eliminated the <code>All</code> field. If this is the sum of the species counts, then it a marginal statistic, and not considered tidy. We could always recompute it later by summing over all of the species-specific counts. If this is <em>not</em> (always) the sum of individual counts, then this raises questions about where the values come from, and could lead us to consider bigger changes in how the data is recorded and how the tables is designed. For this exercise, let’s just assume its a marginal sum, and discard the column.</li>
<li>While we’re at it, let’s address the confusion around multiple meanings for “region”, and corresponding inconsistency in table and field names. According to the documention, the catch counts are really by <em>area</em>, and areas are located within <em>regions</em> identified by the <code>regionCode</code> field. So let’s rename our <code>region_defs</code> table to <code>Area</code>, and make its field names more consistent by renaming <code>code</code> to <code>area_id</code>, <code>mgmtArea</code> to <code>area_name</code>, and <code>areaClass</code> to <code>area_class</code>.</li>
<li>For consistency with common (although by no means required) convention, let’s also use lower case in all field names, while capitalizing table names.</li>
<li>Finally, let’s consider the <code>NotesRegCode</code>. Strictly speaking, in the original tables, each value corresponds to the observed catch for a given year and region. If we kept this field in our new <code>Catch</code> table in long format, it would be repeated for each species observation in a given year and area, and therefore would not be tidy. To retain the original semantics, we can put these notes in a new table called <code>Catch_notes</code>, with a composite primary key based on <code>area_id</code> and <code>year</code>. Those two matching columns in the <code>Catch</code> table would therefore be FKs to the <code>Catch_nodes</code> table, and we might say that that catch observations are <em>described_by</em> catch notes. With respect to cardinality, we see in the data that not all observations have an associated note, while it’s clear that with our new long <code>Catch</code> table, any given note will refer to all species-level observations within each area and year. Hence let’s indicate that catch observations are described by “zero or one” notes, and notes describe “one or many” species catch observations.</li>
</ul>
<p>Here’s an ERD reflecting the changes describe above.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/tidy-data-images/exercises/catch-erd-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-20"><img src="images/tidy-data-images/exercises/catch-erd-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="300"></a></p>
</figure>
</div>
<!--
Code for image above; using PNG because mermaid rendering breaks inside collapsed callouts



::::::{.cell layout-align="center"}

:::::{.cell-output-display}

::::{}
`<figure class=''>`{=html}

:::{}

<pre class="mermaid mermaid-js">erDiagram
    Catch |{--|| Area : within
    Catch |{--o| Catch_notes : described_by
    Catch {
        string area_id PK, FK
        numeric year PK, FK
        string species PK
        numeric count
    }
    Catch_notes {
        string area_id PK
        numeric year PK
        string notes
    }
    Area {
        string area_id PK
        string area_name
        string area_class
        numeric region_code
        string notes
    }
</pre>
:::
`</figure>`{=html}
::::
:::::
::::::



-->
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Bonus challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you have time, take on this extra challenge with your group.</p>
<p>Navigate to this dataset: <a href="https://doi.org/10.18739/A23R0PT35">Richard Lanctot and Sarah Saalfeld. 2019. Utqiaġvik shorebird breeding ecology study, Utqiaġvik, Alaska, 2003-2018. Arctic Data Center. doi:10.18739/A23R0PT35</a></p>
<p>Read the dataset documention, inspect the tables, and then try to create an ERD that includes the following tables from the package:</p>
<ul>
<li>Utqiagvik_adult_shorebird_banding.csv</li>
<li>Utqiagvik_egg_measurements.csv</li>
<li>Utqiagvik_nest_data.csv</li>
<li>Utqiagvik_shorebird_resightings.csv</li>
</ul>
</div>
</div>
</section>
<section id="resources" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="resources"><span class="header-section-number">6.5</span> Resources</h2>
<ul>
<li><a href="http://matt.magisa.org/pubs/borer-esa-2009.pdf">Borer et al.&nbsp;2009. <strong>Some Simple Guidelines for Effective Data Management.</strong> Bulletin of the Ecological Society of America.</a></li>
<li><a href="https://doi.org/10.4033/iee.2013.6b.6.f">White et al.&nbsp;2013. <strong>Nine simple ways to make it easier to (re)use your data.</strong> Ideas in Ecology and Evolution 6.</a></li>
<li><a href="https://swcarpentry.github.io/sql-novice-survey/">Software Carpentry SQL tutorial</a></li>
<li><a href="http://vita.had.co.nz/papers/tidy-data.pdf">Tidy Data</a></li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-borer_simple_2009" class="csl-entry" role="listitem">
Borer, Elizabeth, Eric Seabloom, Matthew B. Jones, and Mark Schildhauer. 2009. <span>“Some <span>Simple</span> <span>Guidelines</span> for <span>Effective</span> <span>Data</span> <span>Management</span>.”</span> <em>Bulletin of the Ecological Society of America</em> 90: 205–14. <a href="https://doi.org/10.1890/0012-9623-90.2.205">https://doi.org/10.1890/0012-9623-90.2.205</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./session_05.html" class="pagination-link" aria-label="Introduction to git and GitHub">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Introduction to git and GitHub</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./session_07.html" class="pagination-link" aria-label="Cleaning and Wrangling Data">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Cleaning and Wrangling Data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>