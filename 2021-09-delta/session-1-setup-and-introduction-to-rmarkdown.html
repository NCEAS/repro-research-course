<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Session 1: Setup and Introduction to RMarkdown | Open Science Synthesis for the Delta Science Program: Week 1</title>
  <meta name="description" content="1 Session 1: Setup and Introduction to RMarkdown | Open Science Synthesis for the Delta Science Program: Week 1" />
  <meta name="generator" content="bookdown 0.24.1 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Session 1: Setup and Introduction to RMarkdown | Open Science Synthesis for the Delta Science Program: Week 1" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Session 1: Setup and Introduction to RMarkdown | Open Science Synthesis for the Delta Science Program: Week 1" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="session-2-reproducible-papers-with-rmarkdown.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.19/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.9.4.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Open Science Synthesis for the Delta Science Program: Week 1</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i><b>0.1</b> Schedule</a>
<ul>
<li class="chapter" data-level="0.1.1" data-path="index.html"><a href="index.html#code-of-conduct"><i class="fa fa-check"></i><b>0.1.1</b> Code of Conduct</a></li>
<li class="chapter" data-level="0.1.2" data-path="index.html"><a href="index.html#logistics"><i class="fa fa-check"></i><b>0.1.2</b> Logistics</a></li>
<li class="chapter" data-level="0.1.3" data-path="index.html"><a href="index.html#about-this-book"><i class="fa fa-check"></i><b>0.1.3</b> About this book</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html"><i class="fa fa-check"></i><b>1</b> Session 1: Setup and Introduction to RMarkdown</a>
<ul>
<li class="chapter" data-level="1.1" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#rstudio-and-gitgithub-setup"><i class="fa fa-check"></i><b>1.1</b> RStudio and Git/GitHub Setup</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#learning-objectives"><i class="fa fa-check"></i><b>1.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="1.1.2" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#logging-into-the-rstudio-server"><i class="fa fa-check"></i><b>1.1.2</b> Logging into the RStudio server</a></li>
<li class="chapter" data-level="1.1.3" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#preparing-to-work-in-rstudio"><i class="fa fa-check"></i><b>1.1.3</b> Preparing to work in RStudio</a></li>
<li class="chapter" data-level="1.1.4" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#setting-up-the-r-environment-on-your-local-computer"><i class="fa fa-check"></i><b>1.1.4</b> Setting up the R environment on your local computer</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#introduction-to-r"><i class="fa fa-check"></i><b>1.2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#learning-objectives-1"><i class="fa fa-check"></i><b>1.2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="1.2.2" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#introduction-and-motivation"><i class="fa fa-check"></i><b>1.2.2</b> Introduction and Motivation</a></li>
<li class="chapter" data-level="1.2.3" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#r-at-the-console"><i class="fa fa-check"></i><b>1.2.3</b> R at the console</a></li>
<li class="chapter" data-level="1.2.4" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#r-functions-help-pages"><i class="fa fa-check"></i><b>1.2.4</b> R functions, help pages</a></li>
<li class="chapter" data-level="1.2.5" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#using-data.frames"><i class="fa fa-check"></i><b>1.2.5</b> Using <code>data.frames</code></a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#literate-analysis-with-rmarkdown"><i class="fa fa-check"></i><b>1.3</b> Literate Analysis with RMarkdown</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#learning-objectives-2"><i class="fa fa-check"></i><b>1.3.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="1.3.2" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#introduction-and-motivation-1"><i class="fa fa-check"></i><b>1.3.2</b> Introduction and motivation</a></li>
<li class="chapter" data-level="1.3.3" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#basic-rmarkdown-syntax"><i class="fa fa-check"></i><b>1.3.3</b> Basic RMarkdown syntax</a></li>
<li class="chapter" data-level="1.3.4" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#code-chunks"><i class="fa fa-check"></i><b>1.3.4</b> Code chunks</a></li>
<li class="chapter" data-level="1.3.5" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#literate-analysis-practice"><i class="fa fa-check"></i><b>1.3.5</b> Literate analysis practice</a></li>
<li class="chapter" data-level="1.3.6" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#rmarkdown-and-environments"><i class="fa fa-check"></i><b>1.3.6</b> RMarkdown and environments</a></li>
<li class="chapter" data-level="1.3.7" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#go-further"><i class="fa fa-check"></i><b>1.3.7</b> Go Further</a></li>
<li class="chapter" data-level="1.3.8" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#resources-1"><i class="fa fa-check"></i><b>1.3.8</b> Resources</a></li>
<li class="chapter" data-level="1.3.9" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#troubleshooting"><i class="fa fa-check"></i><b>1.3.9</b> Troubleshooting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="session-2-reproducible-papers-with-rmarkdown.html"><a href="session-2-reproducible-papers-with-rmarkdown.html"><i class="fa fa-check"></i><b>2</b> Session 2: Reproducible Papers with RMarkdown</a>
<ul>
<li class="chapter" data-level="2.1" data-path="session-2-reproducible-papers-with-rmarkdown.html"><a href="session-2-reproducible-papers-with-rmarkdown.html#reproducibility-and-provenance"><i class="fa fa-check"></i><b>2.1</b> Reproducibility and Provenance</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="session-2-reproducible-papers-with-rmarkdown.html"><a href="session-2-reproducible-papers-with-rmarkdown.html#learning-objectives-3"><i class="fa fa-check"></i><b>2.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="" data-path="session-2-reproducible-papers-with-rmarkdown.html"><a href="session-2-reproducible-papers-with-rmarkdown.html#data-citation"><i class="fa fa-check"></i>Data Citation</a></li>
<li class="chapter" data-level="" data-path="session-2-reproducible-papers-with-rmarkdown.html"><a href="session-2-reproducible-papers-with-rmarkdown.html#the-5th-generation"><i class="fa fa-check"></i>The 5th Generation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html"><i class="fa fa-check"></i><b>3</b> Session 3: Version Control with git and GitHub</a>
<ul>
<li class="chapter" data-level="3.1" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#learning-objectives-4"><i class="fa fa-check"></i><b>3.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#introduction-to-git"><i class="fa fa-check"></i><b>3.2</b> Introduction to git</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#a-motivating-example"><i class="fa fa-check"></i><b>3.2.1</b> A Motivating Example</a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#version-control-and-collaboration-using-git-and-github"><i class="fa fa-check"></i>Version control and Collaboration using Git and GitHub</a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#lets-look-at-a-github-repository"><i class="fa fa-check"></i>Let’s look at a GitHub repository</a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#the-git-lifecycle"><i class="fa fa-check"></i>The Git lifecycle</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#create-a-remote-repository-on-github"><i class="fa fa-check"></i><b>3.3</b> Create a remote repository on GitHub</a>
<ul>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#setup-4"><i class="fa fa-check"></i>Setup</a></li>
<li><a href="session-3-version-control-with-git-and-github.html#section-1"></a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#challenge-5"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="session-3-version-control-with-git-and-github.html#section-2"></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#working-locally-with-git-via-rstudio"><i class="fa fa-check"></i><b>3.4</b> Working locally with Git via RStudio</a>
<ul>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#setup-5"><i class="fa fa-check"></i>Setup</a></li>
<li><a href="session-3-version-control-with-git-and-github.html#section-3"></a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#challenge-6"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="session-3-version-control-with-git-and-github.html#section-4"></a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#aside-3"><i class="fa fa-check"></i>Aside</a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#collaboration-and-conflict-free-workflows"><i class="fa fa-check"></i>Collaboration and conflict free workflows</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#setting-up-git-on-an-existing-project"><i class="fa fa-check"></i><b>3.5</b> Setting up git on an existing project</a>
<ul>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#challenge-7"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="session-3-version-control-with-git-and-github.html#section-5"></a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#challenge-8"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="session-3-version-control-with-git-and-github.html#section-6"></a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#go-further-1"><i class="fa fa-check"></i><b>3.6</b> Go Further</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html"><i class="fa fa-check"></i><b>4</b> Session 4: Data Modeling Essentials</a>
<ul>
<li class="chapter" data-level="4.1" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#data-modeling-tidy-data"><i class="fa fa-check"></i><b>4.1</b> Data Modeling &amp; Tidy Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#learning-objectives-5"><i class="fa fa-check"></i><b>4.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="4.1.2" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#introduction"><i class="fa fa-check"></i><b>4.1.2</b> Introduction</a></li>
<li class="chapter" data-level="4.1.3" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#recognizing-untidy-data"><i class="fa fa-check"></i><b>4.1.3</b> Recognizing untidy data</a></li>
<li class="chapter" data-level="4.1.4" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#good-enough-data-modeling"><i class="fa fa-check"></i><b>4.1.4</b> Good enough data modeling</a></li>
<li class="chapter" data-level="4.1.5" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#using-normalized-data"><i class="fa fa-check"></i><b>4.1.5</b> Using normalized data</a></li>
<li class="chapter" data-level="4.1.6" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#data-modeling-exercise"><i class="fa fa-check"></i><b>4.1.6</b> Data modeling exercise</a></li>
<li class="chapter" data-level="4.1.7" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#resources-2"><i class="fa fa-check"></i><b>4.1.7</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="session-5-cleaning-and-manipulating-data.html"><a href="session-5-cleaning-and-manipulating-data.html"><i class="fa fa-check"></i><b>5</b> Session 5: Cleaning and Manipulating Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="session-5-cleaning-and-manipulating-data.html"><a href="session-5-cleaning-and-manipulating-data.html#data-cleaning-and-manipulation"><i class="fa fa-check"></i><b>5.1</b> Data Cleaning and Manipulation</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="session-5-cleaning-and-manipulating-data.html"><a href="session-5-cleaning-and-manipulating-data.html#learning-objectives-6"><i class="fa fa-check"></i><b>5.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="5.1.2" data-path="session-5-cleaning-and-manipulating-data.html"><a href="session-5-cleaning-and-manipulating-data.html#introduction-1"><i class="fa fa-check"></i><b>5.1.2</b> Introduction</a></li>
<li class="chapter" data-level="5.1.3" data-path="session-5-cleaning-and-manipulating-data.html"><a href="session-5-cleaning-and-manipulating-data.html#data-cleaning-basics"><i class="fa fa-check"></i><b>5.1.3</b> Data Cleaning Basics</a></li>
<li class="chapter" data-level="5.1.4" data-path="session-5-cleaning-and-manipulating-data.html"><a href="session-5-cleaning-and-manipulating-data.html#joins-in-dplyr"><i class="fa fa-check"></i><b>5.1.4</b> Joins in dplyr</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html"><i class="fa fa-check"></i><b>6</b> Session 6: Collaboration Practices</a>
<ul>
<li class="chapter" data-level="6.1" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#thinking-preferences"><i class="fa fa-check"></i><b>6.1</b> Thinking preferences</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#learning-objectives-7"><i class="fa fa-check"></i><b>6.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="6.1.2" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#thinking-preferences-activity"><i class="fa fa-check"></i><b>6.1.2</b> Thinking Preferences Activity</a></li>
<li class="chapter" data-level="6.1.3" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#about-the-whole-brain-thinking-system"><i class="fa fa-check"></i><b>6.1.3</b> About the Whole Brain Thinking System</a></li>
<li class="chapter" data-level="6.1.4" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#bonus-activity-your-complex-self"><i class="fa fa-check"></i><b>6.1.4</b> Bonus Activity: Your Complex Self</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#collaboration-authorship-and-data-policies"><i class="fa fa-check"></i><b>6.2</b> Collaboration, authorship and data policies</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#developing-a-code-of-conduct"><i class="fa fa-check"></i><b>6.2.1</b> Developing a Code of Conduct</a></li>
<li class="chapter" data-level="6.2.2" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#authorship-and-credit"><i class="fa fa-check"></i><b>6.2.2</b> Authorship and Credit</a></li>
<li class="chapter" data-level="6.2.3" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#data-policies"><i class="fa fa-check"></i><b>6.2.3</b> Data Policies</a></li>
<li class="chapter" data-level="6.2.4" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#extra-reading"><i class="fa fa-check"></i><b>6.2.4</b> Extra Reading</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html"><i class="fa fa-check"></i><b>7</b> Session 7: Functions and Packages</a>
<ul>
<li class="chapter" data-level="7.1" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#creating-r-functions"><i class="fa fa-check"></i><b>7.1</b> Creating R Functions</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#why-functions"><i class="fa fa-check"></i><b>7.1.1</b> Why functions?</a></li>
<li class="chapter" data-level="7.1.2" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#documenting-r-functions"><i class="fa fa-check"></i><b>7.1.2</b> Documenting R functions</a></li>
<li class="chapter" data-level="7.1.3" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#summary-3"><i class="fa fa-check"></i><b>7.1.3</b> Summary</a></li>
<li class="chapter" data-level="7.1.4" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#examples-minimizing-work-with-functions"><i class="fa fa-check"></i><b>7.1.4</b> Examples: Minimizing work with functions</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#creating-r-packages"><i class="fa fa-check"></i><b>7.2</b> Creating R Packages</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#learning-objectives-8"><i class="fa fa-check"></i><b>7.2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="7.2.2" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#why-packages"><i class="fa fa-check"></i><b>7.2.2</b> Why packages?</a></li>
<li class="chapter" data-level="7.2.3" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#install-and-load-packages"><i class="fa fa-check"></i><b>7.2.3</b> Install and load packages</a></li>
<li class="chapter" data-level="7.2.4" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#create-a-basic-package"><i class="fa fa-check"></i><b>7.2.4</b> Create a basic package</a></li>
<li class="chapter" data-level="7.2.5" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#add-your-code"><i class="fa fa-check"></i><b>7.2.5</b> Add your code</a></li>
<li class="chapter" data-level="7.2.6" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#add-documentation"><i class="fa fa-check"></i><b>7.2.6</b> Add documentation</a></li>
<li class="chapter" data-level="7.2.7" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#test-your-package"><i class="fa fa-check"></i><b>7.2.7</b> Test your package</a></li>
<li class="chapter" data-level="7.2.8" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#checking-and-installing-your-package"><i class="fa fa-check"></i><b>7.2.8</b> Checking and installing your package</a></li>
<li class="chapter" data-level="7.2.9" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#sharing-and-releasing-your-package"><i class="fa fa-check"></i><b>7.2.9</b> Sharing and releasing your package</a></li>
<li class="chapter" data-level="7.2.10" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#more-reading"><i class="fa fa-check"></i><b>7.2.10</b> More reading</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="session-8-hands-on-logic-models-and-synthesis-development.html"><a href="session-8-hands-on-logic-models-and-synthesis-development.html"><i class="fa fa-check"></i><b>8</b> Session 8: Hands On: Logic Models and Synthesis Development</a></li>
<li class="chapter" data-level="9" data-path="session-9-hands-on-exploration-of-data-resources-and-synthesis-development.html"><a href="session-9-hands-on-exploration-of-data-resources-and-synthesis-development.html"><i class="fa fa-check"></i><b>9</b> Session 9: Hands On: Exploration of Data Resources and Synthesis Development</a>
<ul>
<li class="chapter" data-level="9.1" data-path="session-9-hands-on-exploration-of-data-resources-and-synthesis-development.html"><a href="session-9-hands-on-exploration-of-data-resources-and-synthesis-development.html#datasets-of-interest"><i class="fa fa-check"></i><b>9.1</b> Datasets of Interest</a></li>
<li class="chapter" data-level="9.2" data-path="session-9-hands-on-exploration-of-data-resources-and-synthesis-development.html"><a href="session-9-hands-on-exploration-of-data-resources-and-synthesis-development.html#finding-more-data"><i class="fa fa-check"></i><b>9.2</b> Finding more data</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="session-10-introduction-to-systematic-review-and-meta-analysis.html"><a href="session-10-introduction-to-systematic-review-and-meta-analysis.html"><i class="fa fa-check"></i><b>10</b> Session 10: Introduction to Systematic Review and Meta-analysis</a></li>
<li class="chapter" data-level="11" data-path="session-11-systematic-review-and-meta-analysis.html"><a href="session-11-systematic-review-and-meta-analysis.html"><i class="fa fa-check"></i><b>11</b> Session 11: Systematic Review and Meta-analysis</a></li>
<li class="chapter" data-level="12" data-path="session-12-synthesis-group-presentations-and-feedback.html"><a href="session-12-synthesis-group-presentations-and-feedback.html"><i class="fa fa-check"></i><b>12</b> Session 12: Synthesis Group Presentations and Feedback</a></li>
<li class="chapter" data-level="13" data-path="session-13-systematic-review-and-meta-analysis.html"><a href="session-13-systematic-review-and-meta-analysis.html"><i class="fa fa-check"></i><b>13</b> Session 13: Systematic Review and Meta-analysis</a></li>
<li class="chapter" data-level="14" data-path="session-14-systematic-review-and-meta-analysis.html"><a href="session-14-systematic-review-and-meta-analysis.html"><i class="fa fa-check"></i><b>14</b> Session 14: Systematic Review and Meta-analysis</a></li>
<li class="chapter" data-level="15" data-path="session-15-hands-on-collaborative-data-review-and-prep-collaborative-synthesis-planning.html"><a href="session-15-hands-on-collaborative-data-review-and-prep-collaborative-synthesis-planning.html"><i class="fa fa-check"></i><b>15</b> Session 15: Hands On: Collaborative Data Review and Prep, Collaborative Synthesis Planning</a></li>
<li class="chapter" data-level="16" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html"><i class="fa fa-check"></i><b>16</b> Session 16: Additional Resources</a>
<ul>
<li class="chapter" data-level="16.1" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#creating-a-data-portal"><i class="fa fa-check"></i><b>16.1</b> Creating a data portal</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#what-is-a-portal"><i class="fa fa-check"></i><b>16.1.1</b> What is a Portal?</a></li>
<li class="chapter" data-level="16.1.2" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#portal-uses"><i class="fa fa-check"></i><b>16.1.2</b> Portal Uses</a></li>
<li class="chapter" data-level="16.1.3" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#portal-main-components"><i class="fa fa-check"></i><b>16.1.3</b> Portal Main Components</a></li>
<li class="chapter" data-level="16.1.4" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#creating-portals"><i class="fa fa-check"></i><b>16.1.4</b> Creating Portals</a></li>
<li class="chapter" data-level="16.1.5" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#adding-data-to-portals"><i class="fa fa-check"></i><b>16.1.5</b> Adding Data to Portals</a></li>
<li class="chapter" data-level="16.1.6" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#creating-unique-freeform-pages"><i class="fa fa-check"></i><b>16.1.6</b> Creating Unique Freeform Pages</a></li>
<li class="chapter" data-level="16.1.7" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#saving-and-editing-portals"><i class="fa fa-check"></i><b>16.1.7</b> Saving and Editing Portals</a></li>
<li class="chapter" data-level="16.1.8" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#how-to-publish-portals"><i class="fa fa-check"></i><b>16.1.8</b> How to Publish Portals</a></li>
<li class="chapter" data-level="16.1.9" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#sharing-portals"><i class="fa fa-check"></i><b>16.1.9</b> Sharing Portals</a></li>
<li class="chapter" data-level="" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#challenge-19"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="session-16-additional-resources.html#section-15"></a></li>
<li class="chapter" data-level="16.1.10" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#tutorial-videos"><i class="fa fa-check"></i><b>16.1.10</b> Tutorial Videos</a></li>
<li class="chapter" data-level="16.1.11" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#acknowledgements"><i class="fa fa-check"></i><b>16.1.11</b> Acknowledgements</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Open Science Synthesis for the Delta Science Program: Week 1</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="session-1-setup-and-introduction-to-rmarkdown" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Session 1: Setup and Introduction to RMarkdown</h1>
<p>These chapters will help make sure your computer is set up appropriately for the workshop, and help anyone who is new to R or wants a base R refresher.</p>
<p>Please email <a href="mailto:jclark@nceas.ucsb.edu" class="email">jclark@nceas.ucsb.edu</a> with questions or issues.</p>
<div id="rstudio-and-gitgithub-setup" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> RStudio and Git/GitHub Setup</h2>
<div id="learning-objectives" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Learning Objectives</h3>
<p>In this lesson, you will learn:</p>
<ul>
<li>How to check to make sure your RStudio environment is set up properly for analysis</li>
<li>How to set up git</li>
</ul>
</div>
<div id="logging-into-the-rstudio-server" class="section level3" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> Logging into the RStudio server</h3>
<p>To help prevent us from spending most of this lesson remotely troubleshooting the myriad of issues that can arise when setting up the R, RStudio, and git environments, we have chosen to have everyone work on a remote server with all of the software you need installed. We will be using a special kind of RStudio just for servers called, aptly, RStudio Server. If you have never worked on a remove server before, you can think of it like working on a different computer via the internet. Note that the server has no knowledge of the files on your local filesystem, but it is easy to transfer files from the server to your local computer, and vice-versa, using the RStudio server interface.</p>
<p>Here are the instructions for logging in and getting set up:</p>
<div id="setup" class="section level4 unnumbered setup">
<h4>Setup</h4>
<p>You should have received an email prompting you to change your password for your server account. If you did not, please let one of the helpers know on Slack.</p>
<p>If you were able to successfully change your password, you can log in at: <a href="https://included-crab.nceas.ucsb.edu/">https://included-crab.nceas.ucsb.edu/</a></p>
</div>
<div id="section" class="section level4 unnumbered">
<h4 class="unnumbered"></h4>
<p>In this workshop, we are going to be using R projects to organize our work. An R project is tied to a directory on your local computer, and makes organizing your work and collaborating with others easier.</p>
<p>We are going to be doing nearly all of the work in this course in one project. Our version of RStudio server allows you to share projects with others. Sharing your project with the instructors of the course will allow for them to jump into your session and type along with you, should you encounter an error you cannot fix.</p>
</div>
<div id="setup-1" class="section level4 unnumbered setup">
<h4>Setup</h4>
<p>In your RStudio server session, follow these steps to set up your shared project:</p>
<ul>
<li>In the “File” menu, select “New Project”</li>
<li>Click “New Directory”</li>
<li>Click “New Project”</li>
<li>Under “Directory name” type: <code>training_{USERNAME}</code>, eg: <code>training_jclark</code></li>
<li>Leave “Create Project as subdirectory of:” set to <code>~</code></li>
<li>Click “Create Project”</li>
</ul>
<p>Your Rstudio should now open your project. To share your project with the instructor team, locate the “project switcher” dropdown menu in the upper right of your RStudio window. This dropdown has the name if your project (eg: <code>training_clark</code>), and a dropdown arrow. Click the dropdown menu, then “Share Project.” When the dialog box pops up, add the following usernames to your project:</p>
<ul>
<li>jclark</li>
<li>aebudden</li>
<li>jones</li>
<li>brun</li>
</ul>
<p>Once those names show up in the list, click “OK”.</p>
</div>
<div id="setting-up-git" class="section level4 unnumbered">
<h4>Setting up git</h4>
<p>Before using git, you need to tell it who you are, also known as setting the global options. The only way to do this is through the command line. Newer versions of RStudio have a nice feature where you can open a terminal window in your RStudio session. Do this by selecting Tools -&gt; Terminal -&gt; New Terminal.</p>
<p>A terminal tab should now be open where your console usually is.</p>
<p>To set the global options, type the following into the command prompt, with your actual name, and press enter:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.name <span class="st">&quot;Matt Jones&quot;</span></span></code></pre></div>
<p>Note that if it ran successfully, it will look like nothing happened. We will check at the end to makre sure it worked.</p>
<p>Next, enter the following line, with the email address you used when you created your account on github.com:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.email <span class="st">&quot;gitcode@magisa.org&quot;</span></span></code></pre></div>
<p>Note that these lines need to be run one at a time.</p>
<p>Finally, check to make sure everything looks correct by entering these commands, which will return the options that you have set.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.name</span>
<span id="cb3-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.email</span></code></pre></div>
</div>
<div id="github-authentication" class="section level4" number="1.1.2.1">
<h4><span class="header-section-number">1.1.2.1</span> GitHub Authentication</h4>
<p>GitHub recently deprecated password authentication for accessing repositories, so we need to set up a secure way to authenticate. The book <a href="https://happygitwithr.com/credential-caching.html">Happy git with R</a> has a wealth of information related to working with git in R, and these instructions are based off of section 10.1.</p>
<p>We will be using a PAT (Personal Access Token) in this course, because it is easy to set up. For better security and long term use, we recommend taking the extra steps to set up SSH keys.</p>
<p>Steps:</p>
<ol style="list-style-type: decimal">
<li>Run <code>usethis::create_github_token()</code> in the console</li>
<li>In the browser window that pops up, scroll to the bottom and click “generate token.” You may need to log into GitHub first.</li>
<li>Copy the token from the green box on the next page</li>
<li>Back in RStudio, run <code>credentials::set_github_pat()</code></li>
<li>Paste your token into the dialog box that pops up.</li>
</ol>
</div>
</div>
<div id="preparing-to-work-in-rstudio" class="section level3" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Preparing to work in RStudio</h3>
<p><img src="images/RStudio_IDE.png" /></p>
<p>The default RStudio setup has a few panes that you will use. Here they are with their default locations:</p>
<ul>
<li>Console (entire left)</li>
<li>Environment/History (tabbed in upper right)</li>
<li>Files/Plots/Packages/Help (tabbed in lower right)</li>
</ul>
<p>You can change the default location of the panes, among many other things: <a href="https://support.rstudio.com/hc/en-us/articles/200549016-Customizing-RStudio">Customizing RStudio</a>.</p>
<p>One key question to ask whenever we open up RStudio is “where am I?” Because we like to work in RStudio projects, often this question is synonymous with “what project am I in?” In our setup we have already worked with R projects a little, but haven’t explained much about what they are or why we use them.</p>
<p>An R project is really a special kind of working directory, which has its own workspace, history, and settings. Even though it isn’t much more than a special folder, it is a powerful way to organize your work.</p>
<p>There are two places that can indicate what project we are in. The first is the project switcher menu in the upper right hand corner of your RStudio window. The second is the working directory path, in the top bar of your console. Note that by default, your working directory is set to the top level of your R project directory unless you change it using the <code>setwd()</code> function.</p>
<p><img src="images/r-project-wd.png" /></p>
<div id="about-paths-and-working-directories" class="section level4 unnumbered">
<h4>About paths and working directories</h4>
<p>There are two types of paths in computing: <strong>absolute paths</strong> and <strong>relative paths</strong>.</p>
<p>An absolute path always starts with the root of your file system and locates files from there. The absolute path to my R project directory is: <code>/home/jclark/training_jclark</code></p>
<p>Relative paths start from some location in your file system that is below the root. Relative paths are combined with the path of that location to locate files on your system. R (and some other languages like MATLAB) refer to the location where the relative path starts as our <em>working directory</em>.</p>
<p>RStudio projects automatically set the working directory to the directory of the project. This means that you can reference files from within the project without worrying about where the project directory itself is. If I want to read in a file from the <code>data</code> directory within my project, I can simply type <code>read.csv("data/samples.csv")</code> as opposed to <code>read.csv("/home/jclark/training_jclark/data/samples.csv")</code></p>
<p>This is not only convenient for you, but also when working collaboratively. We will talk more about this later, but if Bryce makes a copy of my R project that I have published on GitHub, and I am using relative paths, he can run my code exactly as I have written it, without going back and changing <code>"/home/jclark/training_jclark/data/samples.csv"</code> to <code>"/home/mecum/training_jclark/data/samples.csv"</code></p>
<p>Note that once you start working in projects you should basically never need to run the <code>setwd()</code> command. If you are in the habit of doing this, stop and take a look at where and why you do it. Could leveraging the working directory concept of R projects eliminate this need? Almost definitely!</p>
<p>Similarly, think about how you work with absolute paths. Could you leverage the working directory of your R project to replace these with relative paths and make your code more portable? Probably!</p>
</div>
<div id="organizing-your-project" class="section level4 unnumbered">
<h4>Organizing your project</h4>
<p>When starting a new research project, one of the first things I do is set up an R project for it (just like we have here!) The next step is to then populate that project with relevant directories. There are many tools out there that can do this automatically. Some examples are <a href="https://github.com/benmarwick/rrtools"><code>rrtools</code></a> or <code>usethis::create_package()</code>. The goal is to organize your project so that it is a compendium of your research. This means that the project has all of the digital parts needed to replicate your analysis, like code, figures, the manuscript, and data access.</p>
<p>There are lots of good examples out there of research compendia. Here is one from a friend of NCEAS, Carl Boettiger, which he put together for a paper he wrote.</p>
<p><img src="images/paper-compendium.png" /></p>
<p>The complexity of this project reflects years of work. Perhaps more representative of the situation we are in at the start of our course is a project that looks like this one, which we have just started at NCEAS.</p>
<p><img src="images/project-start.png" /></p>
<p>Currently, the only file in your project is your <code>.Rproj</code> file. This file is what contains the settings specific to your R project. We haven’t changed anything here yet, but will when we learn git.</p>
</div>
<div id="summary" class="section level4 unnumbered">
<h4>Summary</h4>
<ul>
<li>organize your research into projects using R projects</li>
<li>use R project working directories instead of <code>setwd</code></li>
<li>use relative paths from those working directories, not absolute paths</li>
<li>structure your R project as a compendium</li>
</ul>
</div>
</div>
<div id="setting-up-the-r-environment-on-your-local-computer" class="section level3" number="1.1.4">
<h3><span class="header-section-number">1.1.4</span> Setting up the R environment on your local computer</h3>
<div id="r-version" class="section level4 unnumbered">
<h4>R Version</h4>
<p>We will use R version 4.0.5, which you can download and install from <a href="https://cran.rstudio.com">CRAN</a>. To check your version, run this in your RStudio console:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb4-1" aria-hidden="true" tabindex="-1"></a>R.version<span class="sc">$</span>version.string</span></code></pre></div>
<p>If you have R version 4.0.0 that will likely work fine as well.</p>
</div>
<div id="rstudio-version" class="section level4 unnumbered">
<h4>RStudio Version</h4>
<p>We will be using RStudio version 1.4 or later, which you can download and install <a href="https://www.rstudio.com/products/rstudio/download/">here</a> To check your RStudio version, run the following in your RStudio console:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">RStudio.Version</span>()<span class="sc">$</span>version</span></code></pre></div>
<p>If the output of this does not say <code>1.4</code> or higher, you should update your RStudio. Do this by selecting Help -&gt; Check for Updates and follow the prompts.</p>
</div>
<div id="package-installation" class="section level4 unnumbered">
<h4>Package installation</h4>
<p>Run the following lines to check that all of the packages we need for the training are installed on your computer.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb6-1" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;tidyr&quot;</span>, <span class="st">&quot;readr&quot;</span>, <span class="st">&quot;devtools&quot;</span>, <span class="st">&quot;usethis&quot;</span>, <span class="st">&quot;roxygen2&quot;</span>, <span class="st">&quot;leaflet&quot;</span>, <span class="st">&quot;ggplot2&quot;</span>, <span class="st">&quot;DT&quot;</span>, <span class="st">&quot;scales&quot;</span>, <span class="st">&quot;shiny&quot;</span>, <span class="st">&quot;sf&quot;</span>, <span class="st">&quot;ggmap&quot;</span>, <span class="st">&quot;broom&quot;</span>, <span class="st">&quot;captioner&quot;</span>, <span class="st">&quot;MASS&quot;</span>)</span>
<span id="cb6-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (package <span class="cf">in</span> packages) { <span class="cf">if</span> (<span class="sc">!</span>(package <span class="sc">%in%</span> <span class="fu">installed.packages</span>())) { <span class="fu">install.packages</span>(package) } }</span>
<span id="cb6-4"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(packages) <span class="co">#remove variable from workspace</span></span>
<span id="cb6-5"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Now upgrade any out-of-date packages</span></span>
<span id="cb6-7"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">update.packages</span>(<span class="at">ask=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p>If you haven’t installed all of the packages, this will automatically start installing them. If they are installed, it won’t do anything.</p>
<p>Next, create a new R Markdown (File -&gt; New File -&gt; R Markdown). If you have never made an R Markdown document before, a dialog box will pop up asking if you wish to install the required packages. Click yes.</p>
<p>At this point, RStudio and R should be all set up.</p>
</div>
<div id="setting-up-git-locally" class="section level4 unnumbered">
<h4>Setting up git locally</h4>
<p>If you haven’t downloaded git already, you can do so <a href="https://git-scm.com/">here</a>.</p>
<p>If you haven’t already, go to <a href="http://github.com">github.com</a> and create an account.</p>
<p>Then you can follow the instructions that we used above to set your email address and user name.</p>
<div id="note-for-windows-users" class="section level5 unnumbered">
<h5>Note for Windows Users</h5>
<p>If you get “command not found” (or similar) when you try these steps through the RStudio terminal tab, you may need to set the type of terminal that gets launched by RStudio. Under some git install scenarios, the git executable may not be available to the default terminal type. Follow the instructions on the RStudio site for <a href="https://support.rstudio.com/hc/en-us/articles/115010737148-Using-the-RStudio-Terminal#appendixe">Windows specific terminal options</a>. In particular, you should choose “New Terminals open with Git Bash” in the Terminal options (<code>Tools-&gt;Global Options-&gt;Terminal</code>).</p>
<p>In addition, some versions of windows have difficulty with the command line if you are using an account name with spaces in it (such as “Matt Jones”, rather than something like “mbjones”). You may need to use an account name without spaces.</p>
</div>
</div>
<div id="updating-a-previous-r-installation" class="section level4 unnumbered">
<h4>Updating a previous R installation</h4>
<p><strong>This is useful for users who already have R with some packages installed and need to upgrade R, but don’t want to lose packages.</strong> If you have never installed R or any R packages before, you can skip this section.</p>
<p>If you already have R installed, but need to update, and don’t want to lose your packages, these two R functions can help you. The first will save all of your packages to a file. The second loads the packages from the file and installs packages that are missing.</p>
<p>Save this script to a file (eg <code>package_update.R</code>).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Save R packages to a file. Useful when updating R version</span></span>
<span id="cb7-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb7-3"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param path path to rda file to save packages to. eg: installed_old.rda</span></span>
<span id="cb7-4"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-4" aria-hidden="true" tabindex="-1"></a>save_packages <span class="ot">&lt;-</span> <span class="cf">function</span>(path){</span>
<span id="cb7-5"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-5" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> <span class="fu">installed.packages</span>()</span>
<span id="cb7-6"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-6" aria-hidden="true" tabindex="-1"></a>    installedpkgs <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(tmp[<span class="fu">is.na</span>(tmp[,<span class="st">&quot;Priority&quot;</span>]), <span class="dv">1</span>])</span>
<span id="cb7-7"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">save</span>(installedpkgs, <span class="at">file =</span> path)</span>
<span id="cb7-8"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-9"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Update packages from a file. Useful when updating R version</span></span>
<span id="cb7-11"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb7-12"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param path path to rda file where packages were saved</span></span>
<span id="cb7-13"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-13" aria-hidden="true" tabindex="-1"></a>update_packages <span class="ot">&lt;-</span> <span class="cf">function</span>(path){</span>
<span id="cb7-14"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-14" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> <span class="fu">new.env</span>()</span>
<span id="cb7-15"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-15" aria-hidden="true" tabindex="-1"></a>    installedpkgs <span class="ot">&lt;-</span> <span class="fu">load</span>(<span class="at">file =</span> path, <span class="at">envir =</span> tmp)</span>
<span id="cb7-16"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-16" aria-hidden="true" tabindex="-1"></a>    installedpkgs <span class="ot">&lt;-</span> tmp[[<span class="fu">ls</span>(tmp)[<span class="dv">1</span>]]]</span>
<span id="cb7-17"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-17" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> <span class="fu">installed.packages</span>()</span>
<span id="cb7-18"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-19" aria-hidden="true" tabindex="-1"></a>    installedpkgs.new <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(tmp[<span class="fu">is.na</span>(tmp[,<span class="st">&quot;Priority&quot;</span>]), <span class="dv">1</span>])</span>
<span id="cb7-20"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-20" aria-hidden="true" tabindex="-1"></a>    missing <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(installedpkgs, installedpkgs.new)</span>
<span id="cb7-21"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">install.packages</span>(missing)</span>
<span id="cb7-22"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">update.packages</span>(<span class="at">ask=</span><span class="cn">FALSE</span>)</span>
<span id="cb7-23"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb7-23" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Source the file that you saved above (eg: <code>source(package_update.R)</code>). Then, run the <code>save_packages</code> function.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save_packages</span>(<span class="st">&quot;installed.rda&quot;</span>)</span></code></pre></div>
<p>Then quit R, go to <a href="https://cran.rstudio.com">CRAN</a>, and install the latest version of R.</p>
<p>Source the R script that you saved above again (eg: <code>source(package_update.R)</code>), and then run:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">update_packages</span>(<span class="st">&quot;installed.rda&quot;</span>)</span></code></pre></div>
<p>This should install all of your R packages that you had before you upgraded.</p>
</div>
</div>
</div>
<div id="introduction-to-r" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Introduction to R</h2>
<div id="learning-objectives-1" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Learning Objectives</h3>
<p>In this lesson we will:</p>
<ul>
<li>get oriented to the RStudio interface</li>
<li>work with R in the console</li>
<li>be introduced to built-in R functions</li>
<li>learn to use the help pages</li>
</ul>
</div>
<div id="introduction-and-motivation" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Introduction and Motivation</h3>
<p>There is a vibrant community out there that is collectively developing increasingly easy to use and powerful open source programming tools. The changing landscape of programming is making learning how to code easier than it ever has been. Incorporating programming into analysis workflows not only makes science more efficient, but also more computationally reproducible. In this course, we will use the programming language R, and the accompanying integrated development environment (IDE) RStudio. R is a great language to learn for data-oriented programming because it is widely adopted, user-friendly, and (most importantly) open source!</p>
<p>So what is the difference between R and RStudio? Here is an analogy to start us off. <strong>If you were a chef, R is a knife.</strong> You have food to prepare, and the knife is one of the tools that you’ll use to accomplish your task.</p>
<p>And <strong>if R were a knife, RStudio is the kitchen</strong>. RStudio provides a place to do your work! Other tools, communication, community, it makes your life as a chef easier. RStudio makes your life as a researcher easier by bringing together other tools you need to do your work efficiently - like a file browser, data viewer, help pages, terminal, community, support, the list goes on. So it’s not just the infrastructure (the user interface or IDE), although it is a great way to learn and interact with your variables, files, and interact directly with git. It’s also data science philosophy, R packages, community, and more. So although you can prepare food without a kitchen and we could learn R without RStudio, that’s not what we’re going to do. We are going to take advantage of the great RStudio support, and learn R and RStudio together.</p>
<p>Something else to start us off is to mention that you are learning a new language here. It’s an ongoing process, it takes time, you’ll make mistakes, it can be frustrating, but it will be overwhelmingly awesome in the long run. We all speak at least one language; it’s a similar process, really. And no matter how fluent you are, you’ll always be learning, you’ll be trying things in new contexts, learning words that mean the same as others, etc, just like everybody else. And just like any form of communication, there will be miscommunications that can be frustrating, but hands down we are all better off because of it.</p>
<p>While language is a familiar concept, programming languages are in a different context from spoken languages, but you will get to know this context with time. For example: you have a concept that there is a first meal of the day, and there is a name for that: in English it’s “breakfast”. So if you’re learning Spanish, you could expect there is a word for this concept of a first meal. (And you’d be right: ‘desayuno’). <strong>We will get you to expect that programming languages also have words (called functions in R) for concepts as well</strong>. You’ll soon expect that there is a way to order values numerically. Or alphabetically. Or search for patterns in text. Or calculate the median. Or reorganize columns to rows. Or subset exactly what you want. We will get you increase your expectations and learn to ask and find what you’re looking for.</p>
<div id="resources" class="section level4" number="1.2.2.1">
<h4><span class="header-section-number">1.2.2.1</span> Resources</h4>
<p>This lesson is a combination of excellent lessons by others. Huge thanks to Julie Lowndes for writing most of this content and letting us build on her material, which in turn was built on Jenny Bryan’s materials. I definitely recommend reading through the original lessons and using them as reference:</p>
<p><a href="http://ohi-science.org/data-science-training/">Julie Lowndes’ Data Science Training for the Ocean Health Index</a></p>
<ul>
<li><a href="http://ohi-science.org/data-science-training/rstudio.html">R, RStudio, RMarkdown</a></li>
<li><a href="http://ohi-science.org/data-science-training/programming.html">Programming in R</a></li>
</ul>
<p><a href="https://stat545-ubc.github.io/">Jenny Bryan’s lectures from STAT545 at UBC</a></p>
<p>Here are some other resources that we like for learning R:</p>
<ul>
<li>Learn R in the console with <a href="https://swirlstats.com/">swirl</a></li>
<li>The <a href="http://www.datacarpentry.org/R-ecology-lesson/01-intro-to-r.html">Introduction to R</a> lesson in <a href="http://www.datacarpentry.org/R-ecology-lesson/">Data Carpentry’s R for data analysis</a> course</li>
<li>The Stat 545 <a href="https://stat545.com/r-basics.html">course materials</a></li>
<li>The QCBS <a href="https://qcbs.ca/wiki/r">Introduction to R</a> lesson (in French)</li>
</ul>
<p>Other resources:</p>
<ul>
<li><a href="https://www.caam.rice.edu/~heinken/latex/symbols.pdf">LaTeX Equation Formatting</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2016/05/base-r.pdf">Base R Cheatsheet</a></li>
<li><a href="http://mathesaurus.sourceforge.net/octave-r.html">MATLAB/R Translation Cheat Sheet</a></li>
</ul>
</div>
</div>
<div id="r-at-the-console" class="section level3" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> R at the console</h3>
<p>Launch RStudio/R.</p>
<p><img src="images/RStudio_IDE.png" /></p>
<p>Notice the default panes:</p>
<ul>
<li>Console (entire left)</li>
<li>Environment/History (tabbed in upper right)</li>
<li>Files/Plots/Packages/Help (tabbed in lower right)</li>
</ul>
<p>FYI: you can change the default location of the panes, among many other things: <a href="https://support.rstudio.com/hc/en-us/articles/200549016-Customizing-RStudio">Customizing RStudio</a>.</p>
<p>An important first question: <strong>where are we?</strong></p>
<p>If you’ve just opened RStudio for the first time, you’ll be in your Home directory. This is noted by the <code>~/</code> at the top of the console. You can see too that the Files pane in the lower right shows what is in the Home directory where you are. You can navigate around within that Files pane and explore, but note that you won’t change where you are: even as you click through you’ll still be Home: <code>~/</code>.</p>
<p><img src="images/RStudio_IDE_homedir.png" /></p>
<p>OK let’s go into the Console, where we interact with the live R process.</p>
<p>We use R to calculate things for us, so let’s do some simple math.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">*</span><span class="dv">4</span></span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>You can assign the value of that mathematic operation to a variable, or object, in R. You do this using the assignment operator, <code>&lt;-</code>.</p>
<p>Make an assignment and then inspect the object you just created.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb12-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">*</span> <span class="dv">4</span></span>
<span id="cb12-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb12-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>In my head I hear, e.g., “x gets 12”.</p>
<p>All R statements where you create objects – “assignments” – have this form: <code>objectName &lt;- value</code>.</p>
<p>I’ll write it in the console with a hash <code>#</code>, which is the way R comments so it won’t be evaluated.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">## objectName &lt;- value</span></span>
<span id="cb14-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="do">## This is also how you write notes in your code to explain what you are doing.</span></span></code></pre></div>
<p>Object names cannot start with a digit and cannot contain certain other characters such as a comma or a space. You will be wise to adopt a <a href="http://en.wikipedia.org/wiki/Snake_case">convention for demarcating words</a> in names.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># i_use_snake_case</span></span>
<span id="cb15-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># other.people.use.periods</span></span>
<span id="cb15-3"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># evenOthersUseCamelCase</span></span></code></pre></div>
<p>Make an assignment</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb16-1" aria-hidden="true" tabindex="-1"></a>this_is_a_really_long_name <span class="ot">&lt;-</span> <span class="fl">2.5</span></span></code></pre></div>
<p>To inspect this variable, instead of typing it, we can press the up arrow key and call your command history, with the most recent commands first. Let’s do that, and then delete the assignment:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb17-1" aria-hidden="true" tabindex="-1"></a>this_is_a_really_long_name</span></code></pre></div>
<pre><code>## [1] 2.5</code></pre>
<p>Another way to inspect this variable is to begin typing <code>this_</code>…and RStudio will automagically have suggested completions for you that you can select by hitting the tab key, then press return.</p>
<p>One more:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb19-1" aria-hidden="true" tabindex="-1"></a>science_rocks <span class="ot">&lt;-</span> <span class="st">&quot;yes it does!&quot;</span></span></code></pre></div>
<p>You can see that we can assign an object to be a word, not a number. In R, this is called a “string”, and R knows it’s a word and not a number because it has quotes <code>" "</code>. You can work with strings in your data in R pretty easily, thanks to the <a href="http://stringr.tidyverse.org/"><code>stringr</code></a> and <a href="https://github.com/juliasilge/tidytext#tidytext-text-mining-using-dplyr-ggplot2-and-other-tidy-tools"><code>tidytext</code></a> packages. We won’t talk about strings very much specifically, but know that R can handle text, and it can work with text and numbers together.</p>
<p>Strings and numbers lead us to an important concept in programming: that there are different “classes” or types of objects. An object is a variable, function, data structure, or method that you have written to your environment. You can see what objects you have loaded by looking in the “environment” pane in RStudio. The operations you can do with an object will depend on what type of object it is. This makes sense! Just like you wouldn’t do certain things with your car (like use it to eat soup), you won’t do certain operations with character objects (strings), for example.</p>
<p>Try running the following line in your console:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Hello world!&quot;</span> <span class="sc">*</span> <span class="dv">3</span></span></code></pre></div>
<p>What happened? Why?</p>
<p>You may have noticed that when assigning a value to an object, R does not print anything. You can force R to print the value by using parentheses or by typing the object name:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb21-1" aria-hidden="true" tabindex="-1"></a>weight_kg <span class="ot">&lt;-</span> <span class="dv">55</span>    <span class="co"># doesn&#39;t print anything</span></span>
<span id="cb21-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb21-2" aria-hidden="true" tabindex="-1"></a>(weight_kg <span class="ot">&lt;-</span> <span class="dv">55</span>)  <span class="co"># but putting parenthesis around the call prints the value of `weight_kg`</span></span></code></pre></div>
<pre><code>## [1] 55</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb23-1" aria-hidden="true" tabindex="-1"></a>weight_kg          <span class="co"># and so does typing the name of the object</span></span></code></pre></div>
<pre><code>## [1] 55</code></pre>
<p>Now that R has <code>weight_kg</code> in memory, we can do arithmetic with it. For instance, we may want to convert this weight into pounds (weight in pounds is 2.2 times the weight in kg):</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fl">2.2</span> <span class="sc">*</span> weight_kg</span></code></pre></div>
<pre><code>## [1] 121</code></pre>
<p>We can also change a variable’s value by assigning it a new one:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb27-1" aria-hidden="true" tabindex="-1"></a>weight_kg <span class="ot">&lt;-</span> <span class="fl">57.5</span></span>
<span id="cb27-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fl">2.2</span> <span class="sc">*</span> weight_kg</span></code></pre></div>
<pre><code>## [1] 126.5</code></pre>
<p>This means that assigning a value to one variable does not change the values of other variables. For example, let’s store the animal’s weight in pounds in a new variable, <code>weight_lb</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb29-1" aria-hidden="true" tabindex="-1"></a>weight_lb <span class="ot">&lt;-</span> <span class="fl">2.2</span> <span class="sc">*</span> weight_kg</span></code></pre></div>
<p>and then change <code>weight_kg</code> to 100.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb30-1" aria-hidden="true" tabindex="-1"></a>weight_kg <span class="ot">&lt;-</span> <span class="dv">100</span></span></code></pre></div>
<p>What do you think is the current content of the object <code>weight_lb</code>? 126.5 or 220? Why?</p>
<p>You can also store more than one value in a single object. Storing a series of weights in a single object is a convenient way to perform the same operation on multiple values at the same time. One way to create such an object is the function <code>c()</code>, which stands for combine or concatenate.</p>
<p>Here we will create a <em>vector</em> of weights in kilograms, and convert them to pounds, saving the weight in pounds as a new object.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb31-1" aria-hidden="true" tabindex="-1"></a>weight_kg <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">55</span>, <span class="dv">25</span>, <span class="dv">12</span>)</span>
<span id="cb31-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb31-2" aria-hidden="true" tabindex="-1"></a>weight_kg</span></code></pre></div>
<pre><code>## [1] 55 25 12</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb33-1" aria-hidden="true" tabindex="-1"></a>weight_lb <span class="ot">&lt;-</span> weight_kg <span class="sc">*</span> <span class="fl">2.2</span></span>
<span id="cb33-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb33-2" aria-hidden="true" tabindex="-1"></a>weight_lb</span></code></pre></div>
<pre><code>## [1] 121.0  55.0  26.4</code></pre>
<div id="error-messages-are-your-friends" class="section level4" number="1.2.3.1">
<h4><span class="header-section-number">1.2.3.1</span> Error messages are your friends</h4>
<p>Implicit contract with the computer/scripting language: Computer will do tedious computation for you. In return, you will be completely precise in your instructions. Typos matter. Case matters. Pay attention to how you type.</p>
<p>Remember that this is a language, not unsimilar to English! There are times you aren’t understood – it’s going to happen. There are different ways this can happen. Sometimes you’ll get an error. This is like someone saying ‘What?’ or ‘Pardon’? Error messages can also be more useful, like when they say ‘I didn’t understand this specific part of what you said, I was expecting something else’. That is a great type of error message. Error messages are your friend. Google them (copy-and-paste!) to figure out what they mean.</p>
<div style="width:400px">
<p><img src="images/practicalDev_googleErrorMessage.jpg" /></p>
</div>
<p>And also know that there are errors that can creep in more subtly, without an error message right away, when you are giving information that is understood, but not in the way you meant. Like if I’m telling a story about tables and you’re picturing where you eat breakfast and I’m talking about data. This can leave me thinking I’ve gotten something across that the listener (or R) interpreted very differently. And as I continue telling my story you get more and more confused… So write clean code and check your work as you go to minimize these circumstances!</p>
</div>
<div id="logical-operators-and-expressions" class="section level4" number="1.2.3.2">
<h4><span class="header-section-number">1.2.3.2</span> Logical operators and expressions</h4>
<p>A moment about <strong>logical operators and expressions</strong>. We can ask questions about the objects we just made.</p>
<ul>
<li><code>==</code> means ‘is equal to’</li>
<li><code>!=</code> means ‘is not equal to’</li>
<li><code>&lt;</code> means ` is less than’</li>
<li><code>&gt;</code> means ` is greater than’</li>
<li><code>&lt;=</code> means ` is less than or equal to’</li>
<li><code>&gt;=</code> means ` is greater than or equal to’</li>
</ul>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb35-1" aria-hidden="true" tabindex="-1"></a>weight_kg <span class="sc">==</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb37-1" aria-hidden="true" tabindex="-1"></a>weight_kg <span class="sc">&gt;=</span> <span class="dv">30</span></span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb39-1" aria-hidden="true" tabindex="-1"></a>weight_kg <span class="sc">!=</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE</code></pre>
<blockquote>
<p>Shortcuts You will make lots of assignments and the operator <code>&lt;-</code> is a pain to type. Don’t be lazy and use <code>=</code>, although it would work, because it will just sow confusion later. Instead, utilize <strong>RStudio’s keyboard shortcut: Alt + - (the minus sign)</strong>. Notice that RStudio automagically surrounds <code>&lt;-</code> with spaces, which demonstrates a useful code formatting practice. Code is miserable to read on a good day. Give your eyes a break and use spaces. RStudio offers many handy <a href="https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts">keyboard shortcuts</a>. Also, Alt+Shift+K brings up a keyboard shortcut reference card.</p>
</blockquote>
</div>
<div id="clearing-the-environment" class="section level4" number="1.2.3.3">
<h4><span class="header-section-number">1.2.3.3</span> Clearing the environment</h4>
<p>Now look at the objects in your environment (workspace) – in the upper right pane. The workspace is where user-defined objects accumulate.</p>
<p><img src="images/RStudio_IDE_env.png" /></p>
<p>You can also get a listing of these objects with a few different R commands:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">objects</span>()</span></code></pre></div>
<pre><code>## [1] &quot;science_rocks&quot;              &quot;this_is_a_really_long_name&quot;
## [3] &quot;weight_kg&quot;                  &quot;weight_lb&quot;                 
## [5] &quot;x&quot;</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## [1] &quot;science_rocks&quot;              &quot;this_is_a_really_long_name&quot;
## [3] &quot;weight_kg&quot;                  &quot;weight_lb&quot;                 
## [5] &quot;x&quot;</code></pre>
<p>If you want to remove the object named <code>weight_kg</code>, you can do this:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(weight_kg)</span></code></pre></div>
<p>To remove everything:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
<p>or click the broom in RStudio’s Environment pane.</p>
</div>
</div>
<div id="r-functions-help-pages" class="section level3" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> R functions, help pages</h3>
<p>So far we’ve learned some of the basic syntax and concepts of R programming, and how to navigate RStudio, but we haven’t done any complicated or interesting programming processes yet. This is where functions come in!</p>
<p>A function is a way to group a set of commands together to undertake a task in a reusable way. When a function is executed, it produces a return value. We often say that we are “calling” a function when it is executed. Functions can be user defined and saved to an object using the assignment operator, so you can write whatever functions you need, but R also has a mind-blowing collection of built-in functions ready to use. To start, we will be using some built in R functions.</p>
<p>All functions are called using the same syntax: function name with parentheses around what the function needs in order to do what it was built to do. The pieces of information that the function needs to do its job are called arguments. So the syntax will look something like: <code>result_value &lt;- function_name(argument1 = value1, argument2 = value2, ...)</code>.</p>
<div id="a-simple-example" class="section level4" number="1.2.4.1">
<h4><span class="header-section-number">1.2.4.1</span> A simple example</h4>
<p>To take a very simple example, let’s look at the <code>mean()</code> function. As you might expect, this is a function that will take the mean of a set of numbers. Very convenient!</p>
<p>Let’s create our vector of weights again:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb47-1" aria-hidden="true" tabindex="-1"></a>weight_kg <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">55</span>, <span class="dv">25</span>, <span class="dv">12</span>)</span></code></pre></div>
<p>and use the <code>mean</code> function to calculate the mean weight.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(weight_kg)</span></code></pre></div>
<pre><code>## [1] 30.66667</code></pre>
</div>
<div id="getting-help" class="section level4" number="1.2.4.2">
<h4><span class="header-section-number">1.2.4.2</span> Getting help</h4>
<p>What if you know the name of the function that you want to use, but don’t know exactly how to use it? Thankfully RStudio provides an easy way to access the help documentation for functions.</p>
<p>To access the help page for <code>mean</code>, enter the following into your console:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb50-1" aria-hidden="true" tabindex="-1"></a>?mean</span></code></pre></div>
<p>The help pane will show up in the lower right hand corner of your RStudio.</p>
<p>The help page is broken down into sections:</p>
<ul>
<li>Description: An extended description of what the function does.</li>
<li>Usage: The arguments of the function(s) and their default values.</li>
<li>Arguments: An explanation of the data each argument is expecting.</li>
<li>Details: Any important details to be aware of.</li>
<li>Value: The data the function returns.</li>
<li>See Also: Any related functions you might find useful.</li>
<li>Examples: Some examples for how to use the function.</li>
</ul>
</div>
<div id="your-turn" class="section level4" number="1.2.4.3">
<h4><span class="header-section-number">1.2.4.3</span> Your turn</h4>
<blockquote>
<p>Exercise: Talk to your neighbor(s) and look up the help file for a function that you know or expect to exist. Here are some ideas: <code>?getwd()</code>, <code>?plot()</code>, <code>min()</code>, <code>max()</code>, <code>?log()</code>).</p>
</blockquote>
<p>And there’s also help for when you only sort of remember the function name: double-questionmark:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb51-1" aria-hidden="true" tabindex="-1"></a>??install </span></code></pre></div>
<p>Not all functions have (or require) arguments:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Sun Sep 12 23:13:20 2021&quot;</code></pre>
</div>
<div id="use-a-function-to-read-a-file-into-r" class="section level4" number="1.2.4.4">
<h4><span class="header-section-number">1.2.4.4</span> Use a function to read a file into R</h4>
<p>So far we have learned how to assign values to objects in R, and what a function is, but we haven’t quite put it all together yet with real data yet. To do this, we will introduce the function <code>read.csv</code>, which will be in the first lines of many of your future scripts. It does exactly what it says, it reads in a csv file to R.</p>
<p>Since this is our first time using this function, first access the help page for <code>read.csv</code>. This has a lot of information in it, as this function has a lot of arguments, and the first one is especially important - we have to tell it what file to look for. Let’s get a file!</p>
<div id="download-a-file-from-the-arctic-data-center" class="section level5" number="1.2.4.4.1">
<h5><span class="header-section-number">1.2.4.4.1</span> Download a file from the Arctic Data Center</h5>
<p>Follow these steps to get set up for the next exercise:</p>
<ol style="list-style-type: decimal">
<li>Navigate to this dataset by Craig Tweedie that is published on the Arctic Data Center. <a href="http://doi.org/10.18739/A25T3FZ8X">Craig Tweedie. 2009. North Pole Environmental Observatory Bottle Chemistry. Arctic Data Center. doi:10.18739/A25T3FZ8X.</a></li>
<li>Download the first csv file called “BGchem2008data.csv” by clicking the “download” button next to the file.</li>
<li>Move this file from your <code>Downloads</code> folder into a place you can more easily find it. Eg: a folder called <code>data</code> in your previously-created directory <code>arctic_training_files</code>.</li>
</ol>
<p>Now we have to tell <code>read.csv</code> how to find the file. We do this using the <code>file</code> argument which you can see in usage section in the help page. In R, you can either use absolute paths (which will start with your home directory <code>~/</code>) or paths <strong>relative to your current working directory.</strong> RStudio has some great autocomplete capabilities when using relative paths, so we will go that route. Assuming you have moved your file to a folder within <code>arctic_training_files</code> called <code>data</code>, and your working directory is your home directory (<code>~/</code>) your <code>read.csv</code> call will look like this:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb54-1" aria-hidden="true" tabindex="-1"></a>bg_chem <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Documents/arctic_training_files/data/BGchem2008data.csv&quot;</span>)</span></code></pre></div>
<p>You should now have an object of the class <code>data.frame</code> in your environment called <code>bg_chem</code>. Check your environment pane to ensure this is true.</p>
<p>Note that in the help page there are a whole bunch of arguments that we didn’t use in the call above. Some of the arguments in function calls are optional, and some are required. Optional arguments will be shown in the usage section with a <code>name = value</code> pair, with the default value shown. If you do not specify a <code>name = value</code> pair for that argument in your function call, the function will assume the default value (example: <code>header = TRUE</code> for <code>read.csv</code>). Required arguments will only show the name of the argument, without a value. Note that the only required argument for <code>read.csv</code> is <code>file</code>.</p>
<p>You can always specify arguments in <code>name = value</code> form. But if you do not, R attempts to resolve by position. So above, it is assumed that we want <code>file = "data/BGchem2008data.csv"</code>, since file is the first argument. If we wanted to add another argument, say <code>stringsAsFactors</code>, we need to specify it explicitly using the <code>name = value</code> pair, since the second argument is <code>header</code>. For functions I call often, I use this resolve by position for the first argument or maybe the first two. After that, I always use <code>name = value</code>.</p>
<p>Many R users (including myself) will override the default <code>stringsAsFactors</code> argument using the following call:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb55-1" aria-hidden="true" tabindex="-1"></a>bg_chem <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Documents/arctic_training_files/data/BGchem2008data.csv&quot;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="using-data.frames" class="section level3" number="1.2.5">
<h3><span class="header-section-number">1.2.5</span> Using <code>data.frames</code></h3>
<p>A <code>data.frame</code> is a two dimensional data structure in R that mimics spreadsheet behavior. It is a collection of rows and columns of data, where each column has a name and represents a variable, and each row represents a measurement of that variable. When we ran <code>read.csv</code>, the object <code>bg_chem</code> that we created is a <code>data.frame</code>. There are a a bunch of ways R and RStudio help you explore data frames. Here are a few, give them each a try:</p>
<ul>
<li>click on the word <code>bg_chem</code> in the environment pane</li>
<li>click on the arrow next to <code>bg_chem</code> in the environment pane</li>
<li>execute <code>head(bg_chem)</code> in the console</li>
<li>execute <code>View(bg_chem)</code> in the console</li>
</ul>
<p>Usually we will want to run functions on individual columns in a <code>data.frame</code>. To call a specific column, we use the list subset operator <code>$</code>. Say you want to look at the first few rows of the <code>Date</code> column only. This would do the trick:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bg_chem<span class="sc">$</span>Date)</span></code></pre></div>
<pre><code>## [1] &quot;2008-03-21&quot; &quot;2008-03-21&quot; &quot;2008-03-21&quot; &quot;2008-03-21&quot; &quot;2008-03-21&quot;
## [6] &quot;2008-03-22&quot;</code></pre>
<p>How about calculating the mean temperature of all the CTD samples?</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(bg_chem<span class="sc">$</span>CTD_Temperature)</span></code></pre></div>
<pre><code>## [1] -0.9646915</code></pre>
<p>Or, if we want to save this to a variable to use later:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb60-1" aria-hidden="true" tabindex="-1"></a>mean_temp <span class="ot">&lt;-</span> <span class="fu">mean</span>(bg_chem<span class="sc">$</span>CTD_Temperature)</span></code></pre></div>
<p>You can also create basic plots using the list subset operator.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(bg_chem<span class="sc">$</span>CTD_Depth, bg_chem<span class="sc">$</span>CTD_Temperature)</span></code></pre></div>
<p><img src="reproducible-research-short-course_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
<p>There are many more advancted tools and functions in R that will enable you to make better plots using cleaner syntax, we will cover some of these later in the course.</p>
<div id="your-turn-1" class="section level4" number="1.2.5.1">
<h4><span class="header-section-number">1.2.5.1</span> Your Turn</h4>
<blockquote>
<p>Exercise: Spend a few minutes exploring this dataset. Try out different functions on columns using the list subset operator and experiment with different plots.</p>
</blockquote>
</div>
<div id="i-just-entered-a-command-and-nothing-is-happening" class="section level4" number="1.2.5.2">
<h4><span class="header-section-number">1.2.5.2</span> I just entered a command and nothing is happening</h4>
<p>It may be because you didn’t complete a command: is there a little <code>+</code> in your console? R is saying that it is waiting for you to finish. In the example below, I need to close that parenthesis.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span></span>
<span id="cb62-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span> </span></code></pre></div>
<p>You can either just type the closing parentheses here and push return, or push the <code>esc</code> button twice.</p>
</div>
<div id="r-says-my-object-is-not-found" class="section level4" number="1.2.5.3">
<h4><span class="header-section-number">1.2.5.3</span> R says my object is not found</h4>
<p>New users will frequently see errors that look like this: <code>Error in mean(myobject) : object 'myobject' not found</code></p>
<p>This means that you do not have an object called <code>myobject</code> saved in your environment. The common reasons for this are:</p>
<ul>
<li><strong>typo</strong>: make sure your object name is spelled exactly like what shows up in the console. Remember R is case sensitive.</li>
<li><strong>not writing to a variable</strong>: note that the object is only saved in the environment if you use the assignment operator, eg: <code>myobject &lt;- read.csv(...)</code></li>
<li><strong>not executing the line in your script</strong>: remember that writing a line of code in a script or RMarkdown document is not the same as writing in the console, you have to execute the line of code using command + enter or using one of the several ways in the RStudio graphical user interface.</li>
</ul>
</div>
</div>
</div>
<div id="literate-analysis-with-rmarkdown" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Literate Analysis with RMarkdown</h2>
<div id="learning-objectives-2" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Learning Objectives</h3>
<p>In this lesson we will:</p>
<ul>
<li>explore an example of RMarkdown as literate analysis</li>
<li>learn markdown syntax</li>
<li>write and run R code in RMarkdown</li>
<li>build and knit an example document</li>
</ul>
</div>
<div id="introduction-and-motivation-1" class="section level3" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Introduction and motivation</h3>
<p>The concept of literate analysis dates to a <a href="http://www.literateprogramming.com/knuthweb.pdf">1984 article by Donald Knuth</a>. In this article, Knuth proposes a reversal of the programming paradigm.</p>
<blockquote>
<p>Instead of imagining that our main task is to instruct a <em>computer</em> what to do, let us concentrate rather on explaining to <em>human beings</em> what we want a computer to do.</p>
</blockquote>
<p>If our aim is to make scientific research more transparent, the appeal of this paradigm reversal is immediately apparent. All too often, computational methods are written in such a way as to be borderline incomprehensible - even to the person who originally wrote the code! The reason for this is obvious, computers interpret information very differently than people do. By switching to a literate analysis model, you help enable human understanding of what the computer is doing. As Knuth describes, in the literate analysis model, the author is an “essayist” who chooses variable names carefully, explains what they mean, and introduces concepts in the analysis in a way that facilitates understanding.</p>
<p>RMarkdown is an excellent way to generate literate analysis, and a reproducible workflow. RMarkdown is a combination of two things - R, the programming language, and markdown, a set of text formatting directives. In R, the language assumes that you are writing R code, unless you specify that you are writing prose (using a comment, designated by <code>#</code>). The paradigm shift of literate analysis comes in the switch to RMarkdown, where instead of assuming you are writing code, Rmarkdown assumes that you are writing prose unless you specify that you are writing code. This, along with the formatting provided by markdown, encourages the “essayist” to write understandable prose to accompany the code that explains to the human-beings reading the document what the author told the computer to do. This is in contrast to writing just R code, where the author telling to the computer what to do with maybe a smattering of terse comments explaining the code to a reader.</p>
<p>Before we dive in deeper, let’s look at an example of what literate analysis with RMarkdown can look like using a real example. <a href="https://nceas.github.io/sasap-training/materials/reproducible_research_in_r_fairbanks/example-brood-table-analysis.html"><strong>Here</strong></a> is an example of a real analysis workflow written using RMarkdown.</p>
<p>There are a few things to notice about this document, which assembles a set of similar data sources on salmon brood tables with different formatting into a single data source.</p>
<ul>
<li>It introduces the data sources using in-line images, links, interactive tables, and interactive maps.</li>
<li>An example of data formatting from one source using R is shown.</li>
<li>The document executes a set of formatting scripts in a directory to generate a single merged file.</li>
<li>Some simple quality checks are performed (and their output shown) on the merged data.</li>
<li>Simple analysis and plots are shown.</li>
</ul>
<p>In addition to achieving literate analysis, this document also represents a <strong>reproducible analysis.</strong> Because the entire merging and quality control of the data is done using the R code in the RMarkdown, if a new data source and formatting script are added, the document can be run all at once with a single click to re-generate the quality control, plots, and analysis of the updated data.</p>
<p>RMarkdown is an amazing tool to use for collaborative research, so we will spend some time learning it well now, and use it through the rest of the course.</p>
<div id="setup-2" class="section level4 unnumbered setup">
<h4>Setup</h4>
<p>Open a new RMarkdown file using the following prompts:</p>
<p>File -&gt; New File -&gt; RMarkdown</p>
<p>A popup window will appear. You can just click the OK button here, or give your file a new title if you wish. Leave the output format as HTML.</p>
</div>
</div>
<div id="basic-rmarkdown-syntax" class="section level3" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Basic RMarkdown syntax</h3>
<p>The first thing to notice is that by opening a file, we are seeing the 4th pane of the RStudio console, which is essentially a text editor.</p>
<p>Let’s have a look at this file — it’s not blank; there is some initial text already provided for you. Notice a few things about it:</p>
<ul>
<li>There are white and grey sections. R code is in grey sections, and other text is in white.</li>
</ul>
<p><img src="images/rmarkdown.png" /></p>
<p><br></p>
<p>Let’s go ahead and “Knit” the document by clicking the blue yarn at the top of the RMarkdown file. When you first click this button, RStudio will prompt you to save this file. Save it in the top level of your home directory on the server, and name it something that you will remember (like <code>rmarkdown-intro.Rmd</code>).</p>
<p><br></p>
<p><img src="images/rmarkdown_side_by_side.png" /></p>
<p>What do you notice between the two?</p>
<p>First, the knit process produced a second file (an HTML file) that popped up in a second window. You’ll also see this file in your directory with the same name as your Rmd, but with the html extension. In it’s simplest format, RMarkdown files come in pairs - the RMarkdown file, and its rendered version. In this case, we are knitting, or rendering, the file into HTML. You can also knit to PDF or Word files.</p>
<p>Notice how the grey <strong>R code chunks</strong> are surrounded by 3 backticks and <code>{r LABEL}</code>. These are evaluated and return the output text in the case of <code>summary(cars)</code> and the output plot in the case of <code>plot(pressure)</code>. The label next to the letter r in the code chunk syntax is a chunk label - this can help you navigate your RMarkdown document using the dropdown menu at the bottom of the editor pane.</p>
<p>Notice how the code <code>plot(pressure)</code> is not shown in the HTML output because of the R code chunk option <code>echo = FALSE</code>. RMarkdown has lots of chunk options, including ones that allow for code to be run but not shown (<code>echo = FALSE</code>), code to be shown but not run (<code>eval = FALSE</code>), code to be run, but results not shown (<code>results = 'hide'</code>), or any combination of those.</p>
<p>Before we get too deeply into the R side, let’s talk about Markdown. Markdown is a formatting language for plain text, and there are only around 15 rules to know.</p>
<p>Notice the syntax in the document we just knitted:</p>
<ul>
<li><strong>headers</strong> get rendered at multiple levels: <code>#</code>, <code>##</code></li>
<li><strong>bold</strong>: <code>**word**</code></li>
</ul>
<p>There are some good <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Here-Cheatsheet">cheatsheets</a> to get you started, and here is one built into RStudio: Go to Help &gt; Markdown Quick Reference .</p>
<p><strong>Important</strong>: note that the hash symbol <code>#</code> is used differently in Markdown and in R:</p>
<ul>
<li>in R, a hash indicates a comment that will not be evaluated. You can use as many as you want: <code>#</code> is equivalent to <code>######</code>. It’s just a matter of style.</li>
<li>in Markdown, a hash indicates a level of a header. And the number you use matters: <code>#</code> is a “level one header”, meaning the biggest font and the top of the hierarchy. <code>###</code> is a level three header, and will show up nested below the <code>#</code> and <code>##</code> headers.</li>
</ul>
<div id="challenge" class="section level4 unnumbered exercise">
<h4>Challenge</h4>
<ol style="list-style-type: decimal">
<li>In Markdown, Write some italic text, make a numbered list, and add a few sub-headers. Use the Markdown Quick Reference (in the menu bar: Help &gt; Markdown Quick Reference).</li>
<li>Re-knit your html file and observe your edits.</li>
</ol>
</div>
<div id="new-rmarkdown-editing-tools" class="section level4" number="1.3.3.1">
<h4><span class="header-section-number">1.3.3.1</span> New Rmarkdown editing tools</h4>
<p>The new version of RStudio (1.4) has a ‘what you see is what you get’ (wysiwyg) editor, which can be a nice way to write markdown without remembering all of the markdown rules. Since there aren’t many rules for markdown, I recommend just learning them - especially since markdown is used in many, many other contexts besides RMarkdown (formatting GitHub comments, for example).</p>
<p>To access the editor, click the compass icon in the upper right hand corner of your editor pane. You’ll notice that your document is now formatted as you type, and you can change elements of the formatting using the row of icons in the top of the editor pane. Although I don’t really recommend doing all of your markdown composition in this format, there are two features to this editor that I find <strong>immensely</strong> helpful - adding citations, and adding tables.</p>
<p>From the insert drop down, select “citation.” In the window that appears, there are several options in the left hand panel for the source of your citation. If you had a citation manager, such as Zotero, installed, this would be included in that list. For now, select “From DOI”, and in the search bar enter a DOI of your choice (eg: 10.1038/s41467-020-17726-z), then select “Insert.”</p>
<p><img src="images/markdown-citation.png" />
After selecting insert, a couple of things happen. First, the citation reference is inserted into your markdown text as <code>[@oke2020]</code>. Second, a file called <code>references.bib</code> containing the BibTex format of the citation is created. Third, that file is added to the YAML header of your RMarkdown document (<code>bibliography: references.bib</code>). Adding another citation will automatically update your <code>references.bib</code> file. So easy!</p>
<p>The second task that the markdown editor is convenient for is generating tables. Markdown tables are a bit finicky and annoying to type, and there are a number of formatting options that are difficult to remember if you don’t use them often. In the top icon bar, the “table” drop down gives several options for inserting, editing, and formatting tables. Experiment with this menu to insert a small table.</p>
</div>
</div>
<div id="code-chunks" class="section level3" number="1.3.4">
<h3><span class="header-section-number">1.3.4</span> Code chunks</h3>
<p>Next, do what I do every time I open a new RMarkdown: delete everything below the “setup chunk” (line 10). The setup chunk is the one that looks like this:</p>
<pre><code>knitr::opts_chunk$set(echo = TRUE)</code></pre>
<p>This is a very useful chunk that will set the default R chunk options for your entire document. I like keeping it in my document so that I can easily modify default chunk options based on the audience for my RMarkdown. For example, if I know my document is going to be a report for a non-technical audience, I might set <code>echo = FALSE</code> in my setup chunk, that way all of the text, plots, and tables appear in the knitted document. The code, on the other hand, is still run, but doesn’t display in the final document.</p>
<p>Now let’s practice with some R chunks. You can Create a new chunk in your RMarkdown in one of these ways:</p>
<ul>
<li>click “Insert &gt; R” at the top of the editor pane</li>
<li>type by hand ```{r} ```</li>
<li>use the keyboard shortcut Command + Option + i (for windows, Ctrl + Alt + i)</li>
</ul>
<p>Now, let’s write some R code.</p>
<pre><code>x &lt;- 4*3
x</code></pre>
<p>Hitting return does not execute this command; remember, it’s just a text file. To execute it, we need to get what we typed in the the R chunk (the grey R code) down into the console. How do we do it? There are several ways (let’s do each of them):</p>
<ol style="list-style-type: decimal">
<li><p>copy-paste this line into the console (generally not recommended as a primary method)</p></li>
<li><p>select the line (or simply put the cursor there), and click ‘Run’. This is available from</p>
<ol style="list-style-type: lower-alpha">
<li>the bar above the file (green arrow)</li>
<li>the menu bar: Code &gt; Run Selected Line(s)</li>
<li>keyboard shortcut: command-return</li>
</ol></li>
<li><p>click the green arrow at the right of the code chunk</p></li>
</ol>
<div id="challenge-1" class="section level4 unnumbered exercise">
<h4>Challenge</h4>
<p>Add a few more commands to your code chunk. Execute them by trying the three ways above.</p>
<p><strong>Question</strong>: What is the difference between running code using the green arrow in the chunk and the command-return keyboard shortcut?</p>
</div>
</div>
<div id="literate-analysis-practice" class="section level3" number="1.3.5">
<h3><span class="header-section-number">1.3.5</span> Literate analysis practice</h3>
<p>Now that we have gone over the basics, let’s go a little deeper by building a simple, small RMarkdown document that represents a literate analysis using real data.</p>
<div id="setup-3" class="section level4 unnumbered setup">
<h4>Setup</h4>
<ul>
<li>Navigate to the following dataset: <a href="https://doi.org/10.18739/A25T3FZ8X" class="uri">https://doi.org/10.18739/A25T3FZ8X</a></li>
<li>Download the file “BGchem2008data.csv”</li>
<li>Click the “Upload” button in your RStudio server file browser.</li>
<li>In the dialog box, make sure the destination directory is the <code>data</code> directory in your R project, click “choose file,” and locate the BGchem2008data.csv file. Press “ok” to upload the file.</li>
</ul>
</div>
<div id="developing-code-in-rmarkdown" class="section level4" number="1.3.5.1">
<h4><span class="header-section-number">1.3.5.1</span> Developing code in RMarkdown</h4>
<p>Experienced R users who have never used RMarkdown often struggle a bit in the transition to developing analysis in RMarkdown - which makes sense! It is switching the code paradigm to a new way of thinking. Rather than starting an R chunk and putting all of your code in that single chunk, here I describe what I think is a better way.</p>
<ol style="list-style-type: decimal">
<li>Open a document and block out the high-level sections you know you’ll need to include using top level headers.</li>
<li>Add bullet points for some high level pseudo-code steps you know you’ll need to take.</li>
<li>Start filling in under each bullet point the code that accomplishes each step. As you write your code, transform your bullet points into prose, and add new bullet points or sections as needed.</li>
</ol>
<p>For this mini-analysis, we will just have the following sections and code steps:</p>
<ul>
<li><p>Introduction</p>
<ul>
<li>read in data</li>
</ul></li>
<li><p>Analysis</p>
<ul>
<li>calculate summary statistics</li>
<li>calculate mean Redfield ratio</li>
<li>plot Redfield ratio</li>
</ul></li>
</ul>
</div>
<div id="challenge-2" class="section level4 unnumbered exercise">
<h4>Challenge</h4>
<p>Create the ‘outline’ of your document with the information above. Top level bullet points should be top level sections. The second level points should be a list within each section.</p>
<p>Next, write a sentence saying where your dataset came from, including a hyperlink, in the introduction section.</p>
<p>Hint: Navigate to Help &gt; Markdown Quick Reference to lookup the hyperlink syntax.</p>
</div>
<div id="read-in-the-data" class="section level4" number="1.3.5.2">
<h4><span class="header-section-number">1.3.5.2</span> Read in the data</h4>
<p>Now that we have outlined our document, we can start writing code! To read the data into our environment, we will use a function from the <code>readr</code> package. R packages are the building blocks of computational reproducibility in R. Each package contains a set of related functions that enable you to more easily do a task or set of tasks in R. There are thousands of community-maintained packages out there for just about every imaginable use of R - including many that you have probably never thought of!</p>
<p>To install a package, we use the syntax <code>install.packages('packge_name')</code>. A package only needs to be installed once, so this code can be run directly in the console if needed. To use a package in our analysis, we need to load it into our environment using <code>library(package_name)</code>. Even though we have installed it, we haven’t yet told our R session to access it. Because there are so many packages (many with conflicting namespaces) R cannot automatically load every single package you have installed. Instead, you load only the ones you need for a particular analysis. Loading the package is a key part of the reproducible aspect of our Rmarkdown, so we will include it as an R chunk. It is generally good practice to include all of your <code>library</code> calls in a single, dedicated R chunk near the top of your document. This lets collaborators know what packages they might need to install before they start running your code.</p>
<p>You should have already installed <code>readr</code> as part of the setup for this course, so add a new R chunk below your setup chunk that calls the <code>readr</code> library, and run it. It should look like this:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span></code></pre></div>
<p>Now, below the introduction that you wrote, add a chunk that uses the <code>read_csv</code> function to read in your data file.</p>
<div id="about-rmarkdown-paths" class="section level5 unnumbered">
<h5>About RMarkdown paths</h5>
<p>In computing, a path specifies the unique location of a file on the filesystem. A path can come in one of two forms: absolute or relative. <strong>Absolute</strong> paths start at the very top of your file system, and work their way down the directory tree to the file. <strong>Relative</strong> paths start at an arbitrary point in the file system. In R, this point is set by your working directory.</p>
<p>RMarkdown has a special way of handling relative paths that can be very handy. When working in an RMarkdown document, R will set all paths relative <strong>to the location of the RMarkdown file.</strong> This way, you don’t have to worry about setting a working directory, or changing your colleagues absolute path structure with the correct user name, etc. If your RMarkdown is stored near where the data it analyses are stored (good practice, generally), setting paths becomes much easier!</p>
<p>If you saved your “BGchem2008data.csv” data file in the same location as your Rmd, you can just write the following to read it in. The help page (<code>?read_csv</code>, in the console) for this function tells you that the first argument should be a pointer to the file. Rstudio has some nice helpers to help you navigate paths. If you open quotes and press ‘tab’ with your cursor between the quotes, a popup menu will appear showing you some options.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb66-1" aria-hidden="true" tabindex="-1"></a>bg_chem <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;../data/BGchem2008data.csv&quot;</span>)</span></code></pre></div>
<pre><code>Parsed with column specification:
cols(
  Date = col_date(format = &quot;&quot;),
  Time = col_datetime(format = &quot;&quot;),
  Station = col_character(),
  Latitude = col_double(),
  Longitude = col_double(),
  Target_Depth = col_double(),
  CTD_Depth = col_double(),
  CTD_Salinity = col_double(),
  CTD_Temperature = col_double(),
  Bottle_Salinity = col_double(),
  d18O = col_double(),
  Ba = col_double(),
  Si = col_double(),
  NO3 = col_double(),
  NO2 = col_double(),
  NH4 = col_double(),
  P = col_double(),
  TA = col_double(),
  O2 = col_double()
)
Warning messages:
1: In get_engine(options$engine) :
  Unknown language engine &#39;markdown&#39; (must be registered via knit_engines$set()).
2: Problem with `mutate()` input `Lower`.
ℹ NAs introduced by coercion
ℹ Input `Lower` is `as.integer(Lower)`. 
3: In mask$eval_all_mutate(dots[[i]]) : NAs introduced by coercion</code></pre>
<p>If you run this line in your RMarkdown document, you should see the <code>bg_chem</code> object populate in your environment pane. It also spits out lots of text explaining what types the function parsed each column into. This text is important, and should be examined, but we might not want it in our final document.</p>
</div>
<div id="challenge-3" class="section level5 unnumbered exercise">
<h5>Challenge</h5>
<p>Use one of two methods to figure out how to suppress <strong>warning</strong> and <strong>message</strong> text in your chunk output:</p>
<ol style="list-style-type: decimal">
<li>The gear icon in the chunk, next to the play button</li>
<li>The <a href="https://rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">RMarkdown reference guide</a> (also under Help &gt; Cheatsheets)</li>
</ol>
</div>
</div>
<div id="aside" class="section level4 unnumbered aside">
<h4>Aside</h4>
<p><strong>Why not use <code>read.csv</code> from base R?</strong></p>
<p>We chose to show <code>read_csv</code> from the <code>readr</code> package for a few reasons. One is to introduce the concept of packages and showing how to load them, but <code>read_csv</code> has several advantages over <code>read.csv</code>.</p>
<ul>
<li>more reasonable function defaults (no stringsAsFactors!)</li>
<li>smarter column type parsing, especially for dates</li>
<li>it is <strong>much</strong> faster than <code>read.csv</code>, which is helpful for large files</li>
</ul>
</div>
<div id="calculate-summary-statistics" class="section level4" number="1.3.5.3">
<h4><span class="header-section-number">1.3.5.3</span> Calculate Summary Statistics</h4>
<p>As our “analysis” we are going to calculate some very simple summary statistics and generate a single plot. In this dataset of oceanographic water samples, we will be examining the ratio of nitrogen to phosphate to see how closely the data match the Redfield ratio, which is the consistent 16:1 ratio of nitrogen to phosphorous atoms found in marine phytoplankton.</p>
<p>Under the appropriate bullet point in your analysis section, create a new R chunk, and use it to calculate the mean nitrate (NO3), nitrite (NO2), ammonium (NH4), and phosphorous (P) measured. Save these mean values as new variables with easily understandable names, and write a (brief) description of your operation using markdown above the chunk.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb68-1" aria-hidden="true" tabindex="-1"></a>nitrate <span class="ot">&lt;-</span> <span class="fu">mean</span>(bg_chem<span class="sc">$</span>NO3)</span>
<span id="cb68-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb68-2" aria-hidden="true" tabindex="-1"></a>nitrite <span class="ot">&lt;-</span> <span class="fu">mean</span>(bg_chem<span class="sc">$</span>NO2)</span>
<span id="cb68-3"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb68-3" aria-hidden="true" tabindex="-1"></a>amm <span class="ot">&lt;-</span> <span class="fu">mean</span>(bg_chem<span class="sc">$</span>NH4)</span>
<span id="cb68-4"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb68-4" aria-hidden="true" tabindex="-1"></a>phos <span class="ot">&lt;-</span> <span class="fu">mean</span>(bg_chem<span class="sc">$</span>P)</span></code></pre></div>
<p>In another chunk, use those variables to calculate the nitrogen:phosphate ratio (Redfield ratio).</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb69-1" aria-hidden="true" tabindex="-1"></a>ratio <span class="ot">&lt;-</span> (nitrate <span class="sc">+</span> nitrite <span class="sc">+</span> amm)<span class="sc">/</span>phos</span></code></pre></div>
<p>You can access this variable in your Markdown text by using R in-line in your text. The syntax to call R in-line (as opposed to as a chunk) is a single backtick `, the letter “r”, whatever your simple R command is - here we will use <code>round(ratio)</code> to print the calculated ratio, and a closing backtick `. So: ` 6 `. This allows us to access the value stored in this variable in our explanatory text without resorting to the evaluate-copy-paste method so commonly used for this type of task. The text as it looks in your RMrakdown will look like this:</p>
<p>The Redfield ratio for this dataset is approximately `r <code>round(ratio)</code>`.</p>
<p>And the rendered text like this:</p>
<p>The Redfield ratio for this dataset is approximately 6.</p>
<p>Finally, create a simple plot using base R that plots the ratio of the individual measurements, as opposed to looking at mean ratio.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(bg_chem<span class="sc">$</span>P, bg_chem<span class="sc">$</span>NO2 <span class="sc">+</span> bg_chem<span class="sc">$</span>NO3 <span class="sc">+</span> bg_chem<span class="sc">$</span>NH4)</span></code></pre></div>
<p><img src="reproducible-research-short-course_files/figure-html/unnamed-chunk-55-1.png" width="672" /></p>
</div>
<div id="challenge-4" class="section level4 unnumbered exercise">
<h4>Challenge</h4>
<p>Decide whether or not you want the plotting code above to show up in your knitted document along with the plot, and implement your decision as a chunk option.</p>
<p>“Knit” your RMarkdown document (by pressing the Knit button) to observe the results.</p>
</div>
<div id="aside-1" class="section level4 unnumbered aside">
<h4>Aside</h4>
<p><strong>How do I decide when to make a new chunk?</strong></p>
<p>Like many of life’s great questions, there is no clear cut answer. My preference is to have one chunk per functional unit of analysis. This functional unit could be 50 lines of code or it could be 1 line, but typically it only does one “thing.” This could be reading in data, making a plot, or defining a function. It could also mean calculating a series of related summary statistics (as above). Ultimately the choice is one related to personal preference and style, but generally you should ensure that code is divided up such that it is easily explainable in a literate analysis as the code is run.</p>
</div>
</div>
<div id="rmarkdown-and-environments" class="section level3" number="1.3.6">
<h3><span class="header-section-number">1.3.6</span> RMarkdown and environments</h3>
<p>Let’s walk through an exercise with the document you built together to demonstrate how RMarkdown handles environments. We will be deliberately inducing some errors here for demonstration purposes.</p>
<p>First, follow these steps:</p>
<ol style="list-style-type: decimal">
<li>Restart your R session (Session &gt; Restart R)</li>
<li>Run the last chunk in your Rmarkdown by pressing the play button on the chunk</li>
</ol>
<p>Perhaps not surprisingly, we get an error:</p>
<pre><code>Error in plot(bg_chem$P, bg_chem$NO2 + bg_chem$NO3 + bg_chem$NH4) : 
  object &#39;bg_chem&#39; not found</code></pre>
<p>This is because we have not run the chunk of code that reads in the <code>bg_chem</code> data. The R part of Rmarkdown works just like a regular R script. You have to execute the code, and the order that you run it in matters. It is relatively easy to get mixed up in a large RMarkdown document - running chunks out of order, or forgetting to run chunks. To resolve this, follow the next step:</p>
<ol start="3" style="list-style-type: decimal">
<li>Select from the “Run” menu (top right of Rmarkdown editor) “Restart R and run all chunks”</li>
<li>Observe the <code>bg_chem</code> variable in your environment.</li>
</ol>
<p>This is one of my favorite ways to reset and re-run my code when things seem to have gone sideways. This is great practice to do periodically since it helps ensure you are writing code that actually runs.</p>
<p>For the next demonstration:</p>
<ol style="list-style-type: decimal">
<li>Restart your R session (Session &gt; Restart R)</li>
<li>Press Knit to run all of the code in your document</li>
<li>Observe the state of your environment pane</li>
</ol>
<p>Assuming your document knitted and produced an html page, your code ran. Yet the environment pane is empty. What happened?</p>
<p>The Knit button is rather special - it doesn’t just run all of the code in your document. It actually spins up a fresh R environment separate from the one you have been working in, runs all of the code in your document, generates the output, and then closes the environment. This is one of the best ways RMarkdown helps ensure you have built a reproducible workflow. If, while you were developing your code, you ran a line in the console as opposed to adding it to your RMarkdown document, the code you develop while working actively in your environment will still work. However, when you knit your document, the environment RStudio spins up doesn’t know anything about that working environment you were in. Thus, your code may error because it doesn’t have that extra piece of information. Commonly, <code>library</code> calls are the source of this kind of frustration when the author runs it in the console, but forgets to add it to the script.</p>
<p>To further clarify the point on environments, perform the following steps:</p>
<ol start="4" style="list-style-type: decimal">
<li>Select from the “Run” menu (top right of Rmarkdown editor) “Run All”</li>
<li>Observe all of the variables in your environment.</li>
</ol>
<div id="aside-2" class="section level4 unnumbered aside">
<h4>Aside</h4>
<p><strong>What about all my R scripts?</strong></p>
<p>Some pieces of R code are better suited for R scripts than RMarkdown. A function you wrote yourself that you use in many different analyses is probably better to define in an R script than repeated across many RMarkdown documents. Some analyses have mundane or repetitive tasks that don’t need to be explained very much. For example, in the document shown in the beginning of this lesson, 15 different excel files needed to be reformatted in slightly different, mundane ways, like renaming columns and removing header text. Instead of including these tasks in the primary markdown, I instead chose to write one R script per file and stored them all in a directory. I took the contents of one script and included it in my literate analysis, using it as an example to explain what the scripts did, and then used the <code>source</code> function to run them all from within my RMarkdown.</p>
<p>So, just because you know RMarkdown now, doesn’t mean you won’t be using R scripts anymore. Both .R and .Rmd have their roles to play in analysis. With practice, it will become more clear what works well in RMarkdown, and what belongs in a regular R script.</p>
</div>
</div>
<div id="go-further" class="section level3 exercise" number="1.3.7">
<h3><span class="header-section-number">1.3.7</span> Go Further</h3>
<p>Create an RMarkdown document with some of your own data. If you don’t have a good dataset handy, use the example dataset here:</p>
<p><a href="http://doi.org/10.18739/A25T3FZ8X">Craig Tweedie. 2009. North Pole Environmental Observatory Bottle Chemistry. Arctic Data Center. doi:10.18739/A25T3FZ8X.</a></p>
<p>Your document might contain the following sections:</p>
<ul>
<li><p>Introduction to your dataset</p>
<ul>
<li>Include an external link</li>
</ul></li>
<li><p>Simple analysis</p></li>
<li><p>Presentation of a result</p>
<ul>
<li>A table</li>
<li>An in-line R command</li>
</ul></li>
</ul>
</div>
<div id="resources-1" class="section level3" number="1.3.8">
<h3><span class="header-section-number">1.3.8</span> Resources</h3>
<ul>
<li><a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">RMarkdown Reference Guide</a></li>
<li><a href="https://rmarkdown.rstudio.com/">RMarkdown Home Page</a></li>
<li><a href="https://rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf">RMarkdown Cheat Sheet</a></li>
</ul>
</div>
<div id="troubleshooting" class="section level3" number="1.3.9">
<h3><span class="header-section-number">1.3.9</span> Troubleshooting</h3>
<div id="my-rmarkdown-wont-knit-to-pdf" class="section level4" number="1.3.9.1">
<h4><span class="header-section-number">1.3.9.1</span> My RMarkdown won’t knit to PDF</h4>
<p>If you get an error when trying to knit to PDF that says your computer doesn’t have a LaTeX installation, one of two things is likely happening:</p>
<ol style="list-style-type: decimal">
<li>Your computer doesn’t have LaTeX installed</li>
<li>You have an installation of LaTeX but RStudio cannot find it (it is not on the path)</li>
</ol>
<p>If you already use LaTeX (like to write papers), you fall in the second category. Solving this requires directing RStudio to your installation - and isn’t covered here.</p>
<p>If you fall in the first category - you are sure you don’t have LaTeX installed - can use the R package <code>tinytex</code> to easily get an installation recognized by RStudio, as long as you have administrative rights to your computer.</p>
<p>To install <code>tinytex</code> run:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tinytex&quot;</span>)</span>
<span id="cb72-2"><a href="session-1-setup-and-introduction-to-rmarkdown.html#cb72-2" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install_tinytex</span>()</span></code></pre></div>
<p>If you get an error that looks like <code>destination /usr/local/bin not writable</code>, you need to give yourself permission to write to this directory (again, only possible if you have administrative rights). To do this, run this command in the terminal:</p>
<pre><code>sudo chown -R `whoami`:admin /usr/local/bin</code></pre>
<p>and then try the above install instructions again. More information about <code>tinytex</code> can be found <a href="https://yihui.name/tinytex/">here</a></p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="session-2-reproducible-papers-with-rmarkdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
