<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Session 7: Functions and Packages | Open Science Synthesis for the Delta Science Program: Week 1</title>
  <meta name="description" content="7 Session 7: Functions and Packages | Open Science Synthesis for the Delta Science Program: Week 1" />
  <meta name="generator" content="bookdown 0.24.1 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Session 7: Functions and Packages | Open Science Synthesis for the Delta Science Program: Week 1" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Session 7: Functions and Packages | Open Science Synthesis for the Delta Science Program: Week 1" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="session-6-collaboration-practices.html"/>
<link rel="next" href="session-8-hands-on-logic-models-and-synthesis-development.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.19/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.9.4.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Open Science Synthesis for the Delta Science Program: Week 1</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i><b>0.1</b> Schedule</a>
<ul>
<li class="chapter" data-level="0.1.1" data-path="index.html"><a href="index.html#code-of-conduct"><i class="fa fa-check"></i><b>0.1.1</b> Code of Conduct</a></li>
<li class="chapter" data-level="0.1.2" data-path="index.html"><a href="index.html#logistics"><i class="fa fa-check"></i><b>0.1.2</b> Logistics</a></li>
<li class="chapter" data-level="0.1.3" data-path="index.html"><a href="index.html#about-this-book"><i class="fa fa-check"></i><b>0.1.3</b> About this book</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html"><i class="fa fa-check"></i><b>1</b> Session 1: Setup and Introduction to RMarkdown</a>
<ul>
<li class="chapter" data-level="1.1" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#rstudio-and-gitgithub-setup"><i class="fa fa-check"></i><b>1.1</b> RStudio and Git/GitHub Setup</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#learning-objectives"><i class="fa fa-check"></i><b>1.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="1.1.2" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#logging-into-the-rstudio-server"><i class="fa fa-check"></i><b>1.1.2</b> Logging into the RStudio server</a></li>
<li class="chapter" data-level="1.1.3" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#preparing-to-work-in-rstudio"><i class="fa fa-check"></i><b>1.1.3</b> Preparing to work in RStudio</a></li>
<li class="chapter" data-level="1.1.4" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#setting-up-the-r-environment-on-your-local-computer"><i class="fa fa-check"></i><b>1.1.4</b> Setting up the R environment on your local computer</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#literate-analysis-with-rmarkdown"><i class="fa fa-check"></i><b>1.2</b> Literate Analysis with RMarkdown</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#learning-objectives-1"><i class="fa fa-check"></i><b>1.2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="1.2.2" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#introduction-and-motivation"><i class="fa fa-check"></i><b>1.2.2</b> Introduction and motivation</a></li>
<li class="chapter" data-level="1.2.3" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#basic-rmarkdown-syntax"><i class="fa fa-check"></i><b>1.2.3</b> Basic RMarkdown syntax</a></li>
<li class="chapter" data-level="1.2.4" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#code-chunks"><i class="fa fa-check"></i><b>1.2.4</b> Code chunks</a></li>
<li class="chapter" data-level="1.2.5" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#literate-analysis-practice"><i class="fa fa-check"></i><b>1.2.5</b> Literate analysis practice</a></li>
<li class="chapter" data-level="1.2.6" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#rmarkdown-and-environments"><i class="fa fa-check"></i><b>1.2.6</b> RMarkdown and environments</a></li>
<li class="chapter" data-level="1.2.7" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#go-further"><i class="fa fa-check"></i><b>1.2.7</b> Go Further</a></li>
<li class="chapter" data-level="1.2.8" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#resources"><i class="fa fa-check"></i><b>1.2.8</b> Resources</a></li>
<li class="chapter" data-level="1.2.9" data-path="session-1-setup-and-introduction-to-rmarkdown.html"><a href="session-1-setup-and-introduction-to-rmarkdown.html#troubleshooting"><i class="fa fa-check"></i><b>1.2.9</b> Troubleshooting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="session-2-reproducible-papers-with-rmarkdown.html"><a href="session-2-reproducible-papers-with-rmarkdown.html"><i class="fa fa-check"></i><b>2</b> Session 2: Reproducible Papers with RMarkdown</a>
<ul>
<li class="chapter" data-level="2.1" data-path="session-2-reproducible-papers-with-rmarkdown.html"><a href="session-2-reproducible-papers-with-rmarkdown.html#reproducible-and-transparent-papers"><i class="fa fa-check"></i><b>2.1</b> Reproducible and Transparent Papers</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="session-2-reproducible-papers-with-rmarkdown.html"><a href="session-2-reproducible-papers-with-rmarkdown.html#learning-objectives-2"><i class="fa fa-check"></i><b>2.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="" data-path="session-2-reproducible-papers-with-rmarkdown.html"><a href="session-2-reproducible-papers-with-rmarkdown.html#data-citation"><i class="fa fa-check"></i>Data Citation</a></li>
<li class="chapter" data-level="2.1.2" data-path="session-2-reproducible-papers-with-rmarkdown.html"><a href="session-2-reproducible-papers-with-rmarkdown.html#reproducible-papers-with-rrtools"><i class="fa fa-check"></i><b>2.1.2</b> Reproducible Papers with <code>rrtools</code></a></li>
<li class="chapter" data-level="2.1.3" data-path="session-2-reproducible-papers-with-rmarkdown.html"><a href="session-2-reproducible-papers-with-rmarkdown.html#reproducible-papers-with-rticles"><i class="fa fa-check"></i><b>2.1.3</b> Reproducible Papers with <code>rticles</code></a></li>
<li class="chapter" data-level="" data-path="session-2-reproducible-papers-with-rmarkdown.html"><a href="session-2-reproducible-papers-with-rmarkdown.html#the-5th-generation-of-reproducible-papers"><i class="fa fa-check"></i>The 5th Generation of Reproducible Papers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html"><i class="fa fa-check"></i><b>3</b> Session 3: Version Control with git and GitHub</a>
<ul>
<li class="chapter" data-level="3.1" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#learning-objectives-3"><i class="fa fa-check"></i><b>3.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#introduction-to-git"><i class="fa fa-check"></i><b>3.2</b> Introduction to git</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#a-motivating-example"><i class="fa fa-check"></i><b>3.2.1</b> A Motivating Example</a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#version-control-and-collaboration-using-git-and-github"><i class="fa fa-check"></i>Version control and Collaboration using Git and GitHub</a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#lets-look-at-a-github-repository"><i class="fa fa-check"></i>Let’s look at a GitHub repository</a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#the-git-lifecycle"><i class="fa fa-check"></i>The Git lifecycle</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#create-a-remote-repository-on-github"><i class="fa fa-check"></i><b>3.3</b> Create a remote repository on GitHub</a>
<ul>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#setup-4"><i class="fa fa-check"></i>Setup</a></li>
<li><a href="session-3-version-control-with-git-and-github.html#section-1"></a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#challenge-5"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="session-3-version-control-with-git-and-github.html#section-2"></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#working-locally-with-git-via-rstudio"><i class="fa fa-check"></i><b>3.4</b> Working locally with Git via RStudio</a>
<ul>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#setup-5"><i class="fa fa-check"></i>Setup</a></li>
<li><a href="session-3-version-control-with-git-and-github.html#section-3"></a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#challenge-6"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="session-3-version-control-with-git-and-github.html#section-4"></a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#aside-3"><i class="fa fa-check"></i>Aside</a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#collaboration-and-conflict-free-workflows"><i class="fa fa-check"></i>Collaboration and conflict free workflows</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#setting-up-git-on-an-existing-project"><i class="fa fa-check"></i><b>3.5</b> Setting up git on an existing project</a>
<ul>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#challenge-7"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="session-3-version-control-with-git-and-github.html#section-5"></a></li>
<li class="chapter" data-level="" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#challenge-8"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="session-3-version-control-with-git-and-github.html#section-6"></a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="session-3-version-control-with-git-and-github.html"><a href="session-3-version-control-with-git-and-github.html#go-further-1"><i class="fa fa-check"></i><b>3.6</b> Go Further</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html"><i class="fa fa-check"></i><b>4</b> Session 4: Data Modeling Essentials</a>
<ul>
<li class="chapter" data-level="4.1" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#data-modeling-tidy-data"><i class="fa fa-check"></i><b>4.1</b> Data Modeling &amp; Tidy Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#learning-objectives-4"><i class="fa fa-check"></i><b>4.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="4.1.2" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#introduction"><i class="fa fa-check"></i><b>4.1.2</b> Introduction</a></li>
<li class="chapter" data-level="4.1.3" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#recognizing-untidy-data"><i class="fa fa-check"></i><b>4.1.3</b> Recognizing untidy data</a></li>
<li class="chapter" data-level="4.1.4" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#good-enough-data-modeling"><i class="fa fa-check"></i><b>4.1.4</b> Good enough data modeling</a></li>
<li class="chapter" data-level="4.1.5" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#using-normalized-data"><i class="fa fa-check"></i><b>4.1.5</b> Using normalized data</a></li>
<li class="chapter" data-level="4.1.6" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#data-modeling-exercise"><i class="fa fa-check"></i><b>4.1.6</b> Data modeling exercise</a></li>
<li class="chapter" data-level="4.1.7" data-path="session-4-data-modeling-essentials.html"><a href="session-4-data-modeling-essentials.html#resources-1"><i class="fa fa-check"></i><b>4.1.7</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="session-5-cleaning-and-manipulating-data.html"><a href="session-5-cleaning-and-manipulating-data.html"><i class="fa fa-check"></i><b>5</b> Session 5: Cleaning and Manipulating Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="session-5-cleaning-and-manipulating-data.html"><a href="session-5-cleaning-and-manipulating-data.html#data-cleaning-and-manipulation"><i class="fa fa-check"></i><b>5.1</b> Data Cleaning and Manipulation</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="session-5-cleaning-and-manipulating-data.html"><a href="session-5-cleaning-and-manipulating-data.html#learning-objectives-5"><i class="fa fa-check"></i><b>5.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="5.1.2" data-path="session-5-cleaning-and-manipulating-data.html"><a href="session-5-cleaning-and-manipulating-data.html#introduction-1"><i class="fa fa-check"></i><b>5.1.2</b> Introduction</a></li>
<li class="chapter" data-level="5.1.3" data-path="session-5-cleaning-and-manipulating-data.html"><a href="session-5-cleaning-and-manipulating-data.html#data-cleaning-basics"><i class="fa fa-check"></i><b>5.1.3</b> Data Cleaning Basics</a></li>
<li class="chapter" data-level="5.1.4" data-path="session-5-cleaning-and-manipulating-data.html"><a href="session-5-cleaning-and-manipulating-data.html#joins-in-dplyr"><i class="fa fa-check"></i><b>5.1.4</b> Joins in dplyr</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html"><i class="fa fa-check"></i><b>6</b> Session 6: Collaboration Practices</a>
<ul>
<li class="chapter" data-level="6.1" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#thinking-preferences"><i class="fa fa-check"></i><b>6.1</b> Thinking preferences</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#learning-objectives-6"><i class="fa fa-check"></i><b>6.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="6.1.2" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#thinking-preferences-activity"><i class="fa fa-check"></i><b>6.1.2</b> Thinking Preferences Activity</a></li>
<li class="chapter" data-level="6.1.3" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#about-the-whole-brain-thinking-system"><i class="fa fa-check"></i><b>6.1.3</b> About the Whole Brain Thinking System</a></li>
<li class="chapter" data-level="6.1.4" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#bonus-activity-your-complex-self"><i class="fa fa-check"></i><b>6.1.4</b> Bonus Activity: Your Complex Self</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#collaboration-authorship-and-data-policies"><i class="fa fa-check"></i><b>6.2</b> Collaboration, authorship and data policies</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#developing-a-code-of-conduct"><i class="fa fa-check"></i><b>6.2.1</b> Developing a Code of Conduct</a></li>
<li class="chapter" data-level="6.2.2" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#authorship-and-credit"><i class="fa fa-check"></i><b>6.2.2</b> Authorship and Credit</a></li>
<li class="chapter" data-level="6.2.3" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#data-policies"><i class="fa fa-check"></i><b>6.2.3</b> Data Policies</a></li>
<li class="chapter" data-level="6.2.4" data-path="session-6-collaboration-practices.html"><a href="session-6-collaboration-practices.html#extra-reading"><i class="fa fa-check"></i><b>6.2.4</b> Extra Reading</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html"><i class="fa fa-check"></i><b>7</b> Session 7: Functions and Packages</a>
<ul>
<li class="chapter" data-level="7.1" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#creating-r-functions"><i class="fa fa-check"></i><b>7.1</b> Creating R Functions</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#why-functions"><i class="fa fa-check"></i><b>7.1.1</b> Why functions?</a></li>
<li class="chapter" data-level="7.1.2" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#documenting-r-functions"><i class="fa fa-check"></i><b>7.1.2</b> Documenting R functions</a></li>
<li class="chapter" data-level="7.1.3" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#summary-3"><i class="fa fa-check"></i><b>7.1.3</b> Summary</a></li>
<li class="chapter" data-level="7.1.4" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#examples-minimizing-work-with-functions"><i class="fa fa-check"></i><b>7.1.4</b> Examples: Minimizing work with functions</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#creating-r-packages"><i class="fa fa-check"></i><b>7.2</b> Creating R Packages</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#learning-objectives-7"><i class="fa fa-check"></i><b>7.2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="7.2.2" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#why-packages"><i class="fa fa-check"></i><b>7.2.2</b> Why packages?</a></li>
<li class="chapter" data-level="7.2.3" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#install-and-load-packages"><i class="fa fa-check"></i><b>7.2.3</b> Install and load packages</a></li>
<li class="chapter" data-level="7.2.4" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#create-a-basic-package"><i class="fa fa-check"></i><b>7.2.4</b> Create a basic package</a></li>
<li class="chapter" data-level="7.2.5" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#add-your-code"><i class="fa fa-check"></i><b>7.2.5</b> Add your code</a></li>
<li class="chapter" data-level="7.2.6" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#add-documentation"><i class="fa fa-check"></i><b>7.2.6</b> Add documentation</a></li>
<li class="chapter" data-level="7.2.7" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#test-your-package"><i class="fa fa-check"></i><b>7.2.7</b> Test your package</a></li>
<li class="chapter" data-level="7.2.8" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#checking-and-installing-your-package"><i class="fa fa-check"></i><b>7.2.8</b> Checking and installing your package</a></li>
<li class="chapter" data-level="7.2.9" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#sharing-and-releasing-your-package"><i class="fa fa-check"></i><b>7.2.9</b> Sharing and releasing your package</a></li>
<li class="chapter" data-level="7.2.10" data-path="session-7-functions-and-packages.html"><a href="session-7-functions-and-packages.html#more-reading"><i class="fa fa-check"></i><b>7.2.10</b> More reading</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="session-8-hands-on-logic-models-and-synthesis-development.html"><a href="session-8-hands-on-logic-models-and-synthesis-development.html"><i class="fa fa-check"></i><b>8</b> Session 8: Hands On: Logic Models and Synthesis Development</a>
<ul>
<li class="chapter" data-level="8.1" data-path="session-8-hands-on-logic-models-and-synthesis-development.html"><a href="session-8-hands-on-logic-models-and-synthesis-development.html#synthesis-development"><i class="fa fa-check"></i><b>8.1</b> Synthesis Development</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="session-8-hands-on-logic-models-and-synthesis-development.html"><a href="session-8-hands-on-logic-models-and-synthesis-development.html#resources-2"><i class="fa fa-check"></i><b>8.1.1</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="session-8-hands-on-logic-models-and-synthesis-development.html"><a href="session-8-hands-on-logic-models-and-synthesis-development.html#logic-models"><i class="fa fa-check"></i><b>8.2</b> Logic Models</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="session-8-hands-on-logic-models-and-synthesis-development.html"><a href="session-8-hands-on-logic-models-and-synthesis-development.html#logic-models-1"><i class="fa fa-check"></i><b>8.2.1</b> Logic Models</a></li>
<li class="chapter" data-level="8.2.2" data-path="session-8-hands-on-logic-models-and-synthesis-development.html"><a href="session-8-hands-on-logic-models-and-synthesis-development.html#logic-models-for-synthesis-development"><i class="fa fa-check"></i><b>8.2.2</b> Logic models for synthesis development</a></li>
<li class="chapter" data-level="8.2.3" data-path="session-8-hands-on-logic-models-and-synthesis-development.html"><a href="session-8-hands-on-logic-models-and-synthesis-development.html#resources-3"><i class="fa fa-check"></i><b>8.2.3</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="session-9-hands-on-exploration-of-data-resources-and-synthesis-development.html"><a href="session-9-hands-on-exploration-of-data-resources-and-synthesis-development.html"><i class="fa fa-check"></i><b>9</b> Session 9: Hands On: Exploration of Data Resources and Synthesis Development</a>
<ul>
<li class="chapter" data-level="9.1" data-path="session-9-hands-on-exploration-of-data-resources-and-synthesis-development.html"><a href="session-9-hands-on-exploration-of-data-resources-and-synthesis-development.html#datasets-of-interest"><i class="fa fa-check"></i><b>9.1</b> Datasets of Interest</a></li>
<li class="chapter" data-level="9.2" data-path="session-9-hands-on-exploration-of-data-resources-and-synthesis-development.html"><a href="session-9-hands-on-exploration-of-data-resources-and-synthesis-development.html#finding-more-data"><i class="fa fa-check"></i><b>9.2</b> Finding more data</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="session-10-quantitative-synthesis-tools.html"><a href="session-10-quantitative-synthesis-tools.html"><i class="fa fa-check"></i><b>10</b> Session 10: Quantitative synthesis tools</a>
<ul>
<li class="chapter" data-level="10.1" data-path="session-10-quantitative-synthesis-tools.html"><a href="session-10-quantitative-synthesis-tools.html#learning-outcomes-1"><i class="fa fa-check"></i><b>10.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="10.2" data-path="session-10-quantitative-synthesis-tools.html"><a href="session-10-quantitative-synthesis-tools.html#context"><i class="fa fa-check"></i><b>10.2</b> Context</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="session-10-quantitative-synthesis-tools.html"><a href="session-10-quantitative-synthesis-tools.html#summary-of-options"><i class="fa fa-check"></i><b>10.2.1</b> Summary of options</a></li>
<li class="chapter" data-level="10.2.2" data-path="session-10-quantitative-synthesis-tools.html"><a href="session-10-quantitative-synthesis-tools.html#evidence-framing"><i class="fa fa-check"></i><b>10.2.2</b> Evidence framing</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="session-10-quantitative-synthesis-tools.html"><a href="session-10-quantitative-synthesis-tools.html#challenge-19"><i class="fa fa-check"></i><b>10.3</b> Challenge</a></li>
<li class="chapter" data-level="10.4" data-path="session-10-quantitative-synthesis-tools.html"><a href="session-10-quantitative-synthesis-tools.html#products"><i class="fa fa-check"></i><b>10.4</b> Products</a></li>
<li class="chapter" data-level="10.5" data-path="session-10-quantitative-synthesis-tools.html"><a href="session-10-quantitative-synthesis-tools.html#resources-4"><i class="fa fa-check"></i><b>10.5</b> Resources</a></li>
<li class="chapter" data-level="10.6" data-path="session-10-quantitative-synthesis-tools.html"><a href="session-10-quantitative-synthesis-tools.html#reflection-questions"><i class="fa fa-check"></i><b>10.6</b> Reflection questions</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="session-11-quantitative-synthesis-workflow-reporting.html"><a href="session-11-quantitative-synthesis-workflow-reporting.html"><i class="fa fa-check"></i><b>11</b> Session 11: Quantitative synthesis workflow reporting</a>
<ul>
<li class="chapter" data-level="11.1" data-path="session-11-quantitative-synthesis-workflow-reporting.html"><a href="session-11-quantitative-synthesis-workflow-reporting.html#learning-outcomes-2"><i class="fa fa-check"></i><b>11.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="11.2" data-path="session-11-quantitative-synthesis-workflow-reporting.html"><a href="session-11-quantitative-synthesis-workflow-reporting.html#context-1"><i class="fa fa-check"></i><b>11.2</b> Context</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="session-11-quantitative-synthesis-workflow-reporting.html"><a href="session-11-quantitative-synthesis-workflow-reporting.html#checklist-reporting"><i class="fa fa-check"></i><b>11.2.1</b> Checklist reporting</a></li>
<li class="chapter" data-level="11.2.2" data-path="session-11-quantitative-synthesis-workflow-reporting.html"><a href="session-11-quantitative-synthesis-workflow-reporting.html#purpose"><i class="fa fa-check"></i><b>11.2.2</b> Purpose</a></li>
<li class="chapter" data-level="11.2.3" data-path="session-11-quantitative-synthesis-workflow-reporting.html"><a href="session-11-quantitative-synthesis-workflow-reporting.html#goals-checklist"><i class="fa fa-check"></i><b>11.2.3</b> Goals checklist</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="session-11-quantitative-synthesis-workflow-reporting.html"><a href="session-11-quantitative-synthesis-workflow-reporting.html#challenge-20"><i class="fa fa-check"></i><b>11.3</b> Challenge</a></li>
<li class="chapter" data-level="11.4" data-path="session-11-quantitative-synthesis-workflow-reporting.html"><a href="session-11-quantitative-synthesis-workflow-reporting.html#products-1"><i class="fa fa-check"></i><b>11.4</b> Products</a></li>
<li class="chapter" data-level="11.5" data-path="session-11-quantitative-synthesis-workflow-reporting.html"><a href="session-11-quantitative-synthesis-workflow-reporting.html#resources-5"><i class="fa fa-check"></i><b>11.5</b> Resources</a></li>
<li class="chapter" data-level="11.6" data-path="session-11-quantitative-synthesis-workflow-reporting.html"><a href="session-11-quantitative-synthesis-workflow-reporting.html#reflection-questions-1"><i class="fa fa-check"></i><b>11.6</b> Reflection questions</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="session-12-synthesis-group-presentations-and-feedback.html"><a href="session-12-synthesis-group-presentations-and-feedback.html"><i class="fa fa-check"></i><b>12</b> Session 12: Synthesis Group Presentations and Feedback</a></li>
<li class="chapter" data-level="13" data-path="session-13-meta-analysis-in-r.html"><a href="session-13-meta-analysis-in-r.html"><i class="fa fa-check"></i><b>13</b> Session 13: Meta-analysis in R</a>
<ul>
<li class="chapter" data-level="13.1" data-path="session-13-meta-analysis-in-r.html"><a href="session-13-meta-analysis-in-r.html#learning-outcomes-3"><i class="fa fa-check"></i><b>13.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="13.2" data-path="session-13-meta-analysis-in-r.html"><a href="session-13-meta-analysis-in-r.html#context-2"><i class="fa fa-check"></i><b>13.2</b> Context</a></li>
<li class="chapter" data-level="13.3" data-path="session-13-meta-analysis-in-r.html"><a href="session-13-meta-analysis-in-r.html#the-5-primary-steps-for-meta-analyses-in-r."><i class="fa fa-check"></i><b>13.3</b> The 5 primary steps for meta-analyses in R.</a></li>
<li class="chapter" data-level="13.4" data-path="session-13-meta-analysis-in-r.html"><a href="session-13-meta-analysis-in-r.html#challenge-21"><i class="fa fa-check"></i><b>13.4</b> Challenge</a></li>
<li class="chapter" data-level="13.5" data-path="session-13-meta-analysis-in-r.html"><a href="session-13-meta-analysis-in-r.html#products-2"><i class="fa fa-check"></i><b>13.5</b> Products</a></li>
<li class="chapter" data-level="13.6" data-path="session-13-meta-analysis-in-r.html"><a href="session-13-meta-analysis-in-r.html#resources-6"><i class="fa fa-check"></i><b>13.6</b> Resources</a></li>
<li class="chapter" data-level="13.7" data-path="session-13-meta-analysis-in-r.html"><a href="session-13-meta-analysis-in-r.html#reflection-questions-2"><i class="fa fa-check"></i><b>13.7</b> Reflection questions</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="session-14-interpretation-of-meta-analysis.html"><a href="session-14-interpretation-of-meta-analysis.html"><i class="fa fa-check"></i><b>14</b> Session 14: Interpretation of meta-analysis</a>
<ul>
<li class="chapter" data-level="14.1" data-path="session-14-interpretation-of-meta-analysis.html"><a href="session-14-interpretation-of-meta-analysis.html#learning-outcomes-4"><i class="fa fa-check"></i><b>14.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="14.2" data-path="session-14-interpretation-of-meta-analysis.html"><a href="session-14-interpretation-of-meta-analysis.html#context-3"><i class="fa fa-check"></i><b>14.2</b> Context</a></li>
<li class="chapter" data-level="14.3" data-path="session-14-interpretation-of-meta-analysis.html"><a href="session-14-interpretation-of-meta-analysis.html#challenge-22"><i class="fa fa-check"></i><b>14.3</b> Challenge</a></li>
<li class="chapter" data-level="14.4" data-path="session-14-interpretation-of-meta-analysis.html"><a href="session-14-interpretation-of-meta-analysis.html#products-3"><i class="fa fa-check"></i><b>14.4</b> Products</a></li>
<li class="chapter" data-level="14.5" data-path="session-14-interpretation-of-meta-analysis.html"><a href="session-14-interpretation-of-meta-analysis.html#resources-7"><i class="fa fa-check"></i><b>14.5</b> Resources</a></li>
<li class="chapter" data-level="14.6" data-path="session-14-interpretation-of-meta-analysis.html"><a href="session-14-interpretation-of-meta-analysis.html#reflection-questions-3"><i class="fa fa-check"></i><b>14.6</b> Reflection questions</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="session-15-hands-on-collaborative-data-review-and-prep-collaborative-synthesis-planning.html"><a href="session-15-hands-on-collaborative-data-review-and-prep-collaborative-synthesis-planning.html"><i class="fa fa-check"></i><b>15</b> Session 15: Hands On: Collaborative Data Review and Prep, Collaborative Synthesis Planning</a></li>
<li class="chapter" data-level="16" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html"><i class="fa fa-check"></i><b>16</b> Session 16: Additional Resources</a>
<ul>
<li class="chapter" data-level="16.1" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#creating-a-data-portal"><i class="fa fa-check"></i><b>16.1</b> Creating a data portal</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#what-is-a-portal"><i class="fa fa-check"></i><b>16.1.1</b> What is a Portal?</a></li>
<li class="chapter" data-level="16.1.2" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#portal-uses"><i class="fa fa-check"></i><b>16.1.2</b> Portal Uses</a></li>
<li class="chapter" data-level="16.1.3" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#portal-main-components"><i class="fa fa-check"></i><b>16.1.3</b> Portal Main Components</a></li>
<li class="chapter" data-level="16.1.4" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#creating-portals"><i class="fa fa-check"></i><b>16.1.4</b> Creating Portals</a></li>
<li class="chapter" data-level="16.1.5" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#adding-data-to-portals"><i class="fa fa-check"></i><b>16.1.5</b> Adding Data to Portals</a></li>
<li class="chapter" data-level="16.1.6" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#creating-unique-freeform-pages"><i class="fa fa-check"></i><b>16.1.6</b> Creating Unique Freeform Pages</a></li>
<li class="chapter" data-level="16.1.7" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#saving-and-editing-portals"><i class="fa fa-check"></i><b>16.1.7</b> Saving and Editing Portals</a></li>
<li class="chapter" data-level="16.1.8" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#how-to-publish-portals"><i class="fa fa-check"></i><b>16.1.8</b> How to Publish Portals</a></li>
<li class="chapter" data-level="16.1.9" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#sharing-portals"><i class="fa fa-check"></i><b>16.1.9</b> Sharing Portals</a></li>
<li class="chapter" data-level="" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#challenge-23"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="session-16-additional-resources.html#section-15"></a></li>
<li class="chapter" data-level="16.1.10" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#tutorial-videos"><i class="fa fa-check"></i><b>16.1.10</b> Tutorial Videos</a></li>
<li class="chapter" data-level="16.1.11" data-path="session-16-additional-resources.html"><a href="session-16-additional-resources.html#acknowledgements"><i class="fa fa-check"></i><b>16.1.11</b> Acknowledgements</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Open Science Synthesis for the Delta Science Program: Week 1</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="session-7-functions-and-packages" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Session 7: Functions and Packages</h1>
<div id="creating-r-functions" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Creating R Functions</h2>
<p>Many people write R code as a single, continuous stream of commands, often drawn
from the R Console itself and simply pasted into a script. While any script
brings benefits over non-scripted solutions, there are advantages to breaking
code into small, reusable modules. This is the role of a <code>function</code> in R. In
this lesson, we will review the advantages of coding with functions, practice
by creating some functions and show how to call them, and then do some exercises
to build other simple functions.</p>
<div id="learning-outcomes" class="section level4" number="7.1.0.1">
<h4><span class="header-section-number">7.1.0.1</span> Learning outcomes</h4>
<ul>
<li>Learn why we should write code in small functions</li>
<li>Write code for one or more functions</li>
<li>Document functions to improve understanding and code communication</li>
</ul>
</div>
<div id="why-functions" class="section level3" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Why functions?</h3>
<p>In a word:</p>
<ul>
<li>DRY: Don’t Repeat Yourself</li>
</ul>
<p>By creating small functions that only one logical task and do it well, we quickly
gain:</p>
<ul>
<li>Improved understanding</li>
<li>Reuse via decomposing tasks into bite-sized chunks</li>
<li>Improved error testing</li>
</ul>
<div id="temperature-conversion" class="section level4 unnumbered">
<h4>Temperature conversion</h4>
<p>Imagine you have a bunch of data measured in Fahrenheit and you want to convert
that for analytical purposes to Celsius. You might have an R script
that does this for you.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="session-7-functions-and-packages.html#cb86-1" aria-hidden="true" tabindex="-1"></a>airtemps <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">212</span>, <span class="fl">30.3</span>, <span class="dv">78</span>, <span class="dv">32</span>)</span>
<span id="cb86-2"><a href="session-7-functions-and-packages.html#cb86-2" aria-hidden="true" tabindex="-1"></a>celsius1 <span class="ot">&lt;-</span> (airtemps[<span class="dv">1</span>]<span class="sc">-</span><span class="dv">32</span>)<span class="sc">*</span><span class="dv">5</span><span class="sc">/</span><span class="dv">9</span></span>
<span id="cb86-3"><a href="session-7-functions-and-packages.html#cb86-3" aria-hidden="true" tabindex="-1"></a>celsius2 <span class="ot">&lt;-</span> (airtemps[<span class="dv">2</span>]<span class="sc">-</span><span class="dv">32</span>)<span class="sc">*</span><span class="dv">5</span><span class="sc">/</span><span class="dv">9</span></span>
<span id="cb86-4"><a href="session-7-functions-and-packages.html#cb86-4" aria-hidden="true" tabindex="-1"></a>celsius3 <span class="ot">&lt;-</span> (airtemps[<span class="dv">3</span>]<span class="sc">-</span><span class="dv">32</span>)<span class="sc">*</span><span class="dv">5</span><span class="sc">/</span><span class="dv">9</span></span></code></pre></div>
<p>Note the duplicated code, where the same formula is repeated three times. This
code would be both more compact and more reliable if we didn’t repeat ourselves.</p>
</div>
<div id="creating-a-function" class="section level4 unnumbered">
<h4>Creating a function</h4>
<p>Functions in R are a mechanism to process some input and return a value. Similarly
to other variables, functions can be assigned to a variable so that they can be used
throughout code by reference. To create a function in R, you use the <code>function</code> function (so meta!) and assign its result to a variable. Let’s create a function that calculates
celsius temperature outputs from fahrenheit temperature inputs.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="session-7-functions-and-packages.html#cb87-1" aria-hidden="true" tabindex="-1"></a>fahr_to_celsius <span class="ot">&lt;-</span> <span class="cf">function</span>(fahr) {</span>
<span id="cb87-2"><a href="session-7-functions-and-packages.html#cb87-2" aria-hidden="true" tabindex="-1"></a>  celsius <span class="ot">&lt;-</span> (fahr<span class="dv">-32</span>)<span class="sc">*</span><span class="dv">5</span><span class="sc">/</span><span class="dv">9</span></span>
<span id="cb87-3"><a href="session-7-functions-and-packages.html#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(celsius)</span>
<span id="cb87-4"><a href="session-7-functions-and-packages.html#cb87-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>By running this code, we have created a function and stored it in R’s global environment. The <code>fahr</code> argument to the <code>function</code> function indicates that the function we are creating takes a single parameter (the temperature in fahrenheit), and the <code>return</code> statement indicates that the function should return the value in the <code>celsius</code> variable that was calculated inside the function. Let’s use it, and check if we got the same value as before:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="session-7-functions-and-packages.html#cb88-1" aria-hidden="true" tabindex="-1"></a>celsius4 <span class="ot">&lt;-</span> <span class="fu">fahr_to_celsius</span>(airtemps[<span class="dv">1</span>])</span>
<span id="cb88-2"><a href="session-7-functions-and-packages.html#cb88-2" aria-hidden="true" tabindex="-1"></a>celsius4</span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="session-7-functions-and-packages.html#cb90-1" aria-hidden="true" tabindex="-1"></a>celsius1 <span class="sc">==</span> celsius4</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Excellent. So now we have a conversion function we can use. Note that, because
most operations in R can take multiple types as inputs, we can also pass the original vector of <code>airtemps</code>, and calculate all of the results at once:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="session-7-functions-and-packages.html#cb92-1" aria-hidden="true" tabindex="-1"></a>celsius <span class="ot">&lt;-</span> <span class="fu">fahr_to_celsius</span>(airtemps)</span>
<span id="cb92-2"><a href="session-7-functions-and-packages.html#cb92-2" aria-hidden="true" tabindex="-1"></a>celsius</span></code></pre></div>
<pre><code>## [1] 100.0000000  -0.9444444  25.5555556   0.0000000</code></pre>
<p>This takes a vector of temperatures in fahrenheit, and returns a vector of temperatures in celsius.</p>
</div>
<div id="challenge-17" class="section level4 unnumbered exercise">
<h4>Challenge</h4>
<p>Now, create a function named <code>celsius_to_fahr</code> that does the reverse, it takes temperature data in celsius as input, and returns the data converted to fahrenheit. Then use that formula to convert the <code>celsius</code> vector back into a vector of fahrenheit values, and compare it to the original <code>airtemps</code> vector to ensure that your answers are correct. Hint: the formula for C to F conversions is <code>celsius*9/5 + 32</code>.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="session-7-functions-and-packages.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Your code goes here</span></span></code></pre></div>
<p>Did you encounter any issues with rounding or precision?</p>
</div>
</div>
<div id="documenting-r-functions" class="section level3" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Documenting R functions</h3>
<p>Functions need documentation so that we can communicate what they do, and why. The <code>roxygen2</code> package provides a simple means to document your functions so that you can explain what the function does, the assumptions about the input values, a description of the value that is returned, and the rationale for decisions made about implementation.</p>
<p>Documentation in ROxygen is placed immediately before the function definition, and is indicated by a special comment line that always starts with the characters <code>#'</code>. Here’s a documented version of a function:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="session-7-functions-and-packages.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Convert temperature data from Fahrenheit to Celsius</span></span>
<span id="cb95-2"><a href="session-7-functions-and-packages.html#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb95-3"><a href="session-7-functions-and-packages.html#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param fahr Temperature data in degrees Fahrenheit to be converted</span></span>
<span id="cb95-4"><a href="session-7-functions-and-packages.html#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return temperature value in degrees Celsius</span></span>
<span id="cb95-5"><a href="session-7-functions-and-packages.html#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @keywords conversion</span></span>
<span id="cb95-6"><a href="session-7-functions-and-packages.html#cb95-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb95-7"><a href="session-7-functions-and-packages.html#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb95-8"><a href="session-7-functions-and-packages.html#cb95-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; fahr_to_celsius(32)</span></span>
<span id="cb95-9"><a href="session-7-functions-and-packages.html#cb95-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; fahr_to_celsius(c(32, 212, 72))</span></span>
<span id="cb95-10"><a href="session-7-functions-and-packages.html#cb95-10" aria-hidden="true" tabindex="-1"></a>fahr_to_celsius <span class="ot">&lt;-</span> <span class="cf">function</span>(fahr) {</span>
<span id="cb95-11"><a href="session-7-functions-and-packages.html#cb95-11" aria-hidden="true" tabindex="-1"></a>  celsius <span class="ot">&lt;-</span> (fahr<span class="dv">-32</span>)<span class="sc">*</span><span class="dv">5</span><span class="sc">/</span><span class="dv">9</span></span>
<span id="cb95-12"><a href="session-7-functions-and-packages.html#cb95-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(celsius)</span>
<span id="cb95-13"><a href="session-7-functions-and-packages.html#cb95-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Note the use of the <code>@param</code> keyword to define the expectations of input data, and the <code>@return</code> keyword for defining the value that is returned from the function. The <code>@examples</code> function is useful as a reminder as to how to use the function. Finally, the <code>@export</code> keyword indicates that, if this function were added to a package, then the function should be available to other code and packages to utilize.</p>
</div>
<div id="summary-3" class="section level3" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> Summary</h3>
<ul>
<li>Functions are useful to reduce redundancy, reuse code, and reduce errors</li>
<li>Build functions with the <code>function</code> function</li>
<li>Document functions with <code>roxygen2</code> comments</li>
</ul>
<div id="spoiler-the-exercise-answered" class="section level4 unnumbered">
<h4>Spoiler – the exercise answered</h4>
<p>Don’t peek until you write your own…</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="session-7-functions-and-packages.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Your code goes here</span></span>
<span id="cb96-2"><a href="session-7-functions-and-packages.html#cb96-2" aria-hidden="true" tabindex="-1"></a>celsius_to_fahr <span class="ot">&lt;-</span> <span class="cf">function</span>(celsius) {</span>
<span id="cb96-3"><a href="session-7-functions-and-packages.html#cb96-3" aria-hidden="true" tabindex="-1"></a>    fahr <span class="ot">&lt;-</span> celsius<span class="sc">*</span><span class="dv">9</span><span class="sc">/</span><span class="dv">5</span> <span class="sc">+</span> <span class="dv">32</span></span>
<span id="cb96-4"><a href="session-7-functions-and-packages.html#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(fahr)</span>
<span id="cb96-5"><a href="session-7-functions-and-packages.html#cb96-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb96-6"><a href="session-7-functions-and-packages.html#cb96-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-7"><a href="session-7-functions-and-packages.html#cb96-7" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">celsius_to_fahr</span>(celsius)</span>
<span id="cb96-8"><a href="session-7-functions-and-packages.html#cb96-8" aria-hidden="true" tabindex="-1"></a>airtemps <span class="sc">==</span> result</span></code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<div id="examples-minimizing-work-with-functions" class="section level3" number="7.1.4">
<h3><span class="header-section-number">7.1.4</span> Examples: Minimizing work with functions</h3>
<p>Functions can of course be as simple or complex as needed. They can be be very effective
in repeatedly performing calculations, or for bundling a group of commands that are used
on many different input data sources. For example, we might create a simple function that
takes fahrenheit temperatures as input, and calculates both celsius and Kelvin temperatures.
All three values are then returned in a list, making it very easy to create a comparison
table among the three scales.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="session-7-functions-and-packages.html#cb98-1" aria-hidden="true" tabindex="-1"></a>convert_temps <span class="ot">&lt;-</span> <span class="cf">function</span>(fahr) {</span>
<span id="cb98-2"><a href="session-7-functions-and-packages.html#cb98-2" aria-hidden="true" tabindex="-1"></a>  celsius <span class="ot">&lt;-</span> (fahr<span class="dv">-32</span>)<span class="sc">*</span><span class="dv">5</span><span class="sc">/</span><span class="dv">9</span></span>
<span id="cb98-3"><a href="session-7-functions-and-packages.html#cb98-3" aria-hidden="true" tabindex="-1"></a>  kelvin <span class="ot">&lt;-</span> celsius <span class="sc">+</span> <span class="fl">273.15</span></span>
<span id="cb98-4"><a href="session-7-functions-and-packages.html#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">fahr=</span>fahr, <span class="at">celsius=</span>celsius, <span class="at">kelvin=</span>kelvin))</span>
<span id="cb98-5"><a href="session-7-functions-and-packages.html#cb98-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb98-6"><a href="session-7-functions-and-packages.html#cb98-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-7"><a href="session-7-functions-and-packages.html#cb98-7" aria-hidden="true" tabindex="-1"></a>temps_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">convert_temps</span>(<span class="fu">seq</span>(<span class="sc">-</span><span class="dv">100</span>,<span class="dv">100</span>,<span class="dv">10</span>)))</span></code></pre></div>
<div id="htmlwidget-dfb9e06a14d7ec740f0c" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-dfb9e06a14d7ec740f0c">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21"],[-100,-90,-80,-70,-60,-50,-40,-30,-20,-10,0,10,20,30,40,50,60,70,80,90,100],[-73.3333333333333,-67.7777777777778,-62.2222222222222,-56.6666666666667,-51.1111111111111,-45.5555555555556,-40,-34.4444444444444,-28.8888888888889,-23.3333333333333,-17.7777777777778,-12.2222222222222,-6.66666666666667,-1.11111111111111,4.44444444444444,10,15.5555555555556,21.1111111111111,26.6666666666667,32.2222222222222,37.7777777777778],[199.816666666667,205.372222222222,210.927777777778,216.483333333333,222.038888888889,227.594444444444,233.15,238.705555555556,244.261111111111,249.816666666667,255.372222222222,260.927777777778,266.483333333333,272.038888888889,277.594444444444,283.15,288.705555555556,294.261111111111,299.816666666667,305.372222222222,310.927777777778]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>fahr<\/th>\n      <th>celsius<\/th>\n      <th>kelvin<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Once we have a dataset like that, we might want to plot it. One thing that we do
repeatedly is set a consistent set of display elements for creating graphs and plots.
By using a function to create a custom <code>ggplot</code> theme, we can enable to keep key
parts of the formatting flexible. FOr example, in the <code>custom_theme</code> function,
we provide a <code>base_size</code> argument that defaults to using a font size of 9 points.
Because it has a default set, it can safely be omitted. But if it is provided,
then that value is used to set the base font size for the plot.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="session-7-functions-and-packages.html#cb99-1" aria-hidden="true" tabindex="-1"></a>custom_theme <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">base_size =</span> <span class="dv">9</span>) {</span>
<span id="cb99-2"><a href="session-7-functions-and-packages.html#cb99-2" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb99-3"><a href="session-7-functions-and-packages.html#cb99-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks       =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb99-4"><a href="session-7-functions-and-packages.html#cb99-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">text             =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">&#39;Helvetica&#39;</span>, <span class="at">color =</span> <span class="st">&#39;gray30&#39;</span>, <span class="at">size =</span> base_size),</span>
<span id="cb99-5"><a href="session-7-functions-and-packages.html#cb99-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title       =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> ggplot2<span class="sc">::</span><span class="fu">rel</span>(<span class="fl">1.25</span>), <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">&#39;bold&#39;</span>),</span>
<span id="cb99-6"><a href="session-7-functions-and-packages.html#cb99-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb99-7"><a href="session-7-functions-and-packages.html#cb99-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position  =</span> <span class="st">&#39;right&#39;</span>,</span>
<span id="cb99-8"><a href="session-7-functions-and-packages.html#cb99-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.border     =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb99-9"><a href="session-7-functions-and-packages.html#cb99-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb99-10"><a href="session-7-functions-and-packages.html#cb99-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> ggplot2<span class="sc">::</span><span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">size =</span> .<span class="dv">25</span>),</span>
<span id="cb99-11"><a href="session-7-functions-and-packages.html#cb99-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key       =</span> ggplot2<span class="sc">::</span><span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="cn">NA</span>, <span class="at">fill =</span> <span class="cn">NA</span>),</span>
<span id="cb99-12"><a href="session-7-functions-and-packages.html#cb99-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.line        =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>()</span>
<span id="cb99-13"><a href="session-7-functions-and-packages.html#cb99-13" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb99-14"><a href="session-7-functions-and-packages.html#cb99-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb99-15"><a href="session-7-functions-and-packages.html#cb99-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-16"><a href="session-7-functions-and-packages.html#cb99-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb99-17"><a href="session-7-functions-and-packages.html#cb99-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-18"><a href="session-7-functions-and-packages.html#cb99-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(temps_df, <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>fahr, <span class="at">y=</span>celsius, <span class="at">color=</span>kelvin)) <span class="sc">+</span></span>
<span id="cb99-19"><a href="session-7-functions-and-packages.html#cb99-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb99-20"><a href="session-7-functions-and-packages.html#cb99-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">custom_theme</span>(<span class="dv">10</span>)</span></code></pre></div>
<p><img src="reproducible-research-short-course_files/figure-html/unnamed-chunk-71-1.png" width="672" /></p>
<p>In this case, we set the font size to 10, and plotted the air temperatures. The <code>custom_theme</code>
function can be used anywhere that one needs to consistently format a plot.</p>
<p>But we can go further. One can wrap the entire call to ggplot in a function,
enabling one to create many plots of the same type with a consistent structure. For
example, we can create a <code>scatterplot</code> function that takes a data frame as input,
along with a point_size for the points on the plot, and a font_size for the text.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="session-7-functions-and-packages.html#cb100-1" aria-hidden="true" tabindex="-1"></a>scatterplot <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">point_size =</span> <span class="dv">2</span>, <span class="at">font_size=</span><span class="dv">9</span>) {</span>
<span id="cb100-2"><a href="session-7-functions-and-packages.html#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(df, <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>fahr, <span class="at">y=</span>celsius, <span class="at">color=</span>kelvin)) <span class="sc">+</span></span>
<span id="cb100-3"><a href="session-7-functions-and-packages.html#cb100-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size=</span>point_size) <span class="sc">+</span></span>
<span id="cb100-4"><a href="session-7-functions-and-packages.html#cb100-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">custom_theme</span>(font_size)</span>
<span id="cb100-5"><a href="session-7-functions-and-packages.html#cb100-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Calling that let’s us, in a single line of code, create a highly customized plot
but maintain flexibiity via the arguments passed in to the function. Let’s set
the point size to 3 and font to 16 to make the plot more legible.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="session-7-functions-and-packages.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">scatterplot</span>(temps_df, <span class="at">point_size=</span><span class="dv">3</span>, <span class="at">font_size =</span> <span class="dv">16</span>)</span></code></pre></div>
<p><img src="reproducible-research-short-course_files/figure-html/unnamed-chunk-73-1.png" width="672" /></p>
<p>Once these functions are set up, all of the plots built with them can be reformatted
by changing the settings in just the functions, whether they were used to
create 1, 10, or 100 plots.</p>
</div>
</div>
<div id="creating-r-packages" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Creating R Packages</h2>
<div id="learning-objectives-7" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Learning Objectives</h3>
<p>In this lesson, you will learn:</p>
<ul>
<li>The advantages of using R packages for organizing code</li>
<li>Simple techniques for creating R packages</li>
<li>Approaches to documenting code in packages</li>
</ul>
</div>
<div id="why-packages" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Why packages?</h3>
<p>Most R users are familiar with loading and utilizing packages in their work. And they know how rich CRAN is in providing for many conceivable needs. Most people have never created a package for their own work, and most think the process is too complicated. Really it’s pretty straighforward and super useful in your personal work. Creating packages serves two main use cases:</p>
<ul>
<li>Mechanism to redistribute reusable code (even if just for yourself)</li>
<li>Mechanism to reproducibly document analysis and models and their results</li>
</ul>
<p>Even if you don’t plan on writing a package with such broad appeal such as, say, <code>ggplot2</code> or <code>dplyr</code>, you still might consider creating a package to contain:</p>
<ul>
<li>Useful utility functions you write i.e. a <a href="https://hilaryparker.com/2013/04/03/personal-r-packages/">Personal Package</a>. Having a place to put these functions makes it much easier to find and use them later.</li>
<li>A set of shared routines for your lab or research group, making it easier to remain consistent within your team and also to save time.</li>
<li>The analysis accompanying a thesis or manuscript, making it all that much easier for others to reproduce your results.</li>
</ul>
<p>The <code>usethis</code>, <code>devtools</code> and <code>roxygen2</code> packages make creating and maintining a package to be a straightforward experience.</p>
</div>
<div id="install-and-load-packages" class="section level3" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Install and load packages</h3>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="session-7-functions-and-packages.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb102-2"><a href="session-7-functions-and-packages.html#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usethis)</span>
<span id="cb102-3"><a href="session-7-functions-and-packages.html#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(roxygen2)</span></code></pre></div>
</div>
<div id="create-a-basic-package" class="section level3" number="7.2.4">
<h3><span class="header-section-number">7.2.4</span> Create a basic package</h3>
<p>Thanks to the great <a href="https://github.com/r-lib/usethis">usethis</a> package, it only takes one function call to create the skeleton of an R package using <code>create_package()</code>. Which eliminates pretty much all reasons for procrastination. To create a package called
<code>mytools</code>, all you do is:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="session-7-functions-and-packages.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&#39;..&#39;</span>)</span>
<span id="cb103-2"><a href="session-7-functions-and-packages.html#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">create_package</span>(<span class="st">&quot;mytools&quot;</span>)</span></code></pre></div>
<pre><code>✔ Setting active project to &#39;/Users/jones/development/mytools&#39;
✔ Creating &#39;R/&#39;
✔ Creating &#39;man/&#39;
✔ Writing &#39;DESCRIPTION&#39;
✔ Writing &#39;NAMESPACE&#39;
✔ Writing &#39;mytools.Rproj&#39;
✔ Adding &#39;.Rproj.user&#39; to &#39;.gitignore&#39;
✔ Adding &#39;^mytools\\.Rproj$&#39;, &#39;^\\.Rproj\\.user$&#39; to &#39;.Rbuildignore&#39;
✔ Opening new project &#39;mytools&#39; in RStudio</code></pre>
<p>Note that this will open a new project (<code>mytools</code>) and a new session in RStudio server.</p>
<p>The <code>create_package</code> function created a top-level directory structure, including a number of critical files under the <a href="http://cran.r-project.org/doc/manuals/r-release/R-exts.html#Package-structure">standard R package structure</a>. The most important of which is the <code>DESCRIPTION</code> file, which provides metadata about your package. Edit the <code>DESCRIPTION</code> file to provide reasonable values for each of the fields,
including your own contact information.</p>
<p>Information about choosing a LICENSE is provided in the <a href="http://cran.r-project.org/doc/manuals/r-release/R-exts.html#Licensing">Extending R</a> documentation.
The DESCRIPTION file expects the license to be chose from a predefined list, but
you can use it’s various utility methods for setting a specific license file, such
as the <code>Apacxhe 2</code> license:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="session-7-functions-and-packages.html#cb105-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_apl2_license</span>(<span class="at">name=</span><span class="st">&quot;Matthew Jones&quot;</span>)</span></code></pre></div>
<pre><code>✔ Setting License field in DESCRIPTION to &#39;Apache License (&gt;= 2.0)&#39;
✔ Writing &#39;LICENSE.md&#39;
✔ Adding &#39;^LICENSE\\.md$&#39; to &#39;.Rbuildignore&#39;</code></pre>
<p>Once your license has been chosen, and you’ve edited your DESCRIPTION file with your contact information, a title, and a description, it will look like this:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="session-7-functions-and-packages.html#cb107-1" aria-hidden="true" tabindex="-1"></a>Package<span class="sc">:</span> mytools</span>
<span id="cb107-2"><a href="session-7-functions-and-packages.html#cb107-2" aria-hidden="true" tabindex="-1"></a>Title<span class="sc">:</span> Utility Functions Created by Matt Jones</span>
<span id="cb107-3"><a href="session-7-functions-and-packages.html#cb107-3" aria-hidden="true" tabindex="-1"></a>Version<span class="sc">:</span> <span class="fl">0.1</span></span>
<span id="cb107-4"><a href="session-7-functions-and-packages.html#cb107-4" aria-hidden="true" tabindex="-1"></a>Authors<span class="sc">@</span>R<span class="sc">:</span> <span class="st">&quot;Matthew Jones &lt;jones@nceas.ucsb.edu&gt; [aut, cre]&quot;</span></span>
<span id="cb107-5"><a href="session-7-functions-and-packages.html#cb107-5" aria-hidden="true" tabindex="-1"></a>Description<span class="sc">:</span> Package mytools contains a suite of utility functions useful whenever I need stuff to get done.</span>
<span id="cb107-6"><a href="session-7-functions-and-packages.html#cb107-6" aria-hidden="true" tabindex="-1"></a>Depends<span class="sc">:</span> <span class="fu">R</span> (<span class="sc">&gt;=</span> <span class="dv">3</span>.<span class="fl">5.0</span>)</span>
<span id="cb107-7"><a href="session-7-functions-and-packages.html#cb107-7" aria-hidden="true" tabindex="-1"></a>License<span class="sc">:</span> Apache <span class="fu">License</span> (<span class="sc">&gt;=</span> <span class="fl">2.0</span>)</span>
<span id="cb107-8"><a href="session-7-functions-and-packages.html#cb107-8" aria-hidden="true" tabindex="-1"></a>LazyData<span class="sc">:</span> true</span></code></pre></div>
</div>
<div id="add-your-code" class="section level3" number="7.2.5">
<h3><span class="header-section-number">7.2.5</span> Add your code</h3>
<p>The skeleton package created contains a directory <code>R</code> which should contain your source files. Add your functions and classes in files to this directory, attempting to choose names that don’t conflict with existing packages. For example, you might add a file <code>environemnt_info.R</code> that contains a function <code>environment_info()</code> that you might want to reuse. This one might leave something to be desired…, but you get the point… The
<code>usethis::use_r()</code> function will help set up you files in the right places. For example, running:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="session-7-functions-and-packages.html#cb108-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_r</span>(<span class="st">&quot;environment_info&quot;</span>)</span></code></pre></div>
<pre><code>● Modify &#39;R/environment_info.R&#39;</code></pre>
<p>creates the file <code>R/environment_info.R</code>, which you can then modify to add the implementation fo the following function:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="session-7-functions-and-packages.html#cb110-1" aria-hidden="true" tabindex="-1"></a>environment_info <span class="ot">&lt;-</span> <span class="cf">function</span>(msg) {</span>
<span id="cb110-2"><a href="session-7-functions-and-packages.html#cb110-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(devtools<span class="sc">::</span><span class="fu">session_info</span>())</span>
<span id="cb110-3"><a href="session-7-functions-and-packages.html#cb110-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Also print the incoming message: &quot;</span>, msg))</span>
<span id="cb110-4"><a href="session-7-functions-and-packages.html#cb110-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>If your R code depends on functions from another package, then you must declare so
in the <code>Imports</code> list in the <code>DESCRIPTION</code> file for your package. In our example
above, we depend on the <code>devtools</code> package, and so we need to list it as a dependency.
Once again, <code>usethis</code> provides a handy helper method:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="session-7-functions-and-packages.html#cb111-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">&quot;devtools&quot;</span>)</span></code></pre></div>
<pre><code>✔ Adding &#39;devtools&#39; to Imports field in DESCRIPTION
● Refer to functions with `devtools::fun()`</code></pre>
</div>
<div id="add-documentation" class="section level3" number="7.2.6">
<h3><span class="header-section-number">7.2.6</span> Add documentation</h3>
<p>You should provide documentation for each of your functions and classes. This is done in the <code>roxygen2</code> approach of providing embedded comments in the source code files, which are in turn converted into manual pages and other R documentation artifacts. Be sure to define the overall purpose of the function, and each of its parameters.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="session-7-functions-and-packages.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; A function to print information about the current environment.</span></span>
<span id="cb113-2"><a href="session-7-functions-and-packages.html#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb113-3"><a href="session-7-functions-and-packages.html#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; This function prints current environment information, and a message.</span></span>
<span id="cb113-4"><a href="session-7-functions-and-packages.html#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb113-5"><a href="session-7-functions-and-packages.html#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param msg The message that should be printed</span></span>
<span id="cb113-6"><a href="session-7-functions-and-packages.html#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb113-7"><a href="session-7-functions-and-packages.html#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @keywords debugging</span></span>
<span id="cb113-8"><a href="session-7-functions-and-packages.html#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb113-9"><a href="session-7-functions-and-packages.html#cb113-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb113-10"><a href="session-7-functions-and-packages.html#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb113-11"><a href="session-7-functions-and-packages.html#cb113-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb113-12"><a href="session-7-functions-and-packages.html#cb113-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; environment_info(&quot;This is an important message from your sponsor.&quot;)</span></span>
<span id="cb113-13"><a href="session-7-functions-and-packages.html#cb113-13" aria-hidden="true" tabindex="-1"></a>environment_info <span class="ot">&lt;-</span> <span class="cf">function</span>(msg) {</span>
<span id="cb113-14"><a href="session-7-functions-and-packages.html#cb113-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(devtools<span class="sc">::</span><span class="fu">session_info</span>())</span>
<span id="cb113-15"><a href="session-7-functions-and-packages.html#cb113-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Also print the incoming message: &quot;</span>, msg))</span>
<span id="cb113-16"><a href="session-7-functions-and-packages.html#cb113-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Once your files are documented, you can then process the documentation using the <code>document()</code> function to generate the appropriate .Rd files that your package needs.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="session-7-functions-and-packages.html#cb114-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">document</span>()</span></code></pre></div>
<pre><code>Updating mytools documentation
Updating roxygen version in /Users/jones/development/mytools/DESCRIPTION
Writing NAMESPACE
Loading mytools
Writing NAMESPACE
Writing environment_info.Rd</code></pre>
<p>That’s really it. You now have a package that you can <code>check()</code> and <code>install()</code> and <code>release()</code>. See below for these helper utilities.</p>
</div>
<div id="test-your-package" class="section level3" number="7.2.7">
<h3><span class="header-section-number">7.2.7</span> Test your package</h3>
<p>You can tests your code using the <code>tetsthat</code> testing framework. The <code>ussethis::use_testthat()</code>
function will set up your package for testing, and then you can use the <code>use_test()</code> function
to setup individual test files. For example, if you want to create tests of our
environment_info functions, set it up like this:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="session-7-functions-and-packages.html#cb116-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_testthat</span>()</span></code></pre></div>
<pre><code>✔ Adding &#39;testthat&#39; to Suggests field in DESCRIPTION
✔ Creating &#39;tests/testthat/&#39;
✔ Writing &#39;tests/testthat.R&#39;</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="session-7-functions-and-packages.html#cb118-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_test</span>(<span class="st">&quot;environment_info&quot;</span>)</span></code></pre></div>
<pre><code>✔ Writing &#39;tests/testthat/test-environment_info.R&#39;
● Modify &#39;tests/testthat/test-environment_info.R&#39;</code></pre>
<p>You can now add tests to the <code>test-environment_info.R</code>, and you can run all of the
tests using <code>devtools::test()</code>. For example, if you add a test to the <code>test-environment_info.R</code> file:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="session-7-functions-and-packages.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;A message is present&quot;</span>, {</span>
<span id="cb120-2"><a href="session-7-functions-and-packages.html#cb120-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">capture.output</span>(result <span class="ot">&lt;-</span> <span class="fu">environment_info</span>(<span class="st">&quot;A unique message&quot;</span>))</span>
<span id="cb120-3"><a href="session-7-functions-and-packages.html#cb120-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect_match</span>(result, <span class="st">&quot;A unique message&quot;</span>)</span>
<span id="cb120-4"><a href="session-7-functions-and-packages.html#cb120-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>Then you can run the tests to be sure all of your functions are working using <code>devtools::test()</code>:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="session-7-functions-and-packages.html#cb121-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">test</span>()</span></code></pre></div>
<pre><code>Loading mytools
Testing mytools
✔ | OK F W S | Context
✔ |  2       | test-environment_info [0.1 s]

══ Results ════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
Duration: 0.1 s

OK:       2
Failed:   0
Warnings: 0
Skipped:  0</code></pre>
<p>Yay, all tests passed!</p>
</div>
<div id="checking-and-installing-your-package" class="section level3" number="7.2.8">
<h3><span class="header-section-number">7.2.8</span> Checking and installing your package</h3>
<p>Now that your package is built, you can check it for consistency and completeness using <code>check()</code>, and then you can install it locally using <code>install()</code>, which needs to be run from the parent directory of your module.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="session-7-functions-and-packages.html#cb123-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">check</span>()</span>
<span id="cb123-2"><a href="session-7-functions-and-packages.html#cb123-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install</span>()</span></code></pre></div>
<p>Your package is now available for use in your local environment.</p>
</div>
<div id="sharing-and-releasing-your-package" class="section level3" number="7.2.9">
<h3><span class="header-section-number">7.2.9</span> Sharing and releasing your package</h3>
<p>The simplest way to share your package with others is to upload it to a <a href="https://github.com">GitHub repository</a>, which allows others to install your package using the <code>install_github('mytools','github_username')</code> function from <code>devtools</code>.</p>
<p>If your package might be broadly useful, also consider releasing it to CRAN, using the <code>release()</code> method from `devtools(). Releasing a package to CRAN requires a significant amoutn of work to ensure it follows the standards set by the R community, but it is entirely tractable and a valuable contribution to the science community. If you are considering releasing a package more broadly, you may find that the supportive community at <a href="https://ropensci.org">ROpenSci</a> provides incredible help and valuable feeback through their onboarding process.</p>
<div id="challenge-18" class="section level4 unnumbered exercise">
<h4>Challenge</h4>
<p>Add temperature conversion functions with full documentation to your package, write tests to ensure the functions work properly, and then
<code>document()</code>, <code>check()</code>, and <code>install()</code> the new version of the package. Don’t forget to update the version number before you install!</p>
</div>
</div>
<div id="more-reading" class="section level3" number="7.2.10">
<h3><span class="header-section-number">7.2.10</span> More reading</h3>
<ul>
<li>Hadley Wickham’s awesome book: <a href="http://r-pkgs.had.co.nz/">R Packages</a></li>
<li>Thomas Westlake’s blog <a href="https://r-mageddon.netlify.com/post/writing-an-r-package-from-scratch/">Writing an R package from scratch</a></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="session-6-collaboration-practices.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="session-8-hands-on-logic-models-and-synthesis-development.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
