<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>12 Exercise: Cleaning and Manipulating Data | Reproducible Practices for Arctic Research Using R</title>
  <meta name="description" content="12 Exercise: Cleaning and Manipulating Data | Reproducible Practices for Arctic Research Using R" />
  <meta name="generator" content="bookdown 0.24.1 and GitBook 2.6.7" />

  <meta property="og:title" content="12 Exercise: Cleaning and Manipulating Data | Reproducible Practices for Arctic Research Using R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="12 Exercise: Cleaning and Manipulating Data | Reproducible Practices for Arctic Research Using R" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-portals.html"/>
<link rel="next" href="geospatial-vector-analysis.html"/>
<script src="libs/header-attrs-2.19/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.19/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#reproducible-research-techniques-for-synthesis" id="toc-reproducible-research-techniques-for-synthesis">Reproducible Practices for Arctic Research Using R</a>
<ul>
<li><a href="index.html#schedule" id="toc-schedule"><span class="toc-section-number">0.1</span> Schedule</a>
<ul>
<li><a href="index.html#code-of-conduct" id="toc-code-of-conduct"><span class="toc-section-number">0.1.1</span> Code of Conduct</a></li>
<li><a href="index.html#logistics" id="toc-logistics"><span class="toc-section-number">0.1.2</span> Logistics</a></li>
<li><a href="index.html#about-this-book" id="toc-about-this-book"><span class="toc-section-number">0.1.3</span> About this book</a></li>
</ul></li>
</ul></li>
<li><a href="welcome-and-introductions.html#welcome-and-introductions" id="toc-welcome-and-introductions"><span class="toc-section-number">1</span> Welcome and Introductions</a>
<ul>
<li><a href="welcome-and-introductions.html#introduction-to-the-arctic-data-center-and-nsf-standards-and-policies" id="toc-introduction-to-the-arctic-data-center-and-nsf-standards-and-policies"><span class="toc-section-number">1.1</span> Introduction to the Arctic Data Center and NSF Standards and Policies</a>
<ul>
<li><a href="welcome-and-introductions.html#learning-objectives" id="toc-learning-objectives"><span class="toc-section-number">1.1.1</span> Learning Objectives</a></li>
<li><a href="welcome-and-introductions.html#arctic-data-center---history-and-introduction" id="toc-arctic-data-center---history-and-introduction"><span class="toc-section-number">1.1.2</span> Arctic Data Center - History and Introduction</a></li>
<li><a href="welcome-and-introductions.html#data-discovery-portal" id="toc-data-discovery-portal"><span class="toc-section-number">1.1.3</span> Data Discovery Portal</a></li>
<li><a href="welcome-and-introductions.html#tools-and-infrastructure" id="toc-tools-and-infrastructure"><span class="toc-section-number">1.1.4</span> Tools and Infrastructure</a></li>
<li><a href="welcome-and-introductions.html#support-services" id="toc-support-services"><span class="toc-section-number">1.1.5</span> Support Services</a></li>
<li><a href="welcome-and-introductions.html#training-and-outreach" id="toc-training-and-outreach"><span class="toc-section-number">1.1.6</span> Training and Outreach</a></li>
<li><a href="welcome-and-introductions.html#data-rescue" id="toc-data-rescue"><span class="toc-section-number">1.1.7</span> Data Rescue</a></li>
<li><a href="welcome-and-introductions.html#who-must-submit" id="toc-who-must-submit"><span class="toc-section-number">1.1.8</span> Who Must Submit</a></li>
<li><a href="welcome-and-introductions.html#summary" id="toc-summary"><span class="toc-section-number">1.1.9</span> Summary</a></li>
</ul></li>
<li><a href="welcome-and-introductions.html#writing-good-data-management-plans" id="toc-writing-good-data-management-plans"><span class="toc-section-number">1.2</span> Writing Good Data Management Plans</a>
<ul>
<li><a href="welcome-and-introductions.html#learning-objectives-1" id="toc-learning-objectives-1"><span class="toc-section-number">1.2.1</span> Learning Objectives</a></li>
<li><a href="welcome-and-introductions.html#when-to-plan-the-data-life-cycle" id="toc-when-to-plan-the-data-life-cycle"><span class="toc-section-number">1.2.2</span> When to Plan: The Data Life Cycle</a></li>
<li><a href="welcome-and-introductions.html#why-plan" id="toc-why-plan"><span class="toc-section-number">1.2.3</span> Why Plan?</a></li>
<li><a href="welcome-and-introductions.html#how-to-plan" id="toc-how-to-plan"><span class="toc-section-number">1.2.4</span> How to Plan</a></li>
<li><a href="welcome-and-introductions.html#what-to-include-in-a-dmp" id="toc-what-to-include-in-a-dmp"><span class="toc-section-number">1.2.5</span> What to include in a DMP</a></li>
<li><a href="welcome-and-introductions.html#nsf-dmp-requirements" id="toc-nsf-dmp-requirements"><span class="toc-section-number">1.2.6</span> NSF DMP requirements</a></li>
<li><a href="welcome-and-introductions.html#tools-in-support-of-creating-a-dmp" id="toc-tools-in-support-of-creating-a-dmp"><span class="toc-section-number">1.2.7</span> Tools in Support of Creating a DMP</a></li>
<li><a href="welcome-and-introductions.html#arctic-data-center-support-for-dmps" id="toc-arctic-data-center-support-for-dmps"><span class="toc-section-number">1.2.8</span> Arctic Data Center Support for DMPs</a></li>
<li><a href="welcome-and-introductions.html#sharing-your-dmp" id="toc-sharing-your-dmp"><span class="toc-section-number">1.2.9</span> Sharing Your DMP</a></li>
<li><a href="welcome-and-introductions.html#additional-resources" id="toc-additional-resources"><span class="toc-section-number">1.2.10</span> Additional Resources</a></li>
</ul></li>
</ul></li>
<li><a href="documenting-and-publishing-data.html#documenting-and-publishing-data" id="toc-documenting-and-publishing-data"><span class="toc-section-number">2</span> Documenting and Publishing Data</a>
<ul>
<li><a href="documenting-and-publishing-data.html#data-documentation-and-publishing" id="toc-data-documentation-and-publishing"><span class="toc-section-number">2.1</span> Data Documentation and Publishing</a>
<ul>
<li><a href="documenting-and-publishing-data.html#learning-objectives-2" id="toc-learning-objectives-2"><span class="toc-section-number">2.1.1</span> Learning Objectives</a></li>
<li><a href="documenting-and-publishing-data.html#data-sharing-and-preservation" id="toc-data-sharing-and-preservation"><span class="toc-section-number">2.1.2</span> Data sharing and preservation</a></li>
<li><a href="documenting-and-publishing-data.html#data-repositories-built-for-data-and-code" id="toc-data-repositories-built-for-data-and-code"><span class="toc-section-number">2.1.3</span> Data repositories: built for data (and code)</a></li>
<li><a href="documenting-and-publishing-data.html#metadata" id="toc-metadata"><span class="toc-section-number">2.1.4</span> Metadata</a></li>
<li><a href="documenting-and-publishing-data.html#structure-of-a-data-package" id="toc-structure-of-a-data-package"><span class="toc-section-number">2.1.5</span> Structure of a data package</a></li>
<li><a href="documenting-and-publishing-data.html#dataone-federation" id="toc-dataone-federation"><span class="toc-section-number">2.1.6</span> DataONE Federation</a></li>
<li><a href="documenting-and-publishing-data.html#publishing-data-from-the-web" id="toc-publishing-data-from-the-web"><span class="toc-section-number">2.1.7</span> Publishing data from the web</a></li>
</ul></li>
</ul></li>
<li><a href="literate-analysis-with-rmarkdown.html#literate-analysis-with-rmarkdown" id="toc-literate-analysis-with-rmarkdown"><span class="toc-section-number">3</span> Literate Analysis with RMarkdown</a>
<ul>
<li><a href="literate-analysis-with-rmarkdown.html#rstudio-setup" id="toc-rstudio-setup"><span class="toc-section-number">3.1</span> RStudio Setup</a>
<ul>
<li><a href="literate-analysis-with-rmarkdown.html#learning-objectives-3" id="toc-learning-objectives-3"><span class="toc-section-number">3.1.1</span> Learning Objectives</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#logging-into-the-rstudio-server" id="toc-logging-into-the-rstudio-server"><span class="toc-section-number">3.1.2</span> Logging into the RStudio server</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#why-use-an-r-project" id="toc-why-use-an-r-project"><span class="toc-section-number">3.1.3</span> Why use an R project?</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#understand-how-to-use-paths-and-working-directories" id="toc-understand-how-to-use-paths-and-working-directories"><span class="toc-section-number">3.1.4</span> Understand how to use paths and working directories</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#organizing-your-project" id="toc-organizing-your-project"><span class="toc-section-number">3.1.5</span> Organizing your project</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#summary-1" id="toc-summary-1"><span class="toc-section-number">3.1.6</span> Summary</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#setting-up-git" id="toc-setting-up-git"><span class="toc-section-number">3.1.7</span> Setting up git</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#github-authentication" id="toc-github-authentication"><span class="toc-section-number">3.1.8</span> GitHub Authentication</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#setting-up-the-r-environment-on-your-local-computer" id="toc-setting-up-the-r-environment-on-your-local-computer"><span class="toc-section-number">3.1.9</span> Setting up the R environment on your local computer</a></li>
</ul></li>
<li><a href="literate-analysis-with-rmarkdown.html#literate-analysis-with-rmarkdown-1" id="toc-literate-analysis-with-rmarkdown-1"><span class="toc-section-number">3.2</span> Literate Analysis with RMarkdown</a>
<ul>
<li><a href="literate-analysis-with-rmarkdown.html#learning-objectives-4" id="toc-learning-objectives-4"><span class="toc-section-number">3.2.1</span> Learning Objectives</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#introduction-and-motivation" id="toc-introduction-and-motivation"><span class="toc-section-number">3.2.2</span> Introduction and motivation</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#basic-rmarkdown-syntax" id="toc-basic-rmarkdown-syntax"><span class="toc-section-number">3.2.3</span> Basic RMarkdown syntax</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#code-chunks" id="toc-code-chunks"><span class="toc-section-number">3.2.4</span> Code chunks</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#literate-analysis-practice" id="toc-literate-analysis-practice"><span class="toc-section-number">3.2.5</span> Literate analysis practice</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#rmarkdown-and-environments" id="toc-rmarkdown-and-environments"><span class="toc-section-number">3.2.6</span> RMarkdown and environments</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#go-further" id="toc-go-further"><span class="toc-section-number">3.2.7</span> Go Further</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#resources" id="toc-resources"><span class="toc-section-number">3.2.8</span> Resources</a></li>
<li><a href="literate-analysis-with-rmarkdown.html#troubleshooting" id="toc-troubleshooting"><span class="toc-section-number">3.2.9</span> Troubleshooting</a></li>
</ul></li>
</ul></li>
<li><a href="version-control-with-git-and-github.html#version-control-with-git-and-github" id="toc-version-control-with-git-and-github"><span class="toc-section-number">4</span> Version Control with git and GitHub</a>
<ul>
<li><a href="version-control-with-git-and-github.html#learning-objectives-5" id="toc-learning-objectives-5"><span class="toc-section-number">4.1</span> Learning Objectives</a></li>
<li><a href="version-control-with-git-and-github.html#introduction-to-git" id="toc-introduction-to-git"><span class="toc-section-number">4.2</span> Introduction to <code>Git</code></a>
<ul>
<li><a href="version-control-with-git-and-github.html#a-motivating-example" id="toc-a-motivating-example"><span class="toc-section-number">4.2.1</span> A Motivating Example</a></li>
<li><a href="version-control-with-git-and-github.html#version-control-and-collaboration-using-git-and-github" id="toc-version-control-and-collaboration-using-git-and-github"><span class="toc-section-number">4.2.2</span> Version control and Collaboration using <code>Git</code> and GitHub</a></li>
<li><a href="version-control-with-git-and-github.html#lets-look-at-a-github-repository" id="toc-lets-look-at-a-github-repository"><span class="toc-section-number">4.2.3</span> Let’s look at a GitHub repository</a></li>
<li><a href="version-control-with-git-and-github.html#the-git-lifecycle" id="toc-the-git-lifecycle"><span class="toc-section-number">4.2.4</span> The <code>Git</code> Lifecycle</a></li>
</ul></li>
<li><a href="version-control-with-git-and-github.html#create-a-remote-repository-on-github" id="toc-create-a-remote-repository-on-github"><span class="toc-section-number">4.3</span> Create a remote repository on GitHub</a>
<ul>
<li><a href="version-control-with-git-and-github.html#setup-2" id="toc-setup-2">Setup</a></li>
<li><a href="version-control-with-git-and-github.html#section-6" id="toc-section-6"></a></li>
<li><a href="version-control-with-git-and-github.html#challenge-5" id="toc-challenge-5">Challenge</a></li>
<li><a href="version-control-with-git-and-github.html#section-7" id="toc-section-7"></a></li>
</ul></li>
<li><a href="version-control-with-git-and-github.html#working-locally-with-git-via-rstudio" id="toc-working-locally-with-git-via-rstudio"><span class="toc-section-number">4.4</span> Working locally with <code>Git</code> via RStudio</a>
<ul>
<li><a href="version-control-with-git-and-github.html#setup-3" id="toc-setup-3">Setup</a></li>
<li><a href="version-control-with-git-and-github.html#section-8" id="toc-section-8"></a></li>
<li><a href="version-control-with-git-and-github.html#challenge-6" id="toc-challenge-6">Challenge</a></li>
<li><a href="version-control-with-git-and-github.html#section-9" id="toc-section-9"></a></li>
<li><a href="version-control-with-git-and-github.html#aside-3" id="toc-aside-3">Aside</a></li>
<li><a href="version-control-with-git-and-github.html#collaboration-and-conflict-free-workflows" id="toc-collaboration-and-conflict-free-workflows">Collaboration and conflict free workflows</a></li>
</ul></li>
<li><a href="version-control-with-git-and-github.html#setting-up-git-on-an-existing-project" id="toc-setting-up-git-on-an-existing-project"><span class="toc-section-number">4.5</span> Setting up Git on an existing project</a>
<ul>
<li><a href="version-control-with-git-and-github.html#challenge-7" id="toc-challenge-7">Challenge</a></li>
<li><a href="version-control-with-git-and-github.html#section-10" id="toc-section-10"></a></li>
<li><a href="version-control-with-git-and-github.html#challenge-8" id="toc-challenge-8">Challenge</a></li>
<li><a href="version-control-with-git-and-github.html#section-11" id="toc-section-11"></a></li>
</ul></li>
<li><a href="version-control-with-git-and-github.html#go-further-with-git" id="toc-go-further-with-git"><span class="toc-section-number">4.6</span> Go Further with <code>Git</code></a></li>
<li><a href="version-control-with-git-and-github.html#additional-git-resources" id="toc-additional-git-resources"><span class="toc-section-number">4.7</span> Additional <code>Git</code> Resources</a></li>
</ul></li>
<li><a href="git-collaboration-and-conflict-management.html#git-collaboration-and-conflict-management" id="toc-git-collaboration-and-conflict-management"><span class="toc-section-number">5</span> git Collaboration and Conflict Management</a>
<ul>
<li><a href="git-collaboration-and-conflict-management.html#learning-objectives-6" id="toc-learning-objectives-6"><span class="toc-section-number">5.1</span> Learning Objectives</a></li>
<li><a href="git-collaboration-and-conflict-management.html#introduction" id="toc-introduction"><span class="toc-section-number">5.2</span> Introduction</a></li>
<li><a href="git-collaboration-and-conflict-management.html#collaborating-with-a-trusted-colleague-without-conflicts" id="toc-collaborating-with-a-trusted-colleague-without-conflicts"><span class="toc-section-number">5.3</span> Collaborating with a trusted colleague <strong>without conflicts</strong></a>
<ul>
<li><a href="git-collaboration-and-conflict-management.html#setup-4" id="toc-setup-4">Setup</a></li>
<li><a href="git-collaboration-and-conflict-management.html#section-12" id="toc-section-12"></a></li>
<li><a href="git-collaboration-and-conflict-management.html#step-1-collaborator-clone" id="toc-step-1-collaborator-clone"><span class="toc-section-number">5.3.1</span> Step 1: Collaborator clone</a></li>
<li><a href="git-collaboration-and-conflict-management.html#step-2-collaborator-edits" id="toc-step-2-collaborator-edits"><span class="toc-section-number">5.3.2</span> Step 2: Collaborator Edits</a></li>
<li><a href="git-collaboration-and-conflict-management.html#step-3-collaborator-commit-and-push" id="toc-step-3-collaborator-commit-and-push"><span class="toc-section-number">5.3.3</span> Step 3: Collaborator commit and push</a></li>
<li><a href="git-collaboration-and-conflict-management.html#step-4-owner-pull" id="toc-step-4-owner-pull"><span class="toc-section-number">5.3.4</span> Step 4: Owner pull</a></li>
<li><a href="git-collaboration-and-conflict-management.html#step-5-owner-edits-commit-and-push" id="toc-step-5-owner-edits-commit-and-push"><span class="toc-section-number">5.3.5</span> Step 5: Owner edits, commit, and push</a></li>
<li><a href="git-collaboration-and-conflict-management.html#step-6-collaborator-pull" id="toc-step-6-collaborator-pull"><span class="toc-section-number">5.3.6</span> Step 6: Collaborator pull</a></li>
<li><a href="git-collaboration-and-conflict-management.html#challenge-9" id="toc-challenge-9">Challenge</a></li>
<li><a href="git-collaboration-and-conflict-management.html#section-13" id="toc-section-13"></a></li>
</ul></li>
<li><a href="git-collaboration-and-conflict-management.html#merge-conflicts" id="toc-merge-conflicts"><span class="toc-section-number">5.4</span> Merge conflicts</a></li>
<li><a href="git-collaboration-and-conflict-management.html#how-to-resolve-a-conflict" id="toc-how-to-resolve-a-conflict"><span class="toc-section-number">5.5</span> How to resolve a conflict</a>
<ul>
<li><a href="git-collaboration-and-conflict-management.html#abort-abort-abort" id="toc-abort-abort-abort">Abort, abort, abort…</a></li>
<li><a href="git-collaboration-and-conflict-management.html#checkout" id="toc-checkout">Checkout</a></li>
<li><a href="git-collaboration-and-conflict-management.html#pull-and-edit-the-file" id="toc-pull-and-edit-the-file">Pull and edit the file</a></li>
<li><a href="git-collaboration-and-conflict-management.html#producing-and-resolving-merge-conflicts" id="toc-producing-and-resolving-merge-conflicts"><span class="toc-section-number">5.5.1</span> Producing and resolving merge conflicts</a></li>
<li><a href="git-collaboration-and-conflict-management.html#merge-conflict-challenge" id="toc-merge-conflict-challenge">Merge Conflict Challenge</a></li>
<li><a href="git-collaboration-and-conflict-management.html#section-14" id="toc-section-14"></a></li>
</ul></li>
<li><a href="git-collaboration-and-conflict-management.html#workflows-to-avoid-merge-conflicts" id="toc-workflows-to-avoid-merge-conflicts"><span class="toc-section-number">5.6</span> Workflows to avoid merge conflicts</a></li>
</ul></li>
<li><a href="social-aspects-of-collaboration.html#social-aspects-of-collaboration" id="toc-social-aspects-of-collaboration"><span class="toc-section-number">6</span> Social Aspects of Collaboration</a>
<ul>
<li><a href="social-aspects-of-collaboration.html#thinking-preferences" id="toc-thinking-preferences"><span class="toc-section-number">6.1</span> Thinking preferences</a>
<ul>
<li><a href="social-aspects-of-collaboration.html#learning-objectives-7" id="toc-learning-objectives-7"><span class="toc-section-number">6.1.1</span> Learning Objectives</a></li>
<li><a href="social-aspects-of-collaboration.html#thinking-preferences-activity" id="toc-thinking-preferences-activity"><span class="toc-section-number">6.1.2</span> Thinking Preferences Activity</a></li>
<li><a href="social-aspects-of-collaboration.html#about-the-whole-brain-thinking-system" id="toc-about-the-whole-brain-thinking-system"><span class="toc-section-number">6.1.3</span> About the Whole Brain Thinking System</a></li>
</ul></li>
<li><a href="social-aspects-of-collaboration.html#developing-a-code-of-conduct" id="toc-developing-a-code-of-conduct"><span class="toc-section-number">6.2</span> Developing a Code of Conduct</a></li>
<li><a href="social-aspects-of-collaboration.html#authorship-and-credit-policies" id="toc-authorship-and-credit-policies"><span class="toc-section-number">6.3</span> Authorship and Credit Policies</a></li>
<li><a href="social-aspects-of-collaboration.html#data-sharing-and-reuse-policies" id="toc-data-sharing-and-reuse-policies"><span class="toc-section-number">6.4</span> Data Sharing and Reuse Policies</a>
<ul>
<li><a href="social-aspects-of-collaboration.html#community-principles-care-and-fair" id="toc-community-principles-care-and-fair"><span class="toc-section-number">6.4.1</span> Community Principles: CARE and FAIR</a></li>
</ul></li>
<li><a href="social-aspects-of-collaboration.html#research-data-publishing-ethics" id="toc-research-data-publishing-ethics"><span class="toc-section-number">6.5</span> Research Data Publishing Ethics</a>
<ul>
<li><a href="social-aspects-of-collaboration.html#discussion-data-publishing-policies" id="toc-discussion-data-publishing-policies">Discussion: Data publishing policies</a></li>
<li><a href="social-aspects-of-collaboration.html#section-16" id="toc-section-16"></a></li>
</ul></li>
<li><a href="social-aspects-of-collaboration.html#extra-reading" id="toc-extra-reading"><span class="toc-section-number">6.6</span> Extra Reading</a></li>
</ul></li>
<li><a href="data-modeling-essentials.html#data-modeling-essentials" id="toc-data-modeling-essentials"><span class="toc-section-number">7</span> Data Modeling Essentials</a>
<ul>
<li><a href="data-modeling-essentials.html#data-modeling-tidy-data" id="toc-data-modeling-tidy-data"><span class="toc-section-number">7.1</span> Data Modeling &amp; Tidy Data</a>
<ul>
<li><a href="data-modeling-essentials.html#learning-objectives-8" id="toc-learning-objectives-8"><span class="toc-section-number">7.1.1</span> Learning Objectives</a></li>
<li><a href="data-modeling-essentials.html#introduction-1" id="toc-introduction-1"><span class="toc-section-number">7.1.2</span> Introduction</a></li>
<li><a href="data-modeling-essentials.html#recognizing-untidy-data" id="toc-recognizing-untidy-data"><span class="toc-section-number">7.1.3</span> Recognizing untidy data</a></li>
<li><a href="data-modeling-essentials.html#good-enough-data-modeling" id="toc-good-enough-data-modeling"><span class="toc-section-number">7.1.4</span> Good enough data modeling</a></li>
<li><a href="data-modeling-essentials.html#using-normalized-data" id="toc-using-normalized-data"><span class="toc-section-number">7.1.5</span> Using normalized data</a></li>
<li><a href="data-modeling-essentials.html#data-modeling-exercise" id="toc-data-modeling-exercise"><span class="toc-section-number">7.1.6</span> Data modeling exercise</a></li>
<li><a href="data-modeling-essentials.html#resources-1" id="toc-resources-1"><span class="toc-section-number">7.1.7</span> Resources</a></li>
</ul></li>
</ul></li>
<li><a href="cleaning-and-manipulating-data.html#cleaning-and-manipulating-data" id="toc-cleaning-and-manipulating-data"><span class="toc-section-number">8</span> Cleaning and Manipulating Data</a>
<ul>
<li><a href="cleaning-and-manipulating-data.html#data-cleaning-and-manipulation" id="toc-data-cleaning-and-manipulation"><span class="toc-section-number">8.1</span> Data Cleaning and Manipulation</a>
<ul>
<li><a href="cleaning-and-manipulating-data.html#learning-objectives-9" id="toc-learning-objectives-9"><span class="toc-section-number">8.1.1</span> Learning Objectives</a></li>
<li><a href="cleaning-and-manipulating-data.html#introduction-2" id="toc-introduction-2"><span class="toc-section-number">8.1.2</span> Introduction</a></li>
<li><a href="cleaning-and-manipulating-data.html#data-cleaning-basics" id="toc-data-cleaning-basics"><span class="toc-section-number">8.1.3</span> Data Cleaning Basics</a></li>
<li><a href="cleaning-and-manipulating-data.html#joins-in-dplyr" id="toc-joins-in-dplyr"><span class="toc-section-number">8.1.4</span> Joins in dplyr</a></li>
</ul></li>
</ul></li>
<li><a href="data-visualization-and-publishing-to-the-web.html#data-visualization-and-publishing-to-the-web" id="toc-data-visualization-and-publishing-to-the-web"><span class="toc-section-number">9</span> Data Visualization and Publishing to the Web</a>
<ul>
<li><a href="data-visualization-and-publishing-to-the-web.html#publishing-analyses-to-the-web" id="toc-publishing-analyses-to-the-web"><span class="toc-section-number">9.1</span> Publishing Analyses to the Web</a>
<ul>
<li><a href="data-visualization-and-publishing-to-the-web.html#learning-objectives-10" id="toc-learning-objectives-10"><span class="toc-section-number">9.1.1</span> Learning Objectives</a></li>
<li><a href="data-visualization-and-publishing-to-the-web.html#introduction-3" id="toc-introduction-3"><span class="toc-section-number">9.1.2</span> Introduction</a></li>
<li><a href="data-visualization-and-publishing-to-the-web.html#a-minimal-example" id="toc-a-minimal-example"><span class="toc-section-number">9.1.3</span> A Minimal Example</a></li>
<li><a href="data-visualization-and-publishing-to-the-web.html#exercise-sharing-your-work" id="toc-exercise-sharing-your-work"><span class="toc-section-number">9.1.4</span> Exercise: Sharing your work</a></li>
</ul></li>
<li><a href="data-visualization-and-publishing-to-the-web.html#publication-graphics" id="toc-publication-graphics"><span class="toc-section-number">9.2</span> Publication Graphics</a>
<ul>
<li><a href="data-visualization-and-publishing-to-the-web.html#learning-objectives-11" id="toc-learning-objectives-11"><span class="toc-section-number">9.2.1</span> Learning Objectives</a></li>
<li><a href="data-visualization-and-publishing-to-the-web.html#overview-1" id="toc-overview-1"><span class="toc-section-number">9.2.2</span> Overview</a></li>
<li><a href="data-visualization-and-publishing-to-the-web.html#static-figures-using-ggplot2" id="toc-static-figures-using-ggplot2"><span class="toc-section-number">9.2.3</span> Static figures using <code>ggplot2</code></a></li>
<li><a href="data-visualization-and-publishing-to-the-web.html#interactive-visualization-using-leaflet-and-dt" id="toc-interactive-visualization-using-leaflet-and-dt"><span class="toc-section-number">9.2.4</span> Interactive visualization using <code>leaflet</code> and <code>DT</code></a></li>
<li><a href="data-visualization-and-publishing-to-the-web.html#resources-2" id="toc-resources-2"><span class="toc-section-number">9.2.5</span> Resources</a></li>
</ul></li>
</ul></li>
<li><a href="functions-and-packages.html#functions-and-packages" id="toc-functions-and-packages"><span class="toc-section-number">10</span> Functions and Packages</a>
<ul>
<li><a href="functions-and-packages.html#creating-r-functions" id="toc-creating-r-functions"><span class="toc-section-number">10.1</span> Creating R Functions</a>
<ul>
<li><a href="functions-and-packages.html#why-functions" id="toc-why-functions"><span class="toc-section-number">10.1.1</span> Why functions?</a></li>
<li><a href="functions-and-packages.html#documenting-r-functions" id="toc-documenting-r-functions"><span class="toc-section-number">10.1.2</span> Documenting R functions</a></li>
<li><a href="functions-and-packages.html#summary-4" id="toc-summary-4"><span class="toc-section-number">10.1.3</span> Summary</a></li>
<li><a href="functions-and-packages.html#examples-minimizing-work-with-functions" id="toc-examples-minimizing-work-with-functions"><span class="toc-section-number">10.1.4</span> Examples: Minimizing work with functions</a></li>
</ul></li>
<li><a href="functions-and-packages.html#creating-r-packages" id="toc-creating-r-packages"><span class="toc-section-number">10.2</span> Creating R Packages</a>
<ul>
<li><a href="functions-and-packages.html#learning-objectives-12" id="toc-learning-objectives-12"><span class="toc-section-number">10.2.1</span> Learning Objectives</a></li>
<li><a href="functions-and-packages.html#why-packages" id="toc-why-packages"><span class="toc-section-number">10.2.2</span> Why packages?</a></li>
<li><a href="functions-and-packages.html#install-and-load-packages" id="toc-install-and-load-packages"><span class="toc-section-number">10.2.3</span> Install and load packages</a></li>
<li><a href="functions-and-packages.html#create-a-basic-package" id="toc-create-a-basic-package"><span class="toc-section-number">10.2.4</span> Create a basic package</a></li>
<li><a href="functions-and-packages.html#add-your-code" id="toc-add-your-code"><span class="toc-section-number">10.2.5</span> Add your code</a></li>
<li><a href="functions-and-packages.html#add-documentation" id="toc-add-documentation"><span class="toc-section-number">10.2.6</span> Add documentation</a></li>
<li><a href="functions-and-packages.html#test-your-package" id="toc-test-your-package"><span class="toc-section-number">10.2.7</span> Test your package</a></li>
<li><a href="functions-and-packages.html#checking-and-installing-your-package" id="toc-checking-and-installing-your-package"><span class="toc-section-number">10.2.8</span> Checking and installing your package</a></li>
<li><a href="functions-and-packages.html#sharing-and-releasing-your-package" id="toc-sharing-and-releasing-your-package"><span class="toc-section-number">10.2.9</span> Sharing and releasing your package</a></li>
<li><a href="functions-and-packages.html#more-reading" id="toc-more-reading"><span class="toc-section-number">10.2.10</span> More reading</a></li>
</ul></li>
</ul></li>
<li><a href="data-portals.html#data-portals" id="toc-data-portals"><span class="toc-section-number">11</span> Data Portals</a>
<ul>
<li><a href="data-portals.html#what-is-a-portal" id="toc-what-is-a-portal"><span class="toc-section-number">11.1</span> What is a Portal?</a></li>
<li><a href="data-portals.html#portal-uses" id="toc-portal-uses"><span class="toc-section-number">11.2</span> Portal Uses</a></li>
<li><a href="data-portals.html#portal-features" id="toc-portal-features"><span class="toc-section-number">11.3</span> Portal Features</a>
<ul>
<li><a href="data-portals.html#flexible-content-creation" id="toc-flexible-content-creation">Flexible Content Creation</a></li>
<li><a href="data-portals.html#curated-collections-of-data" id="toc-curated-collections-of-data">Curated Collections of Data</a></li>
<li><a href="data-portals.html#customized-search-capabilities" id="toc-customized-search-capabilities">Customized Search Capabilities</a></li>
<li><a href="data-portals.html#metrics-metrics-metrics" id="toc-metrics-metrics-metrics">Metrics, Metrics, Metrics</a></li>
</ul></li>
<li><a href="data-portals.html#enhancing-access-to-social-science-research-data" id="toc-enhancing-access-to-social-science-research-data"><span class="toc-section-number">11.4</span> Enhancing Access to Social Science Research Data</a></li>
<li><a href="data-portals.html#relationship-between-arctic-data-center-portals-and-dataone" id="toc-relationship-between-arctic-data-center-portals-and-dataone"><span class="toc-section-number">11.5</span> Relationship between Arctic Data Center portals and DataONE</a></li>
<li><a href="data-portals.html#creating-portals" id="toc-creating-portals"><span class="toc-section-number">11.6</span> Creating Portals</a>
<ul>
<li><a href="data-portals.html#getting-started-with-portals" id="toc-getting-started-with-portals">Getting Started with Portals</a></li>
<li><a href="data-portals.html#portal-settings-page" id="toc-portal-settings-page">Portal Settings Page</a></li>
<li><a href="data-portals.html#adding-data-to-portals" id="toc-adding-data-to-portals">Adding Data to Portals</a></li>
<li><a href="data-portals.html#building-search-options-for-your-audience" id="toc-building-search-options-for-your-audience">Building Search Options for Your Audience</a></li>
<li><a href="data-portals.html#data-package-metrics" id="toc-data-package-metrics">Data Package Metrics</a></li>
<li><a href="data-portals.html#creating-unique-freeform-pages" id="toc-creating-unique-freeform-pages">Creating Unique Freeform Pages</a></li>
<li><a href="data-portals.html#saving-and-editing-portals" id="toc-saving-and-editing-portals">Saving and Editing Portals</a></li>
</ul></li>
<li><a href="data-portals.html#how-to-publish-portals" id="toc-how-to-publish-portals"><span class="toc-section-number">11.7</span> How to Publish Portals</a></li>
<li><a href="data-portals.html#sharing-portals" id="toc-sharing-portals"><span class="toc-section-number">11.8</span> Sharing Portals</a></li>
<li><a href="data-portals.html#tutorial-videos" id="toc-tutorial-videos"><span class="toc-section-number">11.9</span> Tutorial Videos</a></li>
<li><a href="data-portals.html#acknowledgements" id="toc-acknowledgements"><span class="toc-section-number">11.10</span> Acknowledgements</a></li>
</ul></li>
<li><a href="exercise-cleaning-and-manipulating-data.html#exercise-cleaning-and-manipulating-data" id="toc-exercise-cleaning-and-manipulating-data"><span class="toc-section-number">12</span> Exercise: Cleaning and Manipulating Data</a>
<ul>
<li><a href="exercise-cleaning-and-manipulating-data.html#hands-on-clean-and-integrate-datasets" id="toc-hands-on-clean-and-integrate-datasets"><span class="toc-section-number">12.1</span> Hands On: Clean and Integrate Datasets</a>
<ul>
<li><a href="exercise-cleaning-and-manipulating-data.html#learning-objectives-13" id="toc-learning-objectives-13"><span class="toc-section-number">12.1.1</span> Learning Objectives</a></li>
<li><a href="exercise-cleaning-and-manipulating-data.html#outline" id="toc-outline"><span class="toc-section-number">12.1.2</span> Outline</a></li>
<li><a href="exercise-cleaning-and-manipulating-data.html#full-solution.-warning-spoilers-ahead" id="toc-full-solution.-warning-spoilers-ahead"><span class="toc-section-number">12.1.3</span> Full solution. Warning, spoilers ahead!</a></li>
</ul></li>
</ul></li>
<li><a href="geospatial-vector-analysis.html#geospatial-vector-analysis" id="toc-geospatial-vector-analysis"><span class="toc-section-number">13</span> Geospatial Vector Analysis</a>
<ul>
<li><a href="geospatial-vector-analysis.html#spatial-vector-analysis-using-sf" id="toc-spatial-vector-analysis-using-sf"><span class="toc-section-number">13.1</span> Spatial vector analysis using <code>sf</code></a>
<ul>
<li><a href="geospatial-vector-analysis.html#learning-objectives-14" id="toc-learning-objectives-14"><span class="toc-section-number">13.1.1</span> Learning Objectives</a></li>
<li><a href="geospatial-vector-analysis.html#introduction-4" id="toc-introduction-4"><span class="toc-section-number">13.1.2</span> Introduction</a></li>
<li><a href="geospatial-vector-analysis.html#working-with-geospatial-data" id="toc-working-with-geospatial-data"><span class="toc-section-number">13.1.3</span> Working with geospatial data</a></li>
<li><a href="geospatial-vector-analysis.html#sf-the-tidyverse" id="toc-sf-the-tidyverse"><span class="toc-section-number">13.1.4</span> <code>sf</code> &amp; the Tidyverse</a></li>
<li><a href="geospatial-vector-analysis.html#visualize-with-ggplot" id="toc-visualize-with-ggplot"><span class="toc-section-number">13.1.5</span> Visualize with ggplot</a></li>
<li><a href="geospatial-vector-analysis.html#visualize-sf-objects-with-leaflet" id="toc-visualize-sf-objects-with-leaflet"><span class="toc-section-number">13.1.6</span> Visualize <code>sf</code> objects with leaflet</a></li>
</ul></li>
</ul></li>
<li><a href="reproducibility-and-provenance.html#reproducibility-and-provenance" id="toc-reproducibility-and-provenance"><span class="toc-section-number">14</span> Reproducibility and Provenance</a>
<ul>
<li><a href="reproducibility-and-provenance.html#learning-objectives-15" id="toc-learning-objectives-15"><span class="toc-section-number">14.0.1</span> Learning Objectives</a></li>
<li><a href="reproducibility-and-provenance.html#data-citation-and-transitive-credit" id="toc-data-citation-and-transitive-credit"><span class="toc-section-number">14.0.2</span> Data Citation and Transitive Credit</a></li>
<li><a href="reproducibility-and-provenance.html#reproducible-papers-with-rrtools" id="toc-reproducible-papers-with-rrtools"><span class="toc-section-number">14.0.3</span> Reproducible Papers with <code>rrtools</code></a></li>
<li><a href="reproducibility-and-provenance.html#the-5th-generation-of-reproducible-papers" id="toc-the-5th-generation-of-reproducible-papers">The 5th Generation of Reproducible Papers</a></li>
</ul></li>
<li><a href="appendix.html#appendix" id="toc-appendix"><span class="toc-section-number">15</span> Appendix</a>
<ul>
<li><a href="appendix.html#collaborating-using-git" id="toc-collaborating-using-git"><span class="toc-section-number">15.1</span> Collaborating using Git</a>
<ul>
<li><a href="appendix.html#learning-objectives-16" id="toc-learning-objectives-16"><span class="toc-section-number">15.1.1</span> Learning Objectives</a></li>
<li><a href="appendix.html#pull-requests" id="toc-pull-requests"><span class="toc-section-number">15.1.2</span> Pull requests</a></li>
<li><a href="appendix.html#exercise-create-and-merge-pull-requests" id="toc-exercise-create-and-merge-pull-requests"><span class="toc-section-number">15.1.3</span> Exercise: Create and merge pull requests</a></li>
<li><a href="appendix.html#branches" id="toc-branches"><span class="toc-section-number">15.1.4</span> Branches</a></li>
</ul></li>
<li><a href="appendix.html#programming-metadata-and-data-publishing" id="toc-programming-metadata-and-data-publishing"><span class="toc-section-number">15.2</span> Programming Metadata and Data Publishing</a>
<ul>
<li><a href="appendix.html#learning-objectives-17" id="toc-learning-objectives-17"><span class="toc-section-number">15.2.1</span> Learning Objectives</a></li>
<li><a href="appendix.html#creating-metadata" id="toc-creating-metadata"><span class="toc-section-number">15.2.2</span> Creating Metadata</a></li>
<li><a href="appendix.html#publish-data-to-the-arctic-data-center-test-site" id="toc-publish-data-to-the-arctic-data-center-test-site"><span class="toc-section-number">15.2.3</span> Publish data to the Arctic Data Center test site</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible Practices for Arctic Research Using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exercise-cleaning-and-manipulating-data" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">12</span> Exercise: Cleaning and Manipulating Data<a href="exercise-cleaning-and-manipulating-data.html#exercise-cleaning-and-manipulating-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="hands-on-clean-and-integrate-datasets" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Hands On: Clean and Integrate Datasets<a href="exercise-cleaning-and-manipulating-data.html#hands-on-clean-and-integrate-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="learning-objectives-13" class="section level3 hasAnchor" number="12.1.1">
<h3><span class="header-section-number">12.1.1</span> Learning Objectives<a href="exercise-cleaning-and-manipulating-data.html#learning-objectives-13" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this lesson, you will:</p>
<ul>
<li>Clean and integrate a dataset using dplyr and tidyr</li>
<li>Make use of previously-learned knowledge of dplyr, tidyr, and writing functions</li>
</ul>
</div>
<div id="outline" class="section level3 hasAnchor" number="12.1.2">
<h3><span class="header-section-number">12.1.2</span> Outline<a href="exercise-cleaning-and-manipulating-data.html#outline" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this session, you will load data from the following dataset:</p>
<p><a href="https://doi.org/10.18739/A23R0PT35">Richard Lanctot and Sarah Saalfeld. 2019. Utqiaġvik shorebird breeding ecology study, Utqiaġvik, Alaska, 2003-2018. Arctic Data Center. doi:10.18739/A23R0PT35</a></p>
<p>Using our knowledge of R, we are going to try to answer the following two questions:</p>
<ul>
<li>What species of predator is the most abundant and has this changed through time?</li>
<li>Does the number of eggs predated increase with the total number of predators for all species laying nests?</li>
</ul>
<p>One of the features if this dataset is that it has many files with similar formatting, most of which contain the column <code>species</code> which is comprised of the <a href="https://www.pwrc.usgs.gov/bbl/manual/speclist.cfm">Bird Banding Laboratory species codes</a>. These four letter codes aren’t very intuitive to most people, so one of the things we will do is write a function that can be used on any file in this dataset that contains a species code.</p>
<div id="high-level-steps" class="section level4 unnumbered hasAnchor">
<h4>High-level steps<a href="exercise-cleaning-and-manipulating-data.html#high-level-steps" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The goal here is for you to have to come up with the functions to do the analysis with minimal guidance. This is supposed to be challenging if you are new to dplyr/tidyr. Below is a set of high-level steps you can follow to answer our research question. After the list is a schematic of the steps in table form which I expect will be useful in guiding your code.</p>
<ol style="list-style-type: decimal">
<li><p>Load the species table using the code in the Setup block below.</p></li>
<li><p>Read the following two files into your environment.</p>
<ul>
<li>Utqiagvik_predator_surveys.csv</li>
<li>Utqiagvik_nest_data.csv</li>
</ul></li>
<li><p>Write a function that will translate species codes into common names.</p>
<ul>
<li><strong>Hint</strong>: The fastest way to do this involves adding a column to the <code>data.frame</code>. Your function will have two arguments</li>
<li><strong>Optional Extra Challenge</strong>: For a little extra challenge, try to incorporate an <code>if</code> statement that looks for <code>NA</code> values in the common name field you are adding. What other conditionals might you include to make your function smarter?</li>
</ul></li>
<li><p>Calculate total number of predators by year and species, and plot the result.</p></li>
<li><p>Calculate total number of eggs predated by year and species.</p></li>
<li><p>Calculate total number of predators by year, join to summarized egg predation table, and plot the result.</p></li>
</ol>
</div>
<div id="setup-7" class="section level4 unnumbered setup hasAnchor">
<h4>Setup<a href="exercise-cleaning-and-manipulating-data.html#setup-7" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Use the following two code chunks to set up your species table. The code I use here incorporates two new packages that I thought would be worth showing.</p>
<p>The first, <code>rvest</code>, is a package that enables easy scraping and handling of information from websites. It requires a moderate amount of knowledge of <code>html</code> to use, but can be very handy. In this case, I use it because I couldn’t find a plain text version of the BBL species codes anywhere. To build a reproducible and long lived workflow, I would want to run this code and then store a plain text version of the data in a long lived location, which cites the original source appropriately.</p>
<p>The second package, <code>janitor</code>, is a great package that has simple tools for cleaning up data. It is especially handy for handling improperly named variables in a <code>data.frame.</code> In this case, I use it to handle a bunch of spaces in the column names so that our lives are a little easier later on.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="exercise-cleaning-and-manipulating-data.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb152-2"><a href="exercise-cleaning-and-manipulating-data.html#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb152-3"><a href="exercise-cleaning-and-manipulating-data.html#cb152-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb152-4"><a href="exercise-cleaning-and-manipulating-data.html#cb152-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span></code></pre></div>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="exercise-cleaning-and-manipulating-data.html#cb153-1" aria-hidden="true" tabindex="-1"></a>webpage <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&quot;https://www.pwrc.usgs.gov/bbl/manual/speclist.cfm&quot;</span>)</span>
<span id="cb153-2"><a href="exercise-cleaning-and-manipulating-data.html#cb153-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-3"><a href="exercise-cleaning-and-manipulating-data.html#cb153-3" aria-hidden="true" tabindex="-1"></a>tbls <span class="ot">&lt;-</span> <span class="fu">html_nodes</span>(webpage, <span class="st">&quot;table&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb153-4"><a href="exercise-cleaning-and-manipulating-data.html#cb153-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb153-5"><a href="exercise-cleaning-and-manipulating-data.html#cb153-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-6"><a href="exercise-cleaning-and-manipulating-data.html#cb153-6" aria-hidden="true" tabindex="-1"></a>species <span class="ot">&lt;-</span> tbls[[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> </span>
<span id="cb153-7"><a href="exercise-cleaning-and-manipulating-data.html#cb153-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb153-8"><a href="exercise-cleaning-and-manipulating-data.html#cb153-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(alpha_code, common_name) <span class="sc">%&gt;%</span> </span>
<span id="cb153-9"><a href="exercise-cleaning-and-manipulating-data.html#cb153-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">alpha_code =</span> <span class="fu">tolower</span>(alpha_code))</span></code></pre></div>
</div>
<div id="visual-schematic-of-data" class="section level4 unnumbered hasAnchor">
<h4>Visual schematic of data<a href="exercise-cleaning-and-manipulating-data.html#visual-schematic-of-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Make this:</p>
<pre><code>year common_name         pred_count
2003 Glaucous Gull               54
2003 Parasitic Jaeger             2
2003 Pomarine Jaeger              6
2004 Glaucous Gull               69
2004 Long-tailed Jaeger          13</code></pre>
<p>And then make this:</p>
<pre><code>common_name             year total_predated pred_count
American Golden-Plover  2003              4         62
American Golden-Plover  2004             22         93
American Golden-Plover  2005              0         72
American Golden-Plover  2006              0        193
American Golden-Plover  2007             12        154
American Golden-Plover  2008             22        328
American Golden-Plover  2009             92        443</code></pre>
</div>
<div id="aside-9" class="section level4 unnumbered aside hasAnchor">
<h4>Aside<a href="exercise-cleaning-and-manipulating-data.html#aside-9" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Why do we need to use a function for this task?</strong></p>
<p>You will likely at some point realize that the function we asked you to write is pretty simple. The code can in fact be accomplished in a single line. So why write your own function for this? There are a couple of answers. The first and most obvious is that we want to you practice writing function syntax with simple examples. But there are other reasons why this operation might benefit from a function:</p>
<ul>
<li>Follow the DRY principles!
<ul>
<li>If you find yourself doing the same cleaning steps on many of your data files, over and over again, those operations are good candidates for functions. This falls into that category, since we need to do the same transformation on both of the files we use here, and if we incorporated more files from this dataset it would come in even more use.</li>
</ul></li>
<li>Add custom warnings and quality control.
<ul>
<li>Functions allow you to incorporate quality control through conditional statements coupled with warnings. Instead of checking for NA’s or duplicated rows after you run a join, you can check within the function and return a warning if any are found.</li>
</ul></li>
<li>Check your function input more carefully
<ul>
<li>Similar to custom warnings, functions allow you to create custom errors too. Writing functions is a good way to incorporate defensive coding practices, where potential issues are looked for and the process is stopped if they are found.</li>
</ul></li>
</ul>
</div>
</div>
<div id="full-solution.-warning-spoilers-ahead" class="section level3 hasAnchor" number="12.1.3">
<h3><span class="header-section-number">12.1.3</span> Full solution. Warning, spoilers ahead!<a href="exercise-cleaning-and-manipulating-data.html#full-solution.-warning-spoilers-ahead" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Load in the libraries and the species table, as described above.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="exercise-cleaning-and-manipulating-data.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb156-2"><a href="exercise-cleaning-and-manipulating-data.html#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb156-3"><a href="exercise-cleaning-and-manipulating-data.html#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb156-4"><a href="exercise-cleaning-and-manipulating-data.html#cb156-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb156-5"><a href="exercise-cleaning-and-manipulating-data.html#cb156-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="exercise-cleaning-and-manipulating-data.html#cb157-1" aria-hidden="true" tabindex="-1"></a>webpage <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&quot;https://www.pwrc.usgs.gov/bbl/manual/speclist.cfm&quot;</span>)</span>
<span id="cb157-2"><a href="exercise-cleaning-and-manipulating-data.html#cb157-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-3"><a href="exercise-cleaning-and-manipulating-data.html#cb157-3" aria-hidden="true" tabindex="-1"></a>tbls <span class="ot">&lt;-</span> <span class="fu">html_nodes</span>(webpage, <span class="st">&quot;table&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb157-4"><a href="exercise-cleaning-and-manipulating-data.html#cb157-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb157-5"><a href="exercise-cleaning-and-manipulating-data.html#cb157-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-6"><a href="exercise-cleaning-and-manipulating-data.html#cb157-6" aria-hidden="true" tabindex="-1"></a>species <span class="ot">&lt;-</span> tbls[[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> </span>
<span id="cb157-7"><a href="exercise-cleaning-and-manipulating-data.html#cb157-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb157-8"><a href="exercise-cleaning-and-manipulating-data.html#cb157-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(alpha_code, common_name) <span class="sc">%&gt;%</span> </span>
<span id="cb157-9"><a href="exercise-cleaning-and-manipulating-data.html#cb157-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">alpha_code =</span> <span class="fu">tolower</span>(alpha_code))</span></code></pre></div>
<p>Read in the two data files.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="exercise-cleaning-and-manipulating-data.html#cb158-1" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://arcticdata.io/metacat/d1/mn/v2/object/urn%3Auuid%3A9ffec04c-7e2d-41dd-9e88-b6c2e8c4375e&quot;</span>)</span>
<span id="cb158-2"><a href="exercise-cleaning-and-manipulating-data.html#cb158-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-3"><a href="exercise-cleaning-and-manipulating-data.html#cb158-3" aria-hidden="true" tabindex="-1"></a>nests <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://arcticdata.io/metacat/d1/mn/v2/object/urn%3Auuid%3A982bd2fc-4edf-4da7-96ef-0d11b853102d&quot;</span>)</span></code></pre></div>
<p>Define a function to join the species table to an arbirary table with a species column in this dataset. Note that this version has some extra conditionals for the optional challenge.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="exercise-cleaning-and-manipulating-data.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Function to add common name to data.frame according to the BBL list of species codes</span></span>
<span id="cb159-2"><a href="exercise-cleaning-and-manipulating-data.html#cb159-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-3"><a href="exercise-cleaning-and-manipulating-data.html#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param df A data frame containing BBL species codes in column `species`</span></span>
<span id="cb159-4"><a href="exercise-cleaning-and-manipulating-data.html#cb159-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param species A data frame defining BBL species codes with columns `alpha_code` and `common_name`</span></span>
<span id="cb159-5"><a href="exercise-cleaning-and-manipulating-data.html#cb159-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return A data frame with original data df, plus the common name of species</span></span>
<span id="cb159-6"><a href="exercise-cleaning-and-manipulating-data.html#cb159-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-7"><a href="exercise-cleaning-and-manipulating-data.html#cb159-7" aria-hidden="true" tabindex="-1"></a>assign_species_name <span class="ot">&lt;-</span> <span class="cf">function</span>(df, species){</span>
<span id="cb159-8"><a href="exercise-cleaning-and-manipulating-data.html#cb159-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span>(<span class="st">&quot;alpha_code&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(species)) <span class="sc">|</span></span>
<span id="cb159-9"><a href="exercise-cleaning-and-manipulating-data.html#cb159-9" aria-hidden="true" tabindex="-1"></a>        <span class="sc">!</span>(<span class="st">&quot;species&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) <span class="sc">|</span></span>
<span id="cb159-10"><a href="exercise-cleaning-and-manipulating-data.html#cb159-10" aria-hidden="true" tabindex="-1"></a>        <span class="sc">!</span>(<span class="st">&quot;common_name&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(species))){</span>
<span id="cb159-11"><a href="exercise-cleaning-and-manipulating-data.html#cb159-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">&quot;Tables appear to be formatted incorrectly.&quot;</span>)</span>
<span id="cb159-12"><a href="exercise-cleaning-and-manipulating-data.html#cb159-12" aria-hidden="true" tabindex="-1"></a>    }  </span>
<span id="cb159-13"><a href="exercise-cleaning-and-manipulating-data.html#cb159-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb159-14"><a href="exercise-cleaning-and-manipulating-data.html#cb159-14" aria-hidden="true" tabindex="-1"></a>    return_df <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df, species, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;species&quot;</span> <span class="ot">=</span> <span class="st">&quot;alpha_code&quot;</span>))</span>
<span id="cb159-15"><a href="exercise-cleaning-and-manipulating-data.html#cb159-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb159-16"><a href="exercise-cleaning-and-manipulating-data.html#cb159-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">nrow</span>(return_df) <span class="sc">&gt;</span> <span class="fu">nrow</span>(df)){</span>
<span id="cb159-17"><a href="exercise-cleaning-and-manipulating-data.html#cb159-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">warning</span>(<span class="st">&quot;Joined table has more rows than original table. Check species table for duplicated code values.&quot;</span>)</span>
<span id="cb159-18"><a href="exercise-cleaning-and-manipulating-data.html#cb159-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb159-19"><a href="exercise-cleaning-and-manipulating-data.html#cb159-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb159-20"><a href="exercise-cleaning-and-manipulating-data.html#cb159-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">is.na</span>(return_df<span class="sc">$</span>common_name))) <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb159-21"><a href="exercise-cleaning-and-manipulating-data.html#cb159-21" aria-hidden="true" tabindex="-1"></a>      x <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">is.na</span>(return_df<span class="sc">$</span>common_name)))</span>
<span id="cb159-22"><a href="exercise-cleaning-and-manipulating-data.html#cb159-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">warning</span>(<span class="fu">paste</span>(<span class="st">&quot;Common name has&quot;</span>, x, <span class="st">&quot;rows containing NA&quot;</span>))</span>
<span id="cb159-23"><a href="exercise-cleaning-and-manipulating-data.html#cb159-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb159-24"><a href="exercise-cleaning-and-manipulating-data.html#cb159-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb159-25"><a href="exercise-cleaning-and-manipulating-data.html#cb159-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(return_df)</span>
<span id="cb159-26"><a href="exercise-cleaning-and-manipulating-data.html#cb159-26" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb159-27"><a href="exercise-cleaning-and-manipulating-data.html#cb159-27" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Or a simple version without the extra challenges added:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="exercise-cleaning-and-manipulating-data.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Function to add common name to data.frame according to the BBL list of species codes</span></span>
<span id="cb160-2"><a href="exercise-cleaning-and-manipulating-data.html#cb160-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-3"><a href="exercise-cleaning-and-manipulating-data.html#cb160-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param df A data frame containing BBL species codes in column `species`</span></span>
<span id="cb160-4"><a href="exercise-cleaning-and-manipulating-data.html#cb160-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param species A data frame defining BBL species codes with columns `alpha_code` and `common_name`</span></span>
<span id="cb160-5"><a href="exercise-cleaning-and-manipulating-data.html#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return A data frame with original data df, plus the common name of species</span></span>
<span id="cb160-6"><a href="exercise-cleaning-and-manipulating-data.html#cb160-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-7"><a href="exercise-cleaning-and-manipulating-data.html#cb160-7" aria-hidden="true" tabindex="-1"></a>assign_species_name <span class="ot">&lt;-</span> <span class="cf">function</span>(df, species){</span>
<span id="cb160-8"><a href="exercise-cleaning-and-manipulating-data.html#cb160-8" aria-hidden="true" tabindex="-1"></a>    return_df <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df, species, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;species&quot;</span> <span class="ot">=</span> <span class="st">&quot;alpha_code&quot;</span>))</span>
<span id="cb160-9"><a href="exercise-cleaning-and-manipulating-data.html#cb160-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(return_df)</span>
<span id="cb160-10"><a href="exercise-cleaning-and-manipulating-data.html#cb160-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div id="question-1-what-species-of-predator-is-the-most-abundant-and-has-this-changed-through-time" class="section level4 unnumbered hasAnchor">
<h4>Question 1: What species of predator is the most abundant and has this changed through time?<a href="exercise-cleaning-and-manipulating-data.html#question-1-what-species-of-predator-is-the-most-abundant-and-has-this-changed-through-time" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Calculate the number of each species by year. Species counts with no common name are removed after examining the data and determining that the species code in these cases was “none”, as in, no predators were observed that day.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="exercise-cleaning-and-manipulating-data.html#cb161-1" aria-hidden="true" tabindex="-1"></a>pred_species <span class="ot">&lt;-</span> <span class="fu">assign_species_name</span>(pred, species) <span class="sc">%&gt;%</span> </span>
<span id="cb161-2"><a href="exercise-cleaning-and-manipulating-data.html#cb161-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, common_name) <span class="sc">%&gt;%</span> </span>
<span id="cb161-3"><a href="exercise-cleaning-and-manipulating-data.html#cb161-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">pred_count =</span> <span class="fu">sum</span>(count, <span class="at">na.rm =</span> T), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb161-4"><a href="exercise-cleaning-and-manipulating-data.html#cb161-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(common_name))</span></code></pre></div>
<pre><code>## Warning in assign_species_name(pred, species): Common name has
## 268 rows containing NA</code></pre>
<p>Plot the result.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="exercise-cleaning-and-manipulating-data.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pred_species, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> pred_count, <span class="at">color =</span> common_name)) <span class="sc">+</span></span>
<span id="cb163-2"><a href="exercise-cleaning-and-manipulating-data.html#cb163-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb163-3"><a href="exercise-cleaning-and-manipulating-data.html#cb163-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb163-4"><a href="exercise-cleaning-and-manipulating-data.html#cb163-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of Predators&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Species&quot;</span>) <span class="sc">+</span></span>
<span id="cb163-5"><a href="exercise-cleaning-and-manipulating-data.html#cb163-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="reproducible-research-short-course_files/figure-html/unnamed-chunk-117-1.png" width="672" /></p>
</div>
<div id="question-2-does-the-number-of-eggs-predated-increase-with-the-total-number-of-predators-for-all-species-laying-nests" class="section level4 unnumbered hasAnchor">
<h4>Question 2: Does the number of eggs predated increase with the total number of predators for all species laying nests?<a href="exercise-cleaning-and-manipulating-data.html#question-2-does-the-number-of-eggs-predated-increase-with-the-total-number-of-predators-for-all-species-laying-nests" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Calculate the number of eggs predated by year and species. Species with no common name were examined, and found to have missing values in the species code as well. This is likely a data entry error that should be examined more closely, but for simplicity here we can drop these rows.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="exercise-cleaning-and-manipulating-data.html#cb164-1" aria-hidden="true" tabindex="-1"></a>nests_species <span class="ot">&lt;-</span> <span class="fu">assign_species_name</span>(nests, species) <span class="sc">%&gt;%</span> </span>
<span id="cb164-2"><a href="exercise-cleaning-and-manipulating-data.html#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(common_name, year) <span class="sc">%&gt;%</span> </span>
<span id="cb164-3"><a href="exercise-cleaning-and-manipulating-data.html#cb164-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_predated =</span> <span class="fu">sum</span>(number_eggs_predated, <span class="at">na.rm =</span> T),</span>
<span id="cb164-4"><a href="exercise-cleaning-and-manipulating-data.html#cb164-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb164-5"><a href="exercise-cleaning-and-manipulating-data.html#cb164-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(common_name))</span></code></pre></div>
<pre><code>## Warning in assign_species_name(nests, species): Common name has
## 4 rows containing NA</code></pre>
<p>Calculate total number of predators across all species by year.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="exercise-cleaning-and-manipulating-data.html#cb166-1" aria-hidden="true" tabindex="-1"></a>pred_total <span class="ot">&lt;-</span> pred_species <span class="sc">%&gt;%</span> </span>
<span id="cb166-2"><a href="exercise-cleaning-and-manipulating-data.html#cb166-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb166-3"><a href="exercise-cleaning-and-manipulating-data.html#cb166-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">pred_count =</span> <span class="fu">sum</span>(pred_count, <span class="at">na.rm =</span> T), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span></code></pre></div>
<p>Join egg predation data to total predator data.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="exercise-cleaning-and-manipulating-data.html#cb167-1" aria-hidden="true" tabindex="-1"></a>nest_pred <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nests_species, pred_total, <span class="at">by =</span> <span class="st">&quot;year&quot;</span>)</span></code></pre></div>
<p>Plot the number of eggs predated by total predators, faceted over species.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="exercise-cleaning-and-manipulating-data.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(nest_pred, <span class="fu">aes</span>(<span class="at">x =</span> pred_count, <span class="at">y =</span> total_predated)) <span class="sc">+</span></span>
<span id="cb168-2"><a href="exercise-cleaning-and-manipulating-data.html#cb168-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb168-3"><a href="exercise-cleaning-and-manipulating-data.html#cb168-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>common_name, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb168-4"><a href="exercise-cleaning-and-manipulating-data.html#cb168-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Number of Predators&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of Eggs Predated&quot;</span>) <span class="sc">+</span></span>
<span id="cb168-5"><a href="exercise-cleaning-and-manipulating-data.html#cb168-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="reproducible-research-short-course_files/figure-html/unnamed-chunk-121-1.png" width="480" /></p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-portals.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="geospatial-vector-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
