<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.653">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Scalable and Computationally Reproducible Approaches to Arctic Research - 8&nbsp; Google Earth Engine</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../sections/18-arctic-data-staging.html" rel="next">
<link href="../sections/11-parquet-arrow.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Google Earth Engine</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Course Materials</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://arcticdata.io" title="" class="sidebar-tool px-1"><i class="bi bi-house-door-fill"></i></a>
    <a href="https://twitter.com/arcticdatactr" title="" class="sidebar-tool px-1"><i class="bi bi-twitter"></i></a>
    <a href="https://github.com/NCEAS/scalable-computing-course" title="" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/01-adc-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Welcome and Introductions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/02-remote-computing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Remote Computing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/03-python-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Python Programming on Clusters</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/04-parallel-programming.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Pleasingly Parallel Programming</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/05-adc-data-publishing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Documenting and Publishing Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/10-geopandas.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Spatial and Image Data Using GeoPandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/11-parquet-arrow.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data Futures: Parquet and Arrow</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/15-google-earth-engine.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Google Earth Engine</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/18-arctic-data-staging.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Workflows for data staging and publishing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link active" data-scroll-target="#learning-objectives"> <span class="header-section-number">8.1</span> Learning Objectives</a></li>
  <li><a href="#introduction-15-20min" id="toc-introduction-15-20min" class="nav-link" data-scroll-target="#introduction-15-20min"> <span class="header-section-number">8.2</span> Introduction (15-20min)</a></li>
  <li><a href="#getting-started-with-google-earth-engine-gee-on-your-own-machine-40-min" id="toc-getting-started-with-google-earth-engine-gee-on-your-own-machine-40-min" class="nav-link" data-scroll-target="#getting-started-with-google-earth-engine-gee-on-your-own-machine-40-min"> <span class="header-section-number">8.3</span> Getting started with Google Earth Engine (GEE) on your own machine (40 min)</a></li>
  <li><a href="#visualize-global-precipitation-data-using-google-earth-engine" id="toc-visualize-global-precipitation-data-using-google-earth-engine" class="nav-link" data-scroll-target="#visualize-global-precipitation-data-using-google-earth-engine"> <span class="header-section-number">8.4</span> Visualize global precipitation data using Google Earth Engine</a></li>
  <li><a href="#ingmars-demonstration-here30-40-min" id="toc-ingmars-demonstration-here30-40-min" class="nav-link" data-scroll-target="#ingmars-demonstration-here30-40-min"> <span class="header-section-number">8.5</span> INGMAR’S DEMONSTRATION HERE?(30-40 min)</a></li>
  <li><a href="#conclusionsummary" id="toc-conclusionsummary" class="nav-link" data-scroll-target="#conclusionsummary"> <span class="header-section-number">8.6</span> Conclusion/Summary</a></li>
  <li><a href="#other-resources" id="toc-other-resources" class="nav-link" data-scroll-target="#other-resources"> <span class="header-section-number">8.7</span> Other Resources</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Google Earth Engine</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>SAM NOTES, DELETE LATER - need to make sure that .ipynb that student’s will work out of are running in same virutal enviroment as everything else - embed .ipynb into quarto notebook (get book to build from those examples) - use Ryan Abernathey’s <a href="https://medium.com/pangeo/closed-platforms-vs-open-architectures-for-cloud-native-earth-system-analytics-1ad88708ebb6">post</a> to help frame introduction</p>
<section id="learning-objectives" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="learning-objectives"><span class="header-section-number">8.1</span> Learning Objectives</h2>
<ul>
<li>Understand what Google Earth Engine provides and its applications</li>
<li>Learn about some real-world applications of Google Earth Engine</li>
<li>Learn how to get started using Google Earth Engine on your own computer</li>
<li>Learn how to find and access Google Earth Engine Data</li>
</ul>
</section>
<section id="introduction-15-20min" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="introduction-15-20min"><span class="header-section-number">8.2</span> Introduction (15-20min)</h2>
<p>SAM NOTES, DELETE LATER - have Ingmar help frame utility of GEE in intro</p>
<p><a href="https://earthengine.google.com/">Google Earth Engine</a> is a geospatial processing platform powered by Google Cloud Platform. It contains over 30 years of satellite imagery and geospatial datasets that are continually updated and available instantly. The Earth Engine API is available in Python (and JavaScript) for anyone with an account to access and analyze data.</p>
<p>ADD SOME COOL IMAGERY HERE</p>
<p>Explore the public <a href="https://developers.google.com/earth-engine/datasets/catalog">Earth Engine Data Catalog</a> which includes a variety of standard Earth science raster datasets. Browse by <a href="https://developers.google.com/earth-engine/datasets/tags">dataset tags</a> or by satellites (<a href="https://developers.google.com/earth-engine/datasets/catalog/landsat">Landsat</a>, <a href="https://developers.google.com/earth-engine/datasets/catalog/modis">MODIS</a>, <a href="https://developers.google.com/earth-engine/datasets/catalog/sentinel">Sentinel</a>).</p>
<p>SAM NOTES, DELETE LATER - typical: download data and work locally - new way:“Moving compute to data” – GEE is a great example of this</p>
</section>
<section id="getting-started-with-google-earth-engine-gee-on-your-own-machine-40-min" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="getting-started-with-google-earth-engine-gee-on-your-own-machine-40-min"><span class="header-section-number">8.3</span> Getting started with Google Earth Engine (GEE) on your own machine (40 min)</h2>
<p>SAM NOTES, DELETE LATER</p>
<ul>
<li>remove <code>#| eval: false</code> once code actually runs to embed outputs</li>
<li>don’t really have time to actually do this in class? include instructions for those who want to try it out on their own later?</li>
<li>Content borrowed from Dr.&nbsp;Samantha Stevenson’s <a href="https://docs.google.com/document/d/1P1c6Ef7D1OoGaTaOrPDO0m5LBN1okpGlU0OXKKzsoi0/edit">guide to installling Jupyter/Google Earth Engine onyour personal laptop</a>.</li>
<li>PREREQUISITE: need conda (see Earth Engine API installion instructions <a href="https://developers.google.com/earth-engine/guides/python_install-conda">here</a>) – haven’t added these instructions below yet</li>
<li>also, not working on my machine at the moment. issue with library installs? starts with <code>earthengine authenticate</code></li>
</ul>
<ol type="1">
<li>Install the Google Earth Engine API</li>
</ol>
<p>SAM NOTES, DELETE LATER - MOVE MOST OF THIS TO COURSE SETUP (not using conda) BUT KEEP GEE ACTIVATION STEP HERE</p>
<ul>
<li>Create an environment where the Google Earth Engine API will live. This ensures that it and it’s dependent packages will not cause versioning issues with your base environment (or other environments). We’ll call our environment <code>gee_env</code>.</li>
</ul>
<pre class="{bash}"><code>#| eval: false
conda create --name gee_env</code></pre>
<ul>
<li>Activate your environment so your machine knows where to store subsequent installs.</li>
</ul>
<pre class="{bash}"><code>#| eval: false
conda activate gee_env</code></pre>
<p>You’ll know your environment is activated successfully when <code>(gee_env)</code> appears before the prompt in your terminal window (as opposed to <code>(base)</code>, for example).</p>
<ul>
<li>Install the Google Earth Engine API in your <code>gee_env</code></li>
</ul>
<pre class="{bash}"><code>#| eval: false
conda install -c conda-forge earthengine-api</code></pre>
<ol start="2" type="1">
<li>Sign up for a GEE Account</li>
</ol>
<p>GEE is currently free for educational use. Sign up for an account at https://signup.earthengine.google.com (you’ll need this to authenticate in the next step).</p>
<ol start="3" type="1">
<li>Set up GEE Authentication</li>
</ol>
<p>In order to begin using GEE, you’ll need to connect your GEE envionment (<code>gee_env</code>) to the authentication credentials associated with your Google account. This will need to be done each time you connect to GEE, but should only be done once per session.</p>
<ul>
<li>On the command line, type:</li>
</ul>
<pre class="{bash}"><code>#| eval: false
earthengine authenticate</code></pre>
<p>This should launch a browser window where you can login with your Google account to the Google Earth Engine Authenticator. Following the prompts will generate a code, which you’ll then need to copy and paste back onto the command line. This will be saved as an authentication token so you won’t need to go through this process again until the next time you start a new session.</p>
<ol start="4" type="1">
<li>Install necessary packages (if you don’t already have them)</li>
</ol>
<pre class="{bash}"><code>#| eval: false
pip install ee # Earth Engine API package
pip install geemap # package for interactive maping with GEE 
pip install pandas # contains useful tools for data manipulation (may not need this)</code></pre>
</section>
<section id="visualize-global-precipitation-data-using-google-earth-engine" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="visualize-global-precipitation-data-using-google-earth-engine"><span class="header-section-number">8.4</span> Visualize global precipitation data using Google Earth Engine</h2>
<p><em>Content for this section was adapted from Dr.&nbsp;Sam Stevenson’s <a href="https://github.com/samanthastevenson/EDS220_Fall2021/blob/main/Week1_ERA5Maps_GEE.ipynb">Visualizing global precipitation using Google Earth Engine</a> lesson, given in her <a href="https://samanthastevenson.github.io/EDS220_site/">EDS 220 course</a> in Fall 2021.</em></p>
<ol type="1">
<li>Import necessary packages</li>
</ol>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> ee <span class="co"># MODULENOTFOUNDERROR</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geemap</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li>Create an interactive basemap</li>
</ol>
<p>The default basemap is (you guessed it) Google Maps. The following code displays an empty Google Map that you can manipulate just like you would in the typical Google Maps interface. Do this using the <code>Map</code> method from the <code>geemap</code> library. We’ll also center the map at a specified latitude and longitude (here, 40N, 100E), set a zoom level, and save our map as an object called <code>myMap</code>.</p>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>myMap <span class="op">=</span> geemap.Map(center <span class="op">=</span> [<span class="dv">40</span>, <span class="op">-</span><span class="dv">100</span>], zoom <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>myMap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li>Load ERA5 Image Collections from GEE</li>
</ol>
<ul>
<li>NOTE: ADC has worked with these data – took 3 weeks to download</li>
<li>EE colleciton is all you need to load and analyze imgage collection</li>
<li>precursor to Ingmar’s stuff</li>
</ul>
<p>We’ll be using the ERA5 daily aggregates reanalysis dataset, produced by the European Centre for Medium-Range Weather Forecasts (ECMWF), found <a href="https://developers.google.com/earth-engine/datasets/catalog/ECMWF_ERA5_DAILY">here</a>, which models atmospheric weather observations. We’ll load the <code>total_precipitation</code> field (check out the dataset metadata on <a href="https://developers.google.com/earth-engine/datasets/catalog/ECMWF_ERA5_DAILY#bands">here</a>).</p>
<p>The <code>ImageCollection</code> method extracts a set of individual images that satisfies some criterion that you pass to GEE through the <code>ee</code> package. This is stored as an <strong>ImageCollection</strong> object which can be filtered and processed in various ways. We can pass the <code>ImageCollction</code> method agruments to tell GEE which data we want to retrieve. Below, we retrieve all daily ERA5 data (so we can see individual rain events).</p>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>weatherData <span class="op">=</span> ee.ImageCollection(<span class="st">'ECMWF/ERA5/DAILY'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="4" type="1">
<li>Select an image to plot</li>
</ol>
<p>To plot a map over our Google Maps basemap, we need an “Image” rather than an “ImageCollection.” ERA5 contains many different climate variables, so we need to pick what we’d like to plot. We’ll use the <code>.select</code> method to choose the parameter(s) we’re interested in from our <code>weatherData</code> object.</p>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>precip <span class="op">=</span> weatherData.select(<span class="st">"total_precipitation"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can look at our <code>precip</code> object using the <code>print</code> method to see that it’s still an “ImageCollection” which contains daily infomration from 1979 to 2020.</p>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(precip)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We want to filter it down to a single field for a time of interest – let’s say December 1-2, 2019. We apply the <code>.filter</code> method to our <code>precip</code> object and apply the <code>ee.Filter.date</code> method (from the <code>ee</code> package) to filter for data from our chosen date range. We also apply the <code>.mean</code> method, which takes whatever precedes it and calculates the average.</p>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>precip_filtered <span class="op">=</span> precip.<span class="bu">filter</span>(ee.Filter.date(<span class="st">'2019-12-01'</span>, <span class="st">'2019-12-02'</span>)).mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="5" type="1">
<li>Add data to map</li>
</ol>
<p>We can fist use the <code>setCenter</code> method to tell the map where to center itself. It takes the longitude and latitude as the first two coordinates, followed by the zoom level.</p>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Map.setCenter(<span class="op">-</span><span class="fl">152.505706</span>, <span class="fl">59.432367</span>, <span class="dv">2</span>) <span class="co"># Cook Inlet, Alaska (WE CAN CHANGE THIS LOCATION)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, set a color palette to use when plotting the data layer. The following is a palette specified for precipitation in the GEE description page for ERA5. GEE has lots of color tables like this that you can look up.</p>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>precip_palette <span class="op">=</span> {</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'min'</span>:<span class="dv">0</span>,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'max'</span>:<span class="fl">0.1</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'palette'</span>: [<span class="st">'#FFFFFF'</span>, <span class="st">'#00FFFF'</span>, <span class="st">'#0080FF'</span>, <span class="st">'#DA00FF'</span>, <span class="st">'#FFA400'</span>, <span class="st">'#FF0000'</span>]</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Finally, plot our filtered data, <code>precip_filtered</code> on top of our basemap using the <code>.addLayer</code> method. We’ll aslo pass it our visualization parameters (colors and ranges stored in <code>precip_palette</code>, the name of the data field <code>total precipitation</code>, and opacity so that we can see the basemap underneath)</p>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>Map.addLayer(precip_filtered, precip_palette, <span class="st">'total precipitation'</span>, opacity <span class="op">=</span> <span class="fl">0.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="ingmars-demonstration-here30-40-min" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="ingmars-demonstration-here30-40-min"><span class="header-section-number">8.5</span> INGMAR’S DEMONSTRATION HERE?(30-40 min)</h2>
</section>
<section id="conclusionsummary" class="level2" data-number="8.6">
<h2 data-number="8.6" class="anchored" data-anchor-id="conclusionsummary"><span class="header-section-number">8.6</span> Conclusion/Summary</h2>
<ul>
<li>lessons learned</li>
<li>utilities</li>
<li>etc.</li>
</ul>
</section>
<section id="other-resources" class="level2" data-number="8.7">
<h2 data-number="8.7" class="anchored" data-anchor-id="other-resources"><span class="header-section-number">8.7</span> Other Resources</h2>
<ul>
<li><a href="https://code.earthengine.google.com/">GEE Code Editor</a> is a web-based IDE for using GEE (JavaScript)</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../sections/11-parquet-arrow.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data Futures: Parquet and Arrow</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../sections/18-arctic-data-staging.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Workflows for data staging and publishing</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>