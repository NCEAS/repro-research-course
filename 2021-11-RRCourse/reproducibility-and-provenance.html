<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>14 Reproducibility and provenance | Reproducible Research Techniques for Synthesis</title>
  <meta name="description" content="14 Reproducibility and provenance | Reproducible Research Techniques for Synthesis" />
  <meta name="generator" content="bookdown 0.24.3 and GitBook 2.6.7" />

  <meta property="og:title" content="14 Reproducibility and provenance | Reproducible Research Techniques for Synthesis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="14 Reproducibility and provenance | Reproducible Research Techniques for Synthesis" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="spatial-analysis.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.20/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Reproducible Research Techniques for Synthesis</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i><b>0.1</b> Schedule</a>
<ul>
<li class="chapter" data-level="0.1.1" data-path="index.html"><a href="index.html#code-of-conduct"><i class="fa fa-check"></i><b>0.1.1</b> Code of Conduct</a></li>
<li class="chapter" data-level="0.1.2" data-path="index.html"><a href="index.html#logistics"><i class="fa fa-check"></i><b>0.1.2</b> Logistics</a></li>
<li class="chapter" data-level="0.1.3" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>0.1.3</b> Acknowledgements</a></li>
<li class="chapter" data-level="0.1.4" data-path="index.html"><a href="index.html#about-this-book"><i class="fa fa-check"></i><b>0.1.4</b> About this book</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction-and-setup.html"><a href="introduction-and-setup.html"><i class="fa fa-check"></i><b>1</b> Introduction and Setup</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-and-setup.html"><a href="introduction-and-setup.html#introduction-to-reproducible-research"><i class="fa fa-check"></i><b>1.1</b> Introduction to reproducible research</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-and-setup.html"><a href="introduction-and-setup.html#rstudio-and-gitgithub-setup"><i class="fa fa-check"></i><b>1.2</b> RStudio and Git/GitHub Setup</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction-and-setup.html"><a href="introduction-and-setup.html#learning-objectives"><i class="fa fa-check"></i><b>1.2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction-and-setup.html"><a href="introduction-and-setup.html#logging-into-the-rstudio-server"><i class="fa fa-check"></i><b>1.2.2</b> Logging into the RStudio server</a></li>
<li class="chapter" data-level="1.2.3" data-path="introduction-and-setup.html"><a href="introduction-and-setup.html#preparing-to-work-in-rstudio"><i class="fa fa-check"></i><b>1.2.3</b> Preparing to work in RStudio</a></li>
<li class="chapter" data-level="1.2.4" data-path="introduction-and-setup.html"><a href="introduction-and-setup.html#setting-up-the-r-environment-on-your-local-computer"><i class="fa fa-check"></i><b>1.2.4</b> Setting up the R environment on your local computer</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html"><i class="fa fa-check"></i><b>2</b> Documenting and Publishing Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#best-practices-data-and-metadata"><i class="fa fa-check"></i><b>2.1</b> Best Practices: Data and Metadata</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#learning-objectives-1"><i class="fa fa-check"></i><b>2.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="2.1.2" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#best-practices-overview"><i class="fa fa-check"></i><b>2.1.2</b> Best Practices: Overview</a></li>
<li class="chapter" data-level="2.1.3" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#data-identifiers"><i class="fa fa-check"></i><b>2.1.3</b> Data Identifiers</a></li>
<li class="chapter" data-level="2.1.4" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#data-citation"><i class="fa fa-check"></i><b>2.1.4</b> Data Citation</a></li>
<li class="chapter" data-level="2.1.5" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#provanance-preserving-computational-workflows"><i class="fa fa-check"></i><b>2.1.5</b> Provanance &amp; Preserving Computational Workflows</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#data-documentation-and-publishing"><i class="fa fa-check"></i><b>2.2</b> Data Documentation and Publishing</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#learning-objectives-2"><i class="fa fa-check"></i><b>2.2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="2.2.2" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#data-sharing-and-preservation"><i class="fa fa-check"></i><b>2.2.2</b> Data sharing and preservation</a></li>
<li class="chapter" data-level="2.2.3" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#data-repositories-built-for-data-and-code"><i class="fa fa-check"></i><b>2.2.3</b> Data repositories: built for data (and code)</a></li>
<li class="chapter" data-level="2.2.4" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#metadata"><i class="fa fa-check"></i><b>2.2.4</b> Metadata</a></li>
<li class="chapter" data-level="2.2.5" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#structure-of-a-data-package"><i class="fa fa-check"></i><b>2.2.5</b> Structure of a data package</a></li>
<li class="chapter" data-level="2.2.6" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#dataone-federation"><i class="fa fa-check"></i><b>2.2.6</b> DataONE Federation</a></li>
<li class="chapter" data-level="" data-path="documenting-and-publishing-data.html"><a href="documenting-and-publishing-data.html#publishing-data-from-the-web"><i class="fa fa-check"></i>Publishing data from the web</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-rmarkdown.html"><a href="introduction-to-rmarkdown.html"><i class="fa fa-check"></i><b>3</b> Introduction to RMarkdown</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-rmarkdown.html"><a href="introduction-to-rmarkdown.html#literate-analysis-with-rmarkdown"><i class="fa fa-check"></i><b>3.1</b> Literate Analysis with RMarkdown</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="introduction-to-rmarkdown.html"><a href="introduction-to-rmarkdown.html#learning-objectives-3"><i class="fa fa-check"></i><b>3.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="3.1.2" data-path="introduction-to-rmarkdown.html"><a href="introduction-to-rmarkdown.html#introduction-and-motivation"><i class="fa fa-check"></i><b>3.1.2</b> Introduction and motivation</a></li>
<li class="chapter" data-level="3.1.3" data-path="introduction-to-rmarkdown.html"><a href="introduction-to-rmarkdown.html#basic-rmarkdown-syntax"><i class="fa fa-check"></i><b>3.1.3</b> Basic RMarkdown syntax</a></li>
<li class="chapter" data-level="3.1.4" data-path="introduction-to-rmarkdown.html"><a href="introduction-to-rmarkdown.html#code-chunks"><i class="fa fa-check"></i><b>3.1.4</b> Code chunks</a></li>
<li class="chapter" data-level="3.1.5" data-path="introduction-to-rmarkdown.html"><a href="introduction-to-rmarkdown.html#literate-analysis-practice"><i class="fa fa-check"></i><b>3.1.5</b> Literate analysis practice</a></li>
<li class="chapter" data-level="3.1.6" data-path="introduction-to-rmarkdown.html"><a href="introduction-to-rmarkdown.html#rmarkdown-and-environments"><i class="fa fa-check"></i><b>3.1.6</b> RMarkdown and environments</a></li>
<li class="chapter" data-level="3.1.7" data-path="introduction-to-rmarkdown.html"><a href="introduction-to-rmarkdown.html#go-further"><i class="fa fa-check"></i><b>3.1.7</b> Go Further</a></li>
<li class="chapter" data-level="3.1.8" data-path="introduction-to-rmarkdown.html"><a href="introduction-to-rmarkdown.html#resources"><i class="fa fa-check"></i><b>3.1.8</b> Resources</a></li>
<li class="chapter" data-level="3.1.9" data-path="introduction-to-rmarkdown.html"><a href="introduction-to-rmarkdown.html#troubleshooting"><i class="fa fa-check"></i><b>3.1.9</b> Troubleshooting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html"><i class="fa fa-check"></i><b>4</b> Version control with git and GitHub</a>
<ul>
<li class="chapter" data-level="4.1" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#learning-objectives-4"><i class="fa fa-check"></i><b>4.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#introduction-to-git"><i class="fa fa-check"></i><b>4.2</b> Introduction to git</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#a-motivating-example"><i class="fa fa-check"></i><b>4.2.1</b> A Motivating Example</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#version-control-and-collaboration-using-git-and-github"><i class="fa fa-check"></i>Version control and Collaboration using Git and GitHub</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#lets-look-at-a-github-repository"><i class="fa fa-check"></i>Let’s look at a GitHub repository</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#the-git-lifecycle"><i class="fa fa-check"></i>The Git lifecycle</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#create-a-remote-repository-on-github"><i class="fa fa-check"></i><b>4.3</b> Create a remote repository on GitHub</a>
<ul>
<li class="chapter" data-level="" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#setup-4"><i class="fa fa-check"></i>Setup</a></li>
<li><a href="version-control-with-git-and-github.html#section-1"></a></li>
<li class="chapter" data-level="" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#challenge-5"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="version-control-with-git-and-github.html#section-2"></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#working-locally-with-git-via-rstudio"><i class="fa fa-check"></i><b>4.4</b> Working locally with Git via RStudio</a>
<ul>
<li class="chapter" data-level="" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#setup-5"><i class="fa fa-check"></i>Setup</a></li>
<li><a href="version-control-with-git-and-github.html#section-3"></a></li>
<li class="chapter" data-level="" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#challenge-6"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="version-control-with-git-and-github.html#section-4"></a></li>
<li class="chapter" data-level="" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#aside-3"><i class="fa fa-check"></i>Aside</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#collaboration-and-conflict-free-workflows"><i class="fa fa-check"></i>Collaboration and conflict free workflows</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#setting-up-git-on-an-existing-project"><i class="fa fa-check"></i><b>4.5</b> Setting up git on an existing project</a>
<ul>
<li class="chapter" data-level="" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#challenge-7"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="version-control-with-git-and-github.html#section-5"></a></li>
<li class="chapter" data-level="" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#challenge-8"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="version-control-with-git-and-github.html#section-6"></a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="version-control-with-git-and-github.html"><a href="version-control-with-git-and-github.html#go-further-1"><i class="fa fa-check"></i><b>4.6</b> Go Further</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html"><i class="fa fa-check"></i><b>5</b> git collaboration and conflict management</a>
<ul>
<li class="chapter" data-level="5.1" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#learning-objectives-5"><i class="fa fa-check"></i><b>5.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#introduction"><i class="fa fa-check"></i><b>5.2</b> Introduction</a></li>
<li class="chapter" data-level="5.3" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#collaborating-with-a-trusted-colleague-without-conflicts"><i class="fa fa-check"></i><b>5.3</b> Collaborating with a trusted colleague <strong>without conflicts</strong></a>
<ul>
<li class="chapter" data-level="" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#setup-6"><i class="fa fa-check"></i>Setup</a></li>
<li><a href="git-collaboration-and-conflict-management.html#section-7"></a></li>
<li class="chapter" data-level="5.3.1" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#step-1-collaborator-clone"><i class="fa fa-check"></i><b>5.3.1</b> Step 1: Collaborator clone</a></li>
<li class="chapter" data-level="5.3.2" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#step-2-collaborator-edits"><i class="fa fa-check"></i><b>5.3.2</b> Step 2: Collaborator Edits</a></li>
<li class="chapter" data-level="5.3.3" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#step-3-collaborator-commit-and-push"><i class="fa fa-check"></i><b>5.3.3</b> Step 3: Collaborator commit and push</a></li>
<li class="chapter" data-level="5.3.4" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#step-4-owner-pull"><i class="fa fa-check"></i><b>5.3.4</b> Step 4: Owner pull</a></li>
<li class="chapter" data-level="5.3.5" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#step-5-owner-edits-commit-and-push"><i class="fa fa-check"></i><b>5.3.5</b> Step 5: Owner edits, commit, and push</a></li>
<li class="chapter" data-level="5.3.6" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#step-6-collaborator-pull"><i class="fa fa-check"></i><b>5.3.6</b> Step 6: Collaborator pull</a></li>
<li class="chapter" data-level="" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#challenge-9"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="git-collaboration-and-conflict-management.html#section-8"></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#merge-conflicts"><i class="fa fa-check"></i><b>5.4</b> Merge conflicts</a></li>
<li class="chapter" data-level="5.5" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#how-to-resolve-a-conflict"><i class="fa fa-check"></i><b>5.5</b> How to resolve a conflict</a>
<ul>
<li class="chapter" data-level="" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#abort-abort-abort"><i class="fa fa-check"></i>Abort, abort, abort…</a></li>
<li class="chapter" data-level="" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#checkout"><i class="fa fa-check"></i>Checkout</a></li>
<li class="chapter" data-level="" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#pull-and-edit-the-file"><i class="fa fa-check"></i>Pull and edit the file</a></li>
<li class="chapter" data-level="5.5.1" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#producing-and-resolving-merge-conflicts"><i class="fa fa-check"></i><b>5.5.1</b> Producing and resolving merge conflicts</a></li>
<li class="chapter" data-level="" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#merge-conflict-challenge"><i class="fa fa-check"></i>Merge Conflict Challenge</a></li>
<li><a href="git-collaboration-and-conflict-management.html#section-9"></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="git-collaboration-and-conflict-management.html"><a href="git-collaboration-and-conflict-management.html#workflows-to-avoid-merge-conflicts"><i class="fa fa-check"></i><b>5.6</b> Workflows to avoid merge conflicts</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-modeling.html"><a href="data-modeling.html"><i class="fa fa-check"></i><b>6</b> Data modeling</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-modeling.html"><a href="data-modeling.html#data-modeling-tidy-data"><i class="fa fa-check"></i><b>6.1</b> Data Modeling &amp; Tidy Data</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="data-modeling.html"><a href="data-modeling.html#learning-objectives-6"><i class="fa fa-check"></i><b>6.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="6.1.2" data-path="data-modeling.html"><a href="data-modeling.html#introduction-1"><i class="fa fa-check"></i><b>6.1.2</b> Introduction</a></li>
<li class="chapter" data-level="6.1.3" data-path="data-modeling.html"><a href="data-modeling.html#recognizing-untidy-data"><i class="fa fa-check"></i><b>6.1.3</b> Recognizing untidy data</a></li>
<li class="chapter" data-level="6.1.4" data-path="data-modeling.html"><a href="data-modeling.html#good-enough-data-modeling"><i class="fa fa-check"></i><b>6.1.4</b> Good enough data modeling</a></li>
<li class="chapter" data-level="6.1.5" data-path="data-modeling.html"><a href="data-modeling.html#using-normalized-data"><i class="fa fa-check"></i><b>6.1.5</b> Using normalized data</a></li>
<li class="chapter" data-level="6.1.6" data-path="data-modeling.html"><a href="data-modeling.html#data-modeling-exercise"><i class="fa fa-check"></i><b>6.1.6</b> Data modeling exercise</a></li>
<li class="chapter" data-level="6.1.7" data-path="data-modeling.html"><a href="data-modeling.html#resources-1"><i class="fa fa-check"></i><b>6.1.7</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html"><i class="fa fa-check"></i><b>7</b> Social aspects of collaboration, data portals</a>
<ul>
<li class="chapter" data-level="7.1" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#collaboration-authorship-and-data-policies"><i class="fa fa-check"></i><b>7.1</b> Collaboration, authorship and data policies</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#developing-a-code-of-conduct"><i class="fa fa-check"></i><b>7.1.1</b> Developing a Code of Conduct</a></li>
<li class="chapter" data-level="7.1.2" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#authorship-and-credit"><i class="fa fa-check"></i><b>7.1.2</b> Authorship and Credit</a></li>
<li class="chapter" data-level="7.1.3" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#data-policies"><i class="fa fa-check"></i><b>7.1.3</b> Data Policies</a></li>
<li class="chapter" data-level="7.1.4" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#extra-reading"><i class="fa fa-check"></i><b>7.1.4</b> Extra Reading</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#creating-a-data-portal"><i class="fa fa-check"></i><b>7.2</b> Creating a data portal</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#what-is-a-portal"><i class="fa fa-check"></i><b>7.2.1</b> What is a Portal?</a></li>
<li class="chapter" data-level="7.2.2" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#portal-uses"><i class="fa fa-check"></i><b>7.2.2</b> Portal Uses</a></li>
<li class="chapter" data-level="7.2.3" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#portal-main-components"><i class="fa fa-check"></i><b>7.2.3</b> Portal Main Components</a></li>
<li class="chapter" data-level="7.2.4" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#creating-portals"><i class="fa fa-check"></i><b>7.2.4</b> Creating Portals</a></li>
<li class="chapter" data-level="7.2.5" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#adding-data-to-portals"><i class="fa fa-check"></i><b>7.2.5</b> Adding Data to Portals</a></li>
<li class="chapter" data-level="7.2.6" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#creating-unique-freeform-pages"><i class="fa fa-check"></i><b>7.2.6</b> Creating Unique Freeform Pages</a></li>
<li class="chapter" data-level="7.2.7" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#saving-and-editing-portals"><i class="fa fa-check"></i><b>7.2.7</b> Saving and Editing Portals</a></li>
<li class="chapter" data-level="7.2.8" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#how-to-publish-portals"><i class="fa fa-check"></i><b>7.2.8</b> How to Publish Portals</a></li>
<li class="chapter" data-level="7.2.9" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#sharing-portals"><i class="fa fa-check"></i><b>7.2.9</b> Sharing Portals</a></li>
<li class="chapter" data-level="" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#challenge-13"><i class="fa fa-check"></i>Challenge</a></li>
<li><a href="social-aspects-of-collaboration-data-portals.html#section-13"></a></li>
<li class="chapter" data-level="7.2.10" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#tutorial-videos"><i class="fa fa-check"></i><b>7.2.10</b> Tutorial Videos</a></li>
<li class="chapter" data-level="7.2.11" data-path="social-aspects-of-collaboration-data-portals.html"><a href="social-aspects-of-collaboration-data-portals.html#acknowledgements-1"><i class="fa fa-check"></i><b>7.2.11</b> Acknowledgements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="cleaning-and-manipulating-data.html"><a href="cleaning-and-manipulating-data.html"><i class="fa fa-check"></i><b>8</b> Cleaning and manipulating data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="cleaning-and-manipulating-data.html"><a href="cleaning-and-manipulating-data.html#data-cleaning-and-manipulation"><i class="fa fa-check"></i><b>8.1</b> Data Cleaning and Manipulation</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="cleaning-and-manipulating-data.html"><a href="cleaning-and-manipulating-data.html#learning-objectives-7"><i class="fa fa-check"></i><b>8.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="8.1.2" data-path="cleaning-and-manipulating-data.html"><a href="cleaning-and-manipulating-data.html#introduction-2"><i class="fa fa-check"></i><b>8.1.2</b> Introduction</a></li>
<li class="chapter" data-level="8.1.3" data-path="cleaning-and-manipulating-data.html"><a href="cleaning-and-manipulating-data.html#data-cleaning-basics"><i class="fa fa-check"></i><b>8.1.3</b> Data Cleaning Basics</a></li>
<li class="chapter" data-level="8.1.4" data-path="cleaning-and-manipulating-data.html"><a href="cleaning-and-manipulating-data.html#joins-in-dplyr"><i class="fa fa-check"></i><b>8.1.4</b> Joins in dplyr</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="data-visualisation-and-publishing-analysis-to-the-web.html"><a href="data-visualisation-and-publishing-analysis-to-the-web.html"><i class="fa fa-check"></i><b>9</b> Data visualisation and publishing analysis to the web</a>
<ul>
<li class="chapter" data-level="9.1" data-path="data-visualisation-and-publishing-analysis-to-the-web.html"><a href="data-visualisation-and-publishing-analysis-to-the-web.html#publication-graphics"><i class="fa fa-check"></i><b>9.1</b> Publication Graphics</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="data-visualisation-and-publishing-analysis-to-the-web.html"><a href="data-visualisation-and-publishing-analysis-to-the-web.html#learning-objectives-8"><i class="fa fa-check"></i><b>9.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="9.1.2" data-path="data-visualisation-and-publishing-analysis-to-the-web.html"><a href="data-visualisation-and-publishing-analysis-to-the-web.html#overview-1"><i class="fa fa-check"></i><b>9.1.2</b> Overview</a></li>
<li class="chapter" data-level="9.1.3" data-path="data-visualisation-and-publishing-analysis-to-the-web.html"><a href="data-visualisation-and-publishing-analysis-to-the-web.html#static-figures-using-ggplot2"><i class="fa fa-check"></i><b>9.1.3</b> Static figures using <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.4" data-path="data-visualisation-and-publishing-analysis-to-the-web.html"><a href="data-visualisation-and-publishing-analysis-to-the-web.html#interactive-visualization-using-leaflet-and-dt"><i class="fa fa-check"></i><b>9.1.4</b> Interactive visualization using <code>leaflet</code> and <code>DT</code></a></li>
<li class="chapter" data-level="9.1.5" data-path="data-visualisation-and-publishing-analysis-to-the-web.html"><a href="data-visualisation-and-publishing-analysis-to-the-web.html#resources-2"><i class="fa fa-check"></i><b>9.1.5</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="git-pull-requests-and-branches.html"><a href="git-pull-requests-and-branches.html"><i class="fa fa-check"></i><b>10</b> git pull requests and branches</a>
<ul>
<li class="chapter" data-level="10.1" data-path="git-pull-requests-and-branches.html"><a href="git-pull-requests-and-branches.html#collaborating-using-git"><i class="fa fa-check"></i><b>10.1</b> Collaborating using Git</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="git-pull-requests-and-branches.html"><a href="git-pull-requests-and-branches.html#learning-objectives-9"><i class="fa fa-check"></i><b>10.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="10.1.2" data-path="git-pull-requests-and-branches.html"><a href="git-pull-requests-and-branches.html#pull-requests"><i class="fa fa-check"></i><b>10.1.2</b> Pull requests</a></li>
<li class="chapter" data-level="10.1.3" data-path="git-pull-requests-and-branches.html"><a href="git-pull-requests-and-branches.html#exercise-create-and-merge-pull-requests"><i class="fa fa-check"></i><b>10.1.3</b> Exercise: Create and merge pull requests</a></li>
<li class="chapter" data-level="10.1.4" data-path="git-pull-requests-and-branches.html"><a href="git-pull-requests-and-branches.html#branches"><i class="fa fa-check"></i><b>10.1.4</b> Branches</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html"><i class="fa fa-check"></i><b>11</b> Writing functions and packages</a>
<ul>
<li class="chapter" data-level="11.1" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#creating-r-functions"><i class="fa fa-check"></i><b>11.1</b> Creating R Functions</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#why-functions"><i class="fa fa-check"></i><b>11.1.1</b> Why functions?</a></li>
<li class="chapter" data-level="11.1.2" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#documenting-r-functions"><i class="fa fa-check"></i><b>11.1.2</b> Documenting R functions</a></li>
<li class="chapter" data-level="11.1.3" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#summary-4"><i class="fa fa-check"></i><b>11.1.3</b> Summary</a></li>
<li class="chapter" data-level="11.1.4" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#examples-minimizing-work-with-functions"><i class="fa fa-check"></i><b>11.1.4</b> Examples: Minimizing work with functions</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#creating-r-packages"><i class="fa fa-check"></i><b>11.2</b> Creating R Packages</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#learning-objectives-10"><i class="fa fa-check"></i><b>11.2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="11.2.2" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#why-packages"><i class="fa fa-check"></i><b>11.2.2</b> Why packages?</a></li>
<li class="chapter" data-level="11.2.3" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#install-and-load-packages"><i class="fa fa-check"></i><b>11.2.3</b> Install and load packages</a></li>
<li class="chapter" data-level="11.2.4" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#create-a-basic-package"><i class="fa fa-check"></i><b>11.2.4</b> Create a basic package</a></li>
<li class="chapter" data-level="11.2.5" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#add-your-code"><i class="fa fa-check"></i><b>11.2.5</b> Add your code</a></li>
<li class="chapter" data-level="11.2.6" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#add-documentation"><i class="fa fa-check"></i><b>11.2.6</b> Add documentation</a></li>
<li class="chapter" data-level="11.2.7" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#test-your-package"><i class="fa fa-check"></i><b>11.2.7</b> Test your package</a></li>
<li class="chapter" data-level="11.2.8" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#checking-and-installing-your-package"><i class="fa fa-check"></i><b>11.2.8</b> Checking and installing your package</a></li>
<li class="chapter" data-level="11.2.9" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#sharing-and-releasing-your-package"><i class="fa fa-check"></i><b>11.2.9</b> Sharing and releasing your package</a></li>
<li class="chapter" data-level="11.2.10" data-path="writing-functions-and-packages.html"><a href="writing-functions-and-packages.html#more-reading"><i class="fa fa-check"></i><b>11.2.10</b> More reading</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="exercise-cleaning-and-manipulating-data.html"><a href="exercise-cleaning-and-manipulating-data.html"><i class="fa fa-check"></i><b>12</b> Exercise: Cleaning and manipulating data</a>
<ul>
<li class="chapter" data-level="12.1" data-path="exercise-cleaning-and-manipulating-data.html"><a href="exercise-cleaning-and-manipulating-data.html#hands-on-clean-and-integrate-datasets"><i class="fa fa-check"></i><b>12.1</b> Hands On: Clean and Integrate Datasets</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="exercise-cleaning-and-manipulating-data.html"><a href="exercise-cleaning-and-manipulating-data.html#learning-objectives-11"><i class="fa fa-check"></i><b>12.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="12.1.2" data-path="exercise-cleaning-and-manipulating-data.html"><a href="exercise-cleaning-and-manipulating-data.html#outline"><i class="fa fa-check"></i><b>12.1.2</b> Outline</a></li>
<li class="chapter" data-level="12.1.3" data-path="exercise-cleaning-and-manipulating-data.html"><a href="exercise-cleaning-and-manipulating-data.html#full-solution.-warning-spoilers-ahead"><i class="fa fa-check"></i><b>12.1.3</b> Full solution. Warning, spoilers ahead!</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="spatial-analysis.html"><a href="spatial-analysis.html"><i class="fa fa-check"></i><b>13</b> Spatial analysis</a>
<ul>
<li class="chapter" data-level="13.1" data-path="spatial-analysis.html"><a href="spatial-analysis.html#spatial-vector-analysis-using-sf"><i class="fa fa-check"></i><b>13.1</b> Spatial vector analysis using <code>sf</code></a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="spatial-analysis.html"><a href="spatial-analysis.html#learning-objectives-12"><i class="fa fa-check"></i><b>13.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="13.1.2" data-path="spatial-analysis.html"><a href="spatial-analysis.html#introduction-3"><i class="fa fa-check"></i><b>13.1.2</b> Introduction</a></li>
<li class="chapter" data-level="13.1.3" data-path="spatial-analysis.html"><a href="spatial-analysis.html#working-with-geospatial-data"><i class="fa fa-check"></i><b>13.1.3</b> Working with geospatial data</a></li>
<li class="chapter" data-level="13.1.4" data-path="spatial-analysis.html"><a href="spatial-analysis.html#sf-the-tidyverse"><i class="fa fa-check"></i><b>13.1.4</b> <code>sf</code> &amp; the Tidyverse</a></li>
<li class="chapter" data-level="13.1.5" data-path="spatial-analysis.html"><a href="spatial-analysis.html#visualize-with-ggplot"><i class="fa fa-check"></i><b>13.1.5</b> Visualize with ggplot</a></li>
<li class="chapter" data-level="13.1.6" data-path="spatial-analysis.html"><a href="spatial-analysis.html#visualize-sf-objects-with-leaflet"><i class="fa fa-check"></i><b>13.1.6</b> Visualize <code>sf</code> objects with leaflet</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html"><i class="fa fa-check"></i><b>14</b> Reproducibility and provenance</a>
<ul>
<li class="chapter" data-level="14.1" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#introduction-to-shiny"><i class="fa fa-check"></i><b>14.1</b> Introduction to Shiny</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#learning-objectives-13"><i class="fa fa-check"></i><b>14.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="14.1.2" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#overview-2"><i class="fa fa-check"></i><b>14.1.2</b> Overview</a></li>
<li class="chapter" data-level="14.1.3" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#create-a-sample-shiny-application"><i class="fa fa-check"></i><b>14.1.3</b> Create a sample shiny application</a></li>
<li class="chapter" data-level="14.1.4" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#shiny-architecture"><i class="fa fa-check"></i><b>14.1.4</b> Shiny architecture</a></li>
<li class="chapter" data-level="14.1.5" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#interactive-scatterplots"><i class="fa fa-check"></i><b>14.1.5</b> Interactive scatterplots</a></li>
<li class="chapter" data-level="14.1.6" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#extending-the-user-interface-with-dynamic-plots"><i class="fa fa-check"></i><b>14.1.6</b> Extending the user interface with dynamic plots</a></li>
<li class="chapter" data-level="14.1.7" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#finishing-touches-data-citation"><i class="fa fa-check"></i><b>14.1.7</b> Finishing touches: data citation</a></li>
<li class="chapter" data-level="14.1.8" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#publishing-shiny-applications"><i class="fa fa-check"></i><b>14.1.8</b> Publishing Shiny applications</a></li>
<li class="chapter" data-level="14.1.9" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#summary-5"><i class="fa fa-check"></i><b>14.1.9</b> Summary</a></li>
<li class="chapter" data-level="14.1.10" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#full-source-code-for-the-final-application"><i class="fa fa-check"></i><b>14.1.10</b> Full source code for the final application</a></li>
<li class="chapter" data-level="14.1.11" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#a-shinier-app-with-tabs-and-a-map"><i class="fa fa-check"></i><b>14.1.11</b> A shinier app with tabs and a map!</a></li>
<li class="chapter" data-level="14.1.12" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#resources-3"><i class="fa fa-check"></i><b>14.1.12</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#reproducible-and-transparent-papers"><i class="fa fa-check"></i><b>14.2</b> Reproducible and Transparent Papers</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#learning-objectives-14"><i class="fa fa-check"></i><b>14.2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#data-citation-1"><i class="fa fa-check"></i>Data Citation</a></li>
<li class="chapter" data-level="14.2.2" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#reproducible-papers-with-rrtools"><i class="fa fa-check"></i><b>14.2.2</b> Reproducible Papers with <code>rrtools</code></a></li>
<li class="chapter" data-level="14.2.3" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#reproducible-papers-with-rticles"><i class="fa fa-check"></i><b>14.2.3</b> Reproducible Papers with <code>rticles</code></a></li>
<li class="chapter" data-level="" data-path="reproducibility-and-provenance.html"><a href="reproducibility-and-provenance.html#the-5th-generation-of-reproducible-papers"><i class="fa fa-check"></i>The 5th Generation of Reproducible Papers</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible Research Techniques for Synthesis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reproducibility-and-provenance" class="section level1" number="14">
<h1><span class="header-section-number">14</span> Reproducibility and provenance</h1>
<div id="introduction-to-shiny" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> Introduction to Shiny</h2>
<div id="learning-objectives-13" class="section level3" number="14.1.1">
<h3><span class="header-section-number">14.1.1</span> Learning Objectives</h3>
<p>In this lesson we will:</p>
<ul>
<li>review the capabilities in Shiny applications</li>
<li>learn about the basic layout for Shiny interfaces</li>
<li>learn about the server component for Shiny applications</li>
<li>build a simple shiny application for interactive plotting</li>
</ul>
</div>
<div id="overview-2" class="section level3" number="14.1.2">
<h3><span class="header-section-number">14.1.2</span> Overview</h3>
<p><a href="http://shiny.rstudio.com/">Shiny</a> is an R package for creating interactive data visualizations embedded in a web application that you and your colleagues can view with just a web browser. Shiny apps are relatively easy to construct, and provide interactive features for letting others share and explore data and analyses.</p>
<p>There are some really great examples of what Shiny can do on the RStudio webite like <a href="https://shiny.rstudio.com/gallery/movie-explorer.html">this one exploring movie metadata</a>. A more scientific example is a tool from the SASAP project exploring <a href="https://sasap-data.shinyapps.io/board_of_fisheries/">proposal data from the Alaska Board of Fisheries</a>. There is also an app for <a href="https://deltascience.shinyapps.io/monitoring/">Delta monitoring efforts</a>.</p>
<p><img src="images/shiny-sasap-app.png" /></p>
<p>Most any kind of analysis and visualization that you can do in R can be turned into a useful interactive visualization for the web that lets people explore your data more intuitively But, a Shiny application is not the best way to preserve or archive your data. Instead, for preservation use a repository that is archival in its mission like the <a href="https://knb.ecoinformatics.org">KNB Data Repository</a>, <a href="https://zenodo.org">Zenodo</a>, or <a href="https://datadryad.org">Dryad</a>. This will assign a citable identifier to the specific version of your data, which you can then read in an interactive visualiztion with Shiny.</p>
<p>For example, the data for the Alaska Board of Fisheries application is published on the KNB and is citable as:</p>
<p>Meagan Krupa, Molly Cunfer, and Jeanette Clark. 2017. Alaska Board of Fisheries Proposals 1959-2016. Knowledge Network for Biocomplexity. <a href="https://doi.org/10.5063/F1QN652R">doi:10.5063/F1QN652R</a>.</p>
<p>While that is the best citation and archival location of the dataset, using Shiny, one can also provide an easy-to-use exploratory web application that you use to make your point that directly loads the data from the archival site. For example, the Board of Fisheries application above lets people who are not inherently familiar with the data to generate graphs showing the relationships between the variables in the dataset.</p>
<p>We’re going to create a simple shiny app with two sliders so we can interactively control inputs to an R function. These sliders will allow us to interactively control a plot.</p>
</div>
<div id="create-a-sample-shiny-application" class="section level3" number="14.1.3">
<h3><span class="header-section-number">14.1.3</span> Create a sample shiny application</h3>
<ul>
<li>File &gt; New &gt; Shiny Web App…</li>
<li>Set some fields:
<img src="images/shiny-new-app.png" alt="creating a new Shiny app with RStudio" />
<ul>
<li>Name it “myapp” or something else</li>
<li>Select “Single File”</li>
<li>Choose to create it in a new folder called ‘shiny-demo’</li>
<li>Click Create</li>
</ul></li>
</ul>
<p>RStudio will create a new file called <code>app.R</code> that contains the Shiny application.<br />
Run it by choosing <code>Run App</code> from the RStudio editor header bar. This will bring up
the default demo Shiny application, which plots a histogram and lets you control
the number of bins in the plot.</p>
<p><img src="images/shiny-default-app.png" /></p>
<p>Note that you can drag the slider to change the number of bins in the histogram.</p>
</div>
<div id="shiny-architecture" class="section level3" number="14.1.4">
<h3><span class="header-section-number">14.1.4</span> Shiny architecture</h3>
<p>A Shiny application consists of two functions, the <code>ui</code> and the <code>server</code>. The <code>ui</code>
function is responsible for drawing the web page, while the <code>server</code> is responsible
for any calculations and for creating any dynamic components to be rendered.</p>
<p>Each time that a user makes a change to one of the interactive widgets, the <code>ui</code>
grabs the new value (say, the new slider min and max) and sends a request to the
<code>server</code> to re-render the output, passing it the new <code>input</code> values that the user
had set. These interactions can sometimes happen on one computer (e.g., if the
application is running in your local RStudio instance). Other times, the <code>ui</code> runs on
the web browser on one computer, while the <code>server</code> runs on a remote computer somewhere
else on the Internet (e.g., if the application is deployed to a web server).</p>
<p><img src="images/shiny-architecture.png" /></p>
</div>
<div id="interactive-scatterplots" class="section level3" number="14.1.5">
<h3><span class="header-section-number">14.1.5</span> Interactive scatterplots</h3>
<p>Let’s modify this application to plot Yolo bypass secchi disk data in a time-series, and allow aspects of the plot to be interactively changed.</p>
<div id="load-data-for-the-example" class="section level4" number="14.1.5.1">
<h4><span class="header-section-number">14.1.5.1</span> Load data for the example</h4>
<p>Use this code to load the data at the top of your <code>app.R</code> script. Note we are using <code>contentId</code> again, and we have filtered
for some species of interest.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="reproducibility-and-provenance.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb207-2"><a href="reproducibility-and-provenance.html#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(contentid)</span>
<span id="cb207-3"><a href="reproducibility-and-provenance.html#cb207-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb207-4"><a href="reproducibility-and-provenance.html#cb207-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb207-5"><a href="reproducibility-and-provenance.html#cb207-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb207-6"><a href="reproducibility-and-provenance.html#cb207-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-7"><a href="reproducibility-and-provenance.html#cb207-7" aria-hidden="true" tabindex="-1"></a>sha1 <span class="ot">&lt;-</span> <span class="st">&#39;hash://sha1/317d7f840e598f5f3be732ab0e04f00a8051c6d0&#39;</span></span>
<span id="cb207-8"><a href="reproducibility-and-provenance.html#cb207-8" aria-hidden="true" tabindex="-1"></a>delta.file <span class="ot">&lt;-</span> contentid<span class="sc">::</span><span class="fu">resolve</span>(sha1, <span class="at">registries=</span><span class="fu">c</span>(<span class="st">&quot;dataone&quot;</span>), <span class="at">store =</span> <span class="cn">TRUE</span>)</span>
<span id="cb207-9"><a href="reproducibility-and-provenance.html#cb207-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-10"><a href="reproducibility-and-provenance.html#cb207-10" aria-hidden="true" tabindex="-1"></a><span class="co"># fix the sample date format, and filter for species of interest</span></span>
<span id="cb207-11"><a href="reproducibility-and-provenance.html#cb207-11" aria-hidden="true" tabindex="-1"></a>delta_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(delta.file) <span class="sc">%&gt;%</span> </span>
<span id="cb207-12"><a href="reproducibility-and-provenance.html#cb207-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">SampleDate =</span> <span class="fu">mdy</span>(SampleDate))  <span class="sc">%&gt;%</span> </span>
<span id="cb207-13"><a href="reproducibility-and-provenance.html#cb207-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">&quot;Salmon|Striped Bass|Smelt|Sturgeon&quot;</span>, CommonName))</span>
<span id="cb207-14"><a href="reproducibility-and-provenance.html#cb207-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-15"><a href="reproducibility-and-provenance.html#cb207-15" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(delta_data)</span></code></pre></div>
</div>
<div id="add-a-simple-timeseries-using-ggplot" class="section level4" number="14.1.5.2">
<h4><span class="header-section-number">14.1.5.2</span> Add a simple timeseries using ggplot</h4>
<p>We know there has been a lot of variation through time in the delta, so let’s plot a time-series of Secchi depth. We do so by switching out the histogram code for a simple ggplot, like so:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="reproducibility-and-provenance.html#cb208-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb208-2"><a href="reproducibility-and-provenance.html#cb208-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-3"><a href="reproducibility-and-provenance.html#cb208-3" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb208-4"><a href="reproducibility-and-provenance.html#cb208-4" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb208-5"><a href="reproducibility-and-provenance.html#cb208-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>(delta_data, <span class="at">mapping =</span> <span class="fu">aes</span>(SampleDate, Secchi)) <span class="sc">+</span></span>
<span id="cb208-6"><a href="reproducibility-and-provenance.html#cb208-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_point</span>(<span class="at">colour=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb208-7"><a href="reproducibility-and-provenance.html#cb208-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">theme_light</span>()</span>
<span id="cb208-8"><a href="reproducibility-and-provenance.html#cb208-8" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb208-9"><a href="reproducibility-and-provenance.html#cb208-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>If you now reload the app, it will display the simple time-series instead of
the histogram. At this point, we haven’t added any interactivity.</p>
<p>In a Shiny application, the <code>server</code> function provides the part of the application
that creates our interactive components, and returns them to the user interface (<code>ui</code>)
to be displayed on the page.</p>
</div>
<div id="add-sliders-to-set-the-start-and-end-date-for-the-x-axis" class="section level4" number="14.1.5.3">
<h4><span class="header-section-number">14.1.5.3</span> Add sliders to set the start and end date for the X axis</h4>
<p>To make the plot interactive, first we need to modify our user interface to include
widgits that we’ll use to control the plot. Specifically, we will add a new slider
for setting the <code>minDate</code> parameter, and modify the existing slider to be used for
the <code>maxDate</code> parameter. To do so, modify the <code>sidebarPanel()</code> call to include two
<code>sliderInput()</code> function calls:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="reproducibility-and-provenance.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sidebarPanel</span>(</span>
<span id="cb209-2"><a href="reproducibility-and-provenance.html#cb209-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sliderInput</span>(<span class="st">&quot;minDate&quot;</span>,</span>
<span id="cb209-3"><a href="reproducibility-and-provenance.html#cb209-3" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;Min Date:&quot;</span>,</span>
<span id="cb209-4"><a href="reproducibility-and-provenance.html#cb209-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">min =</span> <span class="fu">as.Date</span>(<span class="st">&quot;1998-01-01&quot;</span>),</span>
<span id="cb209-5"><a href="reproducibility-and-provenance.html#cb209-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">max =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>),</span>
<span id="cb209-6"><a href="reproducibility-and-provenance.html#cb209-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">value =</span> <span class="fu">as.Date</span>(<span class="st">&quot;1998-01-01&quot;</span>)),</span>
<span id="cb209-7"><a href="reproducibility-and-provenance.html#cb209-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sliderInput</span>(<span class="st">&quot;maxDate&quot;</span>,</span>
<span id="cb209-8"><a href="reproducibility-and-provenance.html#cb209-8" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;Max Date:&quot;</span>,</span>
<span id="cb209-9"><a href="reproducibility-and-provenance.html#cb209-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">min =</span> <span class="fu">as.Date</span>(<span class="st">&quot;1998-01-01&quot;</span>),</span>
<span id="cb209-10"><a href="reproducibility-and-provenance.html#cb209-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">max =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>),</span>
<span id="cb209-11"><a href="reproducibility-and-provenance.html#cb209-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">value =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2005-01-01&quot;</span>))</span>
<span id="cb209-12"><a href="reproducibility-and-provenance.html#cb209-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>If you reload the app, you’ll see two new sliders, but if you change them, they don’t
make any changes to the plot. Let’s fix that.</p>
</div>
<div id="connect-the-slider-values-to-the-plot" class="section level4" number="14.1.5.4">
<h4><span class="header-section-number">14.1.5.4</span> Connect the slider values to the plot</h4>
<p>Finally, to make the plot interactive, we can use the <code>input</code> and <code>output</code> variables
that are passed into the <code>server</code> function to access the current values of the sliders.
In Shiny, each UI component is given an input identifier when it is created, which is used as the name of the value in the input list. So, we can access the minimum depth as <code>input$minDate</code> and the max as <code>input$maxDate</code>. Let’s use these values now by adding limits to our X axis
in the ggplot:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="reproducibility-and-provenance.html#cb210-1" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>(delta_data, <span class="at">mapping =</span> <span class="fu">aes</span>(SampleDate, Secchi)) <span class="sc">+</span></span>
<span id="cb210-2"><a href="reproducibility-and-provenance.html#cb210-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_point</span>(<span class="at">colour=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb210-3"><a href="reproducibility-and-provenance.html#cb210-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">xlim</span>(<span class="fu">c</span>(input<span class="sc">$</span>minDate,input<span class="sc">$</span>maxDate)) <span class="sc">+</span></span>
<span id="cb210-4"><a href="reproducibility-and-provenance.html#cb210-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">theme_light</span>()</span></code></pre></div>
<p>At this point, we have a fully interactive plot, and the sliders can be used to change the
min and max of the Depth axis.</p>
<p><img src="images/shiny-yolo-1.png" /></p>
<p>Looks so shiny!</p>
</div>
<div id="reversed-axes" class="section level4" number="14.1.5.5">
<h4><span class="header-section-number">14.1.5.5</span> Reversed Axes?</h4>
<p>What happens if a clever user sets the minimum for the X axis at a greater value than the maximum?
You’ll see that the direction of the X axis becomes reversed, and the plotted points display right
to left. This is really an error condition. Rather than use two independent sliders, we can modify
the first slider to output a range of values, which will prevent the min from being greater than
the max. You do so by setting the value of the slider to a vector of length 2, representing
the default min and max date for the slider, such as <code>c(as.Date("1998-01-01"), as.Date("2020-01-01"))</code>. So, delete the second slider,
rename the first, and provide a vector for the value, like this:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="reproducibility-and-provenance.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sliderInput</span>(<span class="st">&quot;date&quot;</span>,</span>
<span id="cb211-2"><a href="reproducibility-and-provenance.html#cb211-2" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Date:&quot;</span>,</span>
<span id="cb211-3"><a href="reproducibility-and-provenance.html#cb211-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">min =</span> <span class="fu">as.Date</span>(<span class="st">&quot;1998-01-01&quot;</span>),</span>
<span id="cb211-4"><a href="reproducibility-and-provenance.html#cb211-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>),</span>
<span id="cb211-5"><a href="reproducibility-and-provenance.html#cb211-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">value =</span> <span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">&quot;1998-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>)))</span>
<span id="cb211-6"><a href="reproducibility-and-provenance.html#cb211-6" aria-hidden="true" tabindex="-1"></a><span class="er">)</span></span></code></pre></div>
<p>Now, modify the ggplot to use this new <code>date</code> slider value, which now will be returned
as a vector of length 2. The first element of the depth vector is the min, and the
second is the max value on the slider.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="reproducibility-and-provenance.html#cb212-1" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>(delta_data, <span class="at">mapping =</span> <span class="fu">aes</span>(SampleDate, Secchi)) <span class="sc">+</span></span>
<span id="cb212-2"><a href="reproducibility-and-provenance.html#cb212-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_point</span>(<span class="at">colour=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb212-3"><a href="reproducibility-and-provenance.html#cb212-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">xlim</span>(<span class="fu">c</span>(input<span class="sc">$</span>date[<span class="dv">1</span>],input<span class="sc">$</span>date[<span class="dv">2</span>])) <span class="sc">+</span></span>
<span id="cb212-4"><a href="reproducibility-and-provenance.html#cb212-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="images/shiny-yolo-2.png" /></p>
</div>
</div>
<div id="extending-the-user-interface-with-dynamic-plots" class="section level3" number="14.1.6">
<h3><span class="header-section-number">14.1.6</span> Extending the user interface with dynamic plots</h3>
<p>If you want to display more than one plot in your application, and provide
a different set of controls for each plot, the current layout would be too simple.
Next we will extend the application to break the page up into vertical sections, and
add a new plot in which the user can choose which variables are plotted. The current
layout is set up such that the <code>FluidPage</code> contains the title element, and then
a <code>sidebarLayout</code>, which is divided horizontally into a <code>sidebarPanel</code> and a
<code>mainPanel</code>.</p>
<p><img src="images/shiny-layout-1.png" /></p>
<div id="vertical-layout" class="section level4" number="14.1.6.1">
<h4><span class="header-section-number">14.1.6.1</span> Vertical layout</h4>
<p>To extend the layout, we will first nest the existing <code>sidebarLayout</code> in a new
<code>verticalLayout</code>, which simply flows components down the page vertically. Then
we will add a new <code>sidebarLayout</code> to contain the bottom controls and graph.</p>
<p><img src="images/shiny-layout-2.png" /></p>
<p>This mechanism of alternately nesting vertical and horizontal panels can be used
to segment the screen into boxes with rules about how each of the panels is resized,
and how the content flows when the browser window is resized. The <code>sidebarLayout</code>
works to keep the sidebar about 1/3 of the box, and the main panel about 2/3, which
is a good proportion for our controls and plots. Add the verticalLayout, and the
second sidebarLayout for the second plot as follows:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="reproducibility-and-provenance.html#cb213-1" aria-hidden="true" tabindex="-1"></a>    <span class="fu">verticalLayout</span>(</span>
<span id="cb213-2"><a href="reproducibility-and-provenance.html#cb213-2" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Sidebar with a slider input for depth axis</span></span>
<span id="cb213-3"><a href="reproducibility-and-provenance.html#cb213-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarLayout</span>(</span>
<span id="cb213-4"><a href="reproducibility-and-provenance.html#cb213-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sidebarPanel</span>(</span>
<span id="cb213-5"><a href="reproducibility-and-provenance.html#cb213-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">sliderInput</span>(<span class="st">&quot;date&quot;</span>,</span>
<span id="cb213-6"><a href="reproducibility-and-provenance.html#cb213-6" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;Date:&quot;</span>,</span>
<span id="cb213-7"><a href="reproducibility-and-provenance.html#cb213-7" aria-hidden="true" tabindex="-1"></a>                            <span class="at">min =</span> <span class="fu">as.Date</span>(<span class="st">&quot;1998-01-01&quot;</span>),</span>
<span id="cb213-8"><a href="reproducibility-and-provenance.html#cb213-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>),</span>
<span id="cb213-9"><a href="reproducibility-and-provenance.html#cb213-9" aria-hidden="true" tabindex="-1"></a>                            <span class="at">value =</span> <span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">&quot;1998-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>)))</span>
<span id="cb213-10"><a href="reproducibility-and-provenance.html#cb213-10" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb213-11"><a href="reproducibility-and-provenance.html#cb213-11" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Show a plot of the generated distribution</span></span>
<span id="cb213-12"><a href="reproducibility-and-provenance.html#cb213-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mainPanel</span>(</span>
<span id="cb213-13"><a href="reproducibility-and-provenance.html#cb213-13" aria-hidden="true" tabindex="-1"></a>               <span class="fu">plotOutput</span>(<span class="st">&quot;distPlot&quot;</span>)</span>
<span id="cb213-14"><a href="reproducibility-and-provenance.html#cb213-14" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb213-15"><a href="reproducibility-and-provenance.html#cb213-15" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb213-16"><a href="reproducibility-and-provenance.html#cb213-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-17"><a href="reproducibility-and-provenance.html#cb213-17" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">hr</span>(),</span>
<span id="cb213-18"><a href="reproducibility-and-provenance.html#cb213-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-19"><a href="reproducibility-and-provenance.html#cb213-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarLayout</span>(</span>
<span id="cb213-20"><a href="reproducibility-and-provenance.html#cb213-20" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sidebarPanel</span>(</span>
<span id="cb213-21"><a href="reproducibility-and-provenance.html#cb213-21" aria-hidden="true" tabindex="-1"></a>                <span class="fu">selectInput</span>(<span class="st">&quot;x_variable&quot;</span>, <span class="st">&quot;X Variable&quot;</span>, cols, <span class="at">selected =</span> <span class="st">&quot;SampleDate&quot;</span>),</span>
<span id="cb213-22"><a href="reproducibility-and-provenance.html#cb213-22" aria-hidden="true" tabindex="-1"></a>                <span class="fu">selectInput</span>(<span class="st">&quot;y_variable&quot;</span>, <span class="st">&quot;Y Variable&quot;</span>, cols, <span class="at">selected =</span> <span class="st">&quot;Count&quot;</span>),</span>
<span id="cb213-23"><a href="reproducibility-and-provenance.html#cb213-23" aria-hidden="true" tabindex="-1"></a>                <span class="fu">selectInput</span>(<span class="st">&quot;color_variable&quot;</span>, <span class="st">&quot;Color&quot;</span>, cols, <span class="at">selected =</span> <span class="st">&quot;CommonName&quot;</span>)</span>
<span id="cb213-24"><a href="reproducibility-and-provenance.html#cb213-24" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb213-25"><a href="reproducibility-and-provenance.html#cb213-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-26"><a href="reproducibility-and-provenance.html#cb213-26" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Show a plot with configurable axes</span></span>
<span id="cb213-27"><a href="reproducibility-and-provenance.html#cb213-27" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mainPanel</span>(</span>
<span id="cb213-28"><a href="reproducibility-and-provenance.html#cb213-28" aria-hidden="true" tabindex="-1"></a>                <span class="fu">plotOutput</span>(<span class="st">&quot;varPlot&quot;</span>)</span>
<span id="cb213-29"><a href="reproducibility-and-provenance.html#cb213-29" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb213-30"><a href="reproducibility-and-provenance.html#cb213-30" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb213-31"><a href="reproducibility-and-provenance.html#cb213-31" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">hr</span>()</span></code></pre></div>
<p>Note that the second <code>sidebarPanel</code> uses three <code>selectInput</code> elements to provide dropdown
menus with the variable columns (<code>cols</code>) from our data frame. To manage that, we need to
first set up the cols variable, which we do by saving the variables names
from the <code>delta_data</code> data frame to a variable:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="reproducibility-and-provenance.html#cb214-1" aria-hidden="true" tabindex="-1"></a>sha1 <span class="ot">&lt;-</span> <span class="st">&#39;hash://sha1/317d7f840e598f5f3be732ab0e04f00a8051c6d0&#39;</span></span>
<span id="cb214-2"><a href="reproducibility-and-provenance.html#cb214-2" aria-hidden="true" tabindex="-1"></a>delta.file <span class="ot">&lt;-</span> contentid<span class="sc">::</span><span class="fu">resolve</span>(sha1, <span class="at">registries=</span><span class="fu">c</span>(<span class="st">&quot;dataone&quot;</span>), <span class="at">store =</span> <span class="cn">TRUE</span>)</span>
<span id="cb214-3"><a href="reproducibility-and-provenance.html#cb214-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-4"><a href="reproducibility-and-provenance.html#cb214-4" aria-hidden="true" tabindex="-1"></a><span class="co"># fix the sample date format, and filter for species of interest</span></span>
<span id="cb214-5"><a href="reproducibility-and-provenance.html#cb214-5" aria-hidden="true" tabindex="-1"></a>delta_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(delta.file) <span class="sc">%&gt;%</span> </span>
<span id="cb214-6"><a href="reproducibility-and-provenance.html#cb214-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">SampleDate =</span> <span class="fu">mdy</span>(SampleDate))  <span class="sc">%&gt;%</span> </span>
<span id="cb214-7"><a href="reproducibility-and-provenance.html#cb214-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">&quot;Salmon|Striped Bass|Smelt|Sturgeon&quot;</span>, CommonName))</span>
<span id="cb214-8"><a href="reproducibility-and-provenance.html#cb214-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-9"><a href="reproducibility-and-provenance.html#cb214-9" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">names</span>(delta_data)</span></code></pre></div>
</div>
<div id="add-the-dynamic-plot" class="section level4" number="14.1.6.2">
<h4><span class="header-section-number">14.1.6.2</span> Add the dynamic plot</h4>
<p>Because we named the second plot <code>varPlot</code> in our UI section, we now need to modify
the server to produce this plot. Its very similar to the first plot, but this time
we want to use the selected variables from the user controls to choose which
variables are plotted. These variable names from the <code>$input</code> are character
strings, and so would not be recognized as symbols in the <code>aes</code> mapping in ggplot. As recommended by the tidyverse authors, we use the <a href="https://dplyr.tidyverse.org/articles/programming.html">non-standard evaluation</a> syntax of <code>.data[["colname"]]</code> to access the variables.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="reproducibility-and-provenance.html#cb215-1" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>varPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb215-2"><a href="reproducibility-and-provenance.html#cb215-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(delta_data, <span class="fu">aes</span>(<span class="at">x =</span> .data[[input<span class="sc">$</span>x_variable]],</span>
<span id="cb215-3"><a href="reproducibility-and-provenance.html#cb215-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">y =</span> .data[[input<span class="sc">$</span>y_variable]],</span>
<span id="cb215-4"><a href="reproducibility-and-provenance.html#cb215-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">color =</span> .data[[input<span class="sc">$</span>color_variable]])) <span class="sc">+</span></span>
<span id="cb215-5"><a href="reproducibility-and-provenance.html#cb215-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb215-6"><a href="reproducibility-and-provenance.html#cb215-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme_light</span>()</span>
<span id="cb215-7"><a href="reproducibility-and-provenance.html#cb215-7" aria-hidden="true" tabindex="-1"></a>    })</span></code></pre></div>
</div>
</div>
<div id="finishing-touches-data-citation" class="section level3" number="14.1.7">
<h3><span class="header-section-number">14.1.7</span> Finishing touches: data citation</h3>
<p>Citing the data that we used for this application is the right thing to do, and easy.
You can add arbitrary HTML to the layout using utility functions in the <code>tags</code> list.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="reproducibility-and-provenance.html#cb216-1" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Application title</span></span>
<span id="cb216-2"><a href="reproducibility-and-provenance.html#cb216-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">&quot;Yolo Bypass Fish and Water Quality Data&quot;</span>),</span>
<span id="cb216-3"><a href="reproducibility-and-provenance.html#cb216-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">p</span>(<span class="st">&quot;Data for this application are from: &quot;</span>),</span>
<span id="cb216-4"><a href="reproducibility-and-provenance.html#cb216-4" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb216-5"><a href="reproducibility-and-provenance.html#cb216-5" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(<span class="st">&quot;Interagency Ecological Program: Fish catch and water quality data from the Sacramento River floodplain and tidal slough, collected by the Yolo Bypass Fish Monitoring Program, 1998-2018.&quot;</span>,</span>
<span id="cb216-6"><a href="reproducibility-and-provenance.html#cb216-6" aria-hidden="true" tabindex="-1"></a>                tags<span class="sc">$</span><span class="fu">a</span>(<span class="st">&quot;doi:10.6073/pasta/b0b15aef7f3b52d2c5adc10004c05a6f&quot;</span>, <span class="at">href=</span><span class="st">&quot;http://doi.org/10.6073/pasta/b0b15aef7f3b52d2c5adc10004c05a6f&quot;</span>)</span>
<span id="cb216-7"><a href="reproducibility-and-provenance.html#cb216-7" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb216-8"><a href="reproducibility-and-provenance.html#cb216-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb216-9"><a href="reproducibility-and-provenance.html#cb216-9" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">br</span>(),</span>
<span id="cb216-10"><a href="reproducibility-and-provenance.html#cb216-10" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">hr</span>(),</span></code></pre></div>
<p>The final application shows the data citation, the depth plot, and the
configurable scatterplot in three distinct panels.</p>
<p><img src="images/shiny-yolo-app.png" /></p>
</div>
<div id="publishing-shiny-applications" class="section level3" number="14.1.8">
<h3><span class="header-section-number">14.1.8</span> Publishing Shiny applications</h3>
<p>Once you’ve finished your app, you’ll want to share it with others. To do so, you need to
publish it to a server that is set up to <a href="https://shiny.rstudio.com/deploy/">handle Shiny apps</a>.<br />
Your main choices are:</p>
<ul>
<li><a href="http://www.shinyapps.io/">shinyapps.io</a> (Hosted by RStudio)
<ul>
<li>This is a service offered by RStudio, which is initially free for 5 or fewer apps
and for limited run time, but has paid tiers to support more demanding apps. You
can deploy your app using a single button push from within RStudio.</li>
</ul></li>
<li><a href="https://www.rstudio.com/products/shiny/shiny-server/">Shiny server</a> (On premises)
<ul>
<li>This is an open source server which you can deploy for free on your own hardware.
It requires more setup and configuration, but it can be used without a fee.</li>
</ul></li>
<li><a href="https://www.rstudio.com/products/connect/">RStudio connect</a> (On premises)
<ul>
<li>This is a paid product you install on your local hardware, and that contains the most
advanced suite of services for hosting apps and RMarkdown reports. You can
publish using a single button click from RStudio.</li>
</ul></li>
</ul>
<p>A comparison of <a href="https://rstudio.com/products/shiny/shiny-server/">publishing features</a> is available from RStudio.</p>
<div id="publishing-to-shinyapps.io" class="section level4" number="14.1.8.1">
<h4><span class="header-section-number">14.1.8.1</span> Publishing to shinyapps.io</h4>
<p>The easiest path is to create an account on shinyapps.io, and then configure RStudio to
use that account for publishing. Instructions for enabling your local RStudio to publish
to your account are displayed when you first log into shinyapps.io:</p>
<p><img src="images/shiny-io-account.png" /></p>
<p>Once your account is configured locally, you can simply use the <code>Publish</code> button from the
application window in RStudio, and your app will be live before you know it!</p>
<p><img src="images/shiny-publish.png" /></p>
</div>
</div>
<div id="summary-5" class="section level3" number="14.1.9">
<h3><span class="header-section-number">14.1.9</span> Summary</h3>
<p>Shiny is a fantastic way to quickly and efficiently provide data exploration for your
data and code. We highly recommend it for its interactivity, but an archival-quality
repository is the best long-term home for your data and products. In this example,
we used data drawn directly from the <a href="http://doi.org/10.6073/pasta/b0b15aef7f3b52d2c5adc10004c05a6f">EDI repository</a>
in our Shiny app, which offers both the preservation guarantees of an archive, plus
the interactive data exploration from Shiny. You can utilize the full power of R and
the tidyverse for writing your interactive applications.</p>
</div>
<div id="full-source-code-for-the-final-application" class="section level3" number="14.1.10">
<h3><span class="header-section-number">14.1.10</span> Full source code for the final application</h3>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="reproducibility-and-provenance.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb217-2"><a href="reproducibility-and-provenance.html#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(contentid)</span>
<span id="cb217-3"><a href="reproducibility-and-provenance.html#cb217-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb217-4"><a href="reproducibility-and-provenance.html#cb217-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb217-5"><a href="reproducibility-and-provenance.html#cb217-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb217-6"><a href="reproducibility-and-provenance.html#cb217-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-7"><a href="reproducibility-and-provenance.html#cb217-7" aria-hidden="true" tabindex="-1"></a><span class="co"># read in the data from EDI</span></span>
<span id="cb217-8"><a href="reproducibility-and-provenance.html#cb217-8" aria-hidden="true" tabindex="-1"></a>sha1 <span class="ot">&lt;-</span> <span class="st">&#39;hash://sha1/317d7f840e598f5f3be732ab0e04f00a8051c6d0&#39;</span></span>
<span id="cb217-9"><a href="reproducibility-and-provenance.html#cb217-9" aria-hidden="true" tabindex="-1"></a>delta.file <span class="ot">&lt;-</span> contentid<span class="sc">::</span><span class="fu">resolve</span>(sha1, <span class="at">registries=</span><span class="fu">c</span>(<span class="st">&quot;dataone&quot;</span>), <span class="at">store =</span> <span class="cn">TRUE</span>)</span>
<span id="cb217-10"><a href="reproducibility-and-provenance.html#cb217-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-11"><a href="reproducibility-and-provenance.html#cb217-11" aria-hidden="true" tabindex="-1"></a><span class="co"># fix the sample date format, and filter for species of interest</span></span>
<span id="cb217-12"><a href="reproducibility-and-provenance.html#cb217-12" aria-hidden="true" tabindex="-1"></a>delta_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(delta.file) <span class="sc">%&gt;%</span> </span>
<span id="cb217-13"><a href="reproducibility-and-provenance.html#cb217-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">SampleDate =</span> <span class="fu">mdy</span>(SampleDate))  <span class="sc">%&gt;%</span> </span>
<span id="cb217-14"><a href="reproducibility-and-provenance.html#cb217-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">&quot;Salmon|Striped Bass|Smelt|Sturgeon&quot;</span>, CommonName))</span>
<span id="cb217-15"><a href="reproducibility-and-provenance.html#cb217-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-16"><a href="reproducibility-and-provenance.html#cb217-16" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">names</span>(delta_data)</span>
<span id="cb217-17"><a href="reproducibility-and-provenance.html#cb217-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-18"><a href="reproducibility-and-provenance.html#cb217-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-19"><a href="reproducibility-and-provenance.html#cb217-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-20"><a href="reproducibility-and-provenance.html#cb217-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Define UI for application that draws a two plots</span></span>
<span id="cb217-21"><a href="reproducibility-and-provenance.html#cb217-21" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb217-22"><a href="reproducibility-and-provenance.html#cb217-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-23"><a href="reproducibility-and-provenance.html#cb217-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Application title and data  source</span></span>
<span id="cb217-24"><a href="reproducibility-and-provenance.html#cb217-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">&quot;Sacramento River floodplain fish and water quality dataa&quot;</span>),</span>
<span id="cb217-25"><a href="reproducibility-and-provenance.html#cb217-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">p</span>(<span class="st">&quot;Data for this application are from: &quot;</span>),</span>
<span id="cb217-26"><a href="reproducibility-and-provenance.html#cb217-26" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb217-27"><a href="reproducibility-and-provenance.html#cb217-27" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(<span class="st">&quot;Interagency Ecological Program: Fish catch and water quality data from the Sacramento River floodplain and tidal slough, collected by the Yolo Bypass Fish Monitoring Program, 1998-2018.&quot;</span>,</span>
<span id="cb217-28"><a href="reproducibility-and-provenance.html#cb217-28" aria-hidden="true" tabindex="-1"></a>                tags<span class="sc">$</span><span class="fu">a</span>(<span class="st">&quot;doi:10.6073/pasta/b0b15aef7f3b52d2c5adc10004c05a6f&quot;</span>, <span class="at">href=</span><span class="st">&quot;http://doi.org/10.6073/pasta/b0b15aef7f3b52d2c5adc10004c05a6f&quot;</span>)</span>
<span id="cb217-29"><a href="reproducibility-and-provenance.html#cb217-29" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb217-30"><a href="reproducibility-and-provenance.html#cb217-30" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb217-31"><a href="reproducibility-and-provenance.html#cb217-31" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">br</span>(),</span>
<span id="cb217-32"><a href="reproducibility-and-provenance.html#cb217-32" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">hr</span>(),</span>
<span id="cb217-33"><a href="reproducibility-and-provenance.html#cb217-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-34"><a href="reproducibility-and-provenance.html#cb217-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">verticalLayout</span>(</span>
<span id="cb217-35"><a href="reproducibility-and-provenance.html#cb217-35" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Sidebar with a slider input for time axis</span></span>
<span id="cb217-36"><a href="reproducibility-and-provenance.html#cb217-36" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarLayout</span>(</span>
<span id="cb217-37"><a href="reproducibility-and-provenance.html#cb217-37" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sidebarPanel</span>(</span>
<span id="cb217-38"><a href="reproducibility-and-provenance.html#cb217-38" aria-hidden="true" tabindex="-1"></a>                <span class="fu">sliderInput</span>(<span class="st">&quot;date&quot;</span>,</span>
<span id="cb217-39"><a href="reproducibility-and-provenance.html#cb217-39" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;Date:&quot;</span>,</span>
<span id="cb217-40"><a href="reproducibility-and-provenance.html#cb217-40" aria-hidden="true" tabindex="-1"></a>                            <span class="at">min =</span> <span class="fu">as.Date</span>(<span class="st">&quot;1998-01-01&quot;</span>),</span>
<span id="cb217-41"><a href="reproducibility-and-provenance.html#cb217-41" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>),</span>
<span id="cb217-42"><a href="reproducibility-and-provenance.html#cb217-42" aria-hidden="true" tabindex="-1"></a>                            <span class="at">value =</span> <span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">&quot;1998-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>)))</span>
<span id="cb217-43"><a href="reproducibility-and-provenance.html#cb217-43" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb217-44"><a href="reproducibility-and-provenance.html#cb217-44" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Show a plot of the generated timeseries</span></span>
<span id="cb217-45"><a href="reproducibility-and-provenance.html#cb217-45" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mainPanel</span>(</span>
<span id="cb217-46"><a href="reproducibility-and-provenance.html#cb217-46" aria-hidden="true" tabindex="-1"></a>                <span class="fu">plotOutput</span>(<span class="st">&quot;distPlot&quot;</span>)</span>
<span id="cb217-47"><a href="reproducibility-and-provenance.html#cb217-47" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb217-48"><a href="reproducibility-and-provenance.html#cb217-48" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb217-49"><a href="reproducibility-and-provenance.html#cb217-49" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb217-50"><a href="reproducibility-and-provenance.html#cb217-50" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">hr</span>(),</span>
<span id="cb217-51"><a href="reproducibility-and-provenance.html#cb217-51" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb217-52"><a href="reproducibility-and-provenance.html#cb217-52" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarLayout</span>(</span>
<span id="cb217-53"><a href="reproducibility-and-provenance.html#cb217-53" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sidebarPanel</span>(</span>
<span id="cb217-54"><a href="reproducibility-and-provenance.html#cb217-54" aria-hidden="true" tabindex="-1"></a>                <span class="fu">selectInput</span>(<span class="st">&quot;x_variable&quot;</span>, <span class="st">&quot;X Variable&quot;</span>, cols, <span class="at">selected =</span> <span class="st">&quot;SampleDate&quot;</span>),</span>
<span id="cb217-55"><a href="reproducibility-and-provenance.html#cb217-55" aria-hidden="true" tabindex="-1"></a>                <span class="fu">selectInput</span>(<span class="st">&quot;y_variable&quot;</span>, <span class="st">&quot;Y Variable&quot;</span>, cols, <span class="at">selected =</span> <span class="st">&quot;Count&quot;</span>),</span>
<span id="cb217-56"><a href="reproducibility-and-provenance.html#cb217-56" aria-hidden="true" tabindex="-1"></a>                <span class="fu">selectInput</span>(<span class="st">&quot;color_variable&quot;</span>, <span class="st">&quot;Color&quot;</span>, cols, <span class="at">selected =</span> <span class="st">&quot;CommonName&quot;</span>)</span>
<span id="cb217-57"><a href="reproducibility-and-provenance.html#cb217-57" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb217-58"><a href="reproducibility-and-provenance.html#cb217-58" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb217-59"><a href="reproducibility-and-provenance.html#cb217-59" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Show a plot with configurable axes</span></span>
<span id="cb217-60"><a href="reproducibility-and-provenance.html#cb217-60" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mainPanel</span>(</span>
<span id="cb217-61"><a href="reproducibility-and-provenance.html#cb217-61" aria-hidden="true" tabindex="-1"></a>                <span class="fu">plotOutput</span>(<span class="st">&quot;varPlot&quot;</span>)</span>
<span id="cb217-62"><a href="reproducibility-and-provenance.html#cb217-62" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb217-63"><a href="reproducibility-and-provenance.html#cb217-63" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb217-64"><a href="reproducibility-and-provenance.html#cb217-64" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">hr</span>()</span>
<span id="cb217-65"><a href="reproducibility-and-provenance.html#cb217-65" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb217-66"><a href="reproducibility-and-provenance.html#cb217-66" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb217-67"><a href="reproducibility-and-provenance.html#cb217-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-68"><a href="reproducibility-and-provenance.html#cb217-68" aria-hidden="true" tabindex="-1"></a><span class="co"># Define server logic required to draw the two plots</span></span>
<span id="cb217-69"><a href="reproducibility-and-provenance.html#cb217-69" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb217-70"><a href="reproducibility-and-provenance.html#cb217-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-71"><a href="reproducibility-and-provenance.html#cb217-71" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  turbidity plot</span></span>
<span id="cb217-72"><a href="reproducibility-and-provenance.html#cb217-72" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb217-73"><a href="reproducibility-and-provenance.html#cb217-73" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb217-74"><a href="reproducibility-and-provenance.html#cb217-74" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>(delta_data, <span class="at">mapping =</span> <span class="fu">aes</span>(SampleDate, Secchi)) <span class="sc">+</span></span>
<span id="cb217-75"><a href="reproducibility-and-provenance.html#cb217-75" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_point</span>(<span class="at">colour=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb217-76"><a href="reproducibility-and-provenance.html#cb217-76" aria-hidden="true" tabindex="-1"></a>            <span class="fu">xlim</span>(<span class="fu">c</span>(input<span class="sc">$</span>date[<span class="dv">1</span>],input<span class="sc">$</span>date[<span class="dv">2</span>])) <span class="sc">+</span></span>
<span id="cb217-77"><a href="reproducibility-and-provenance.html#cb217-77" aria-hidden="true" tabindex="-1"></a>            <span class="fu">theme_light</span>()</span>
<span id="cb217-78"><a href="reproducibility-and-provenance.html#cb217-78" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb217-79"><a href="reproducibility-and-provenance.html#cb217-79" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-80"><a href="reproducibility-and-provenance.html#cb217-80" aria-hidden="true" tabindex="-1"></a>    <span class="co"># mix and  match plot</span></span>
<span id="cb217-81"><a href="reproducibility-and-provenance.html#cb217-81" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>varPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb217-82"><a href="reproducibility-and-provenance.html#cb217-82" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(delta_data, <span class="fu">aes</span>(<span class="at">x =</span> .data[[input<span class="sc">$</span>x_variable]],</span>
<span id="cb217-83"><a href="reproducibility-and-provenance.html#cb217-83" aria-hidden="true" tabindex="-1"></a>                             <span class="at">y =</span> .data[[input<span class="sc">$</span>y_variable]],</span>
<span id="cb217-84"><a href="reproducibility-and-provenance.html#cb217-84" aria-hidden="true" tabindex="-1"></a>                             <span class="at">color =</span> .data[[input<span class="sc">$</span>color_variable]])) <span class="sc">+</span></span>
<span id="cb217-85"><a href="reproducibility-and-provenance.html#cb217-85" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb217-86"><a href="reproducibility-and-provenance.html#cb217-86" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme_light</span>()</span>
<span id="cb217-87"><a href="reproducibility-and-provenance.html#cb217-87" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb217-88"><a href="reproducibility-and-provenance.html#cb217-88" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-89"><a href="reproducibility-and-provenance.html#cb217-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-90"><a href="reproducibility-and-provenance.html#cb217-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-91"><a href="reproducibility-and-provenance.html#cb217-91" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the application </span></span>
<span id="cb217-92"><a href="reproducibility-and-provenance.html#cb217-92" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
<div id="a-shinier-app-with-tabs-and-a-map" class="section level3" number="14.1.11">
<h3><span class="header-section-number">14.1.11</span> A shinier app with tabs and a map!</h3>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="reproducibility-and-provenance.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb218-2"><a href="reproducibility-and-provenance.html#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(contentid)</span>
<span id="cb218-3"><a href="reproducibility-and-provenance.html#cb218-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb218-4"><a href="reproducibility-and-provenance.html#cb218-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb218-5"><a href="reproducibility-and-provenance.html#cb218-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb218-6"><a href="reproducibility-and-provenance.html#cb218-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb218-7"><a href="reproducibility-and-provenance.html#cb218-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinythemes)</span>
<span id="cb218-8"><a href="reproducibility-and-provenance.html#cb218-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb218-9"><a href="reproducibility-and-provenance.html#cb218-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb218-10"><a href="reproducibility-and-provenance.html#cb218-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(snakecase)</span>
<span id="cb218-11"><a href="reproducibility-and-provenance.html#cb218-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-12"><a href="reproducibility-and-provenance.html#cb218-12" aria-hidden="true" tabindex="-1"></a><span class="co"># read in the data from EDI</span></span>
<span id="cb218-13"><a href="reproducibility-and-provenance.html#cb218-13" aria-hidden="true" tabindex="-1"></a>sha1 <span class="ot">&lt;-</span> <span class="st">&#39;hash://sha1/317d7f840e598f5f3be732ab0e04f00a8051c6d0&#39;</span></span>
<span id="cb218-14"><a href="reproducibility-and-provenance.html#cb218-14" aria-hidden="true" tabindex="-1"></a>delta.file <span class="ot">&lt;-</span> contentid<span class="sc">::</span><span class="fu">resolve</span>(sha1, <span class="at">registries=</span><span class="fu">c</span>(<span class="st">&quot;dataone&quot;</span>), <span class="at">store =</span> <span class="cn">TRUE</span>)</span>
<span id="cb218-15"><a href="reproducibility-and-provenance.html#cb218-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-16"><a href="reproducibility-and-provenance.html#cb218-16" aria-hidden="true" tabindex="-1"></a><span class="co"># fix the sample date format, and filter for species of interest</span></span>
<span id="cb218-17"><a href="reproducibility-and-provenance.html#cb218-17" aria-hidden="true" tabindex="-1"></a>delta_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(delta.file) <span class="sc">%&gt;%</span> </span>
<span id="cb218-18"><a href="reproducibility-and-provenance.html#cb218-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">SampleDate =</span> <span class="fu">mdy</span>(SampleDate))  <span class="sc">%&gt;%</span> </span>
<span id="cb218-19"><a href="reproducibility-and-provenance.html#cb218-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">&quot;Salmon|Striped Bass|Smelt|Sturgeon&quot;</span>, CommonName)) <span class="sc">%&gt;%</span> </span>
<span id="cb218-20"><a href="reproducibility-and-provenance.html#cb218-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">DissolvedOxygen =</span> DO,</span>
<span id="cb218-21"><a href="reproducibility-and-provenance.html#cb218-21" aria-hidden="true" tabindex="-1"></a>           <span class="at">Ph =</span> pH,</span>
<span id="cb218-22"><a href="reproducibility-and-provenance.html#cb218-22" aria-hidden="true" tabindex="-1"></a>           <span class="at">SpecificConductivity =</span> SpCnd)</span>
<span id="cb218-23"><a href="reproducibility-and-provenance.html#cb218-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-24"><a href="reproducibility-and-provenance.html#cb218-24" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">names</span>(delta_data)</span>
<span id="cb218-25"><a href="reproducibility-and-provenance.html#cb218-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-26"><a href="reproducibility-and-provenance.html#cb218-26" aria-hidden="true" tabindex="-1"></a>sites <span class="ot">&lt;-</span> delta_data <span class="sc">%&gt;%</span> </span>
<span id="cb218-27"><a href="reproducibility-and-provenance.html#cb218-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(StationCode, Latitude, Longitude) <span class="sc">%&gt;%</span> </span>
<span id="cb218-28"><a href="reproducibility-and-provenance.html#cb218-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb218-29"><a href="reproducibility-and-provenance.html#cb218-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&#39;Longitude&#39;</span>,<span class="st">&#39;Latitude&#39;</span>), <span class="at">crs =</span> <span class="dv">4269</span>,  <span class="at">remove =</span> <span class="cn">FALSE</span>)</span>
<span id="cb218-30"><a href="reproducibility-and-provenance.html#cb218-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-31"><a href="reproducibility-and-provenance.html#cb218-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-32"><a href="reproducibility-and-provenance.html#cb218-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-33"><a href="reproducibility-and-provenance.html#cb218-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Define UI for application</span></span>
<span id="cb218-34"><a href="reproducibility-and-provenance.html#cb218-34" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb218-35"><a href="reproducibility-and-provenance.html#cb218-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">navbarPage</span>(<span class="at">theme =</span> <span class="fu">shinytheme</span>(<span class="st">&quot;flatly&quot;</span>), <span class="at">collapsible =</span> <span class="cn">TRUE</span>,</span>
<span id="cb218-36"><a href="reproducibility-and-provenance.html#cb218-36" aria-hidden="true" tabindex="-1"></a>               <span class="fu">HTML</span>(<span class="st">&#39;&lt;a style=&quot;text-decoration:none;cursor:default;color:#FFFFFF;&quot; class=&quot;active&quot; href=&quot;#&quot;&gt;Sacramento River Floodplain Data&lt;/a&gt;&#39;</span>), <span class="at">id=</span><span class="st">&quot;nav&quot;</span>,</span>
<span id="cb218-37"><a href="reproducibility-and-provenance.html#cb218-37" aria-hidden="true" tabindex="-1"></a>               <span class="at">windowTitle =</span> <span class="st">&quot;Sacramento River floodplain fish and water quality data&quot;</span>,</span>
<span id="cb218-38"><a href="reproducibility-and-provenance.html#cb218-38" aria-hidden="true" tabindex="-1"></a>               </span>
<span id="cb218-39"><a href="reproducibility-and-provenance.html#cb218-39" aria-hidden="true" tabindex="-1"></a>               <span class="fu">tabPanel</span>(<span class="st">&quot;Data Sources&quot;</span>,</span>
<span id="cb218-40"><a href="reproducibility-and-provenance.html#cb218-40" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">verticalLayout</span>(</span>
<span id="cb218-41"><a href="reproducibility-and-provenance.html#cb218-41" aria-hidden="true" tabindex="-1"></a>                            <span class="co"># Application title and data  source</span></span>
<span id="cb218-42"><a href="reproducibility-and-provenance.html#cb218-42" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">titlePanel</span>(<span class="st">&quot;Sacramento River floodplain fish and water quality data&quot;</span>),</span>
<span id="cb218-43"><a href="reproducibility-and-provenance.html#cb218-43" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">p</span>(<span class="st">&quot;Data for this application are from: &quot;</span>),</span>
<span id="cb218-44"><a href="reproducibility-and-provenance.html#cb218-44" aria-hidden="true" tabindex="-1"></a>                            tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb218-45"><a href="reproducibility-and-provenance.html#cb218-45" aria-hidden="true" tabindex="-1"></a>                                tags<span class="sc">$</span><span class="fu">li</span>(<span class="st">&quot;Interagency Ecological Program: Fish catch and water quality data from the Sacramento River floodplain and tidal slough, collected by the Yolo Bypass Fish Monitoring Program, 1998-2018.&quot;</span>,</span>
<span id="cb218-46"><a href="reproducibility-and-provenance.html#cb218-46" aria-hidden="true" tabindex="-1"></a>                                        tags<span class="sc">$</span><span class="fu">a</span>(<span class="st">&quot;doi:10.6073/pasta/b0b15aef7f3b52d2c5adc10004c05a6f&quot;</span>, <span class="at">href=</span><span class="st">&quot;http://doi.org/10.6073/pasta/b0b15aef7f3b52d2c5adc10004c05a6f&quot;</span>)</span>
<span id="cb218-47"><a href="reproducibility-and-provenance.html#cb218-47" aria-hidden="true" tabindex="-1"></a>                                )</span>
<span id="cb218-48"><a href="reproducibility-and-provenance.html#cb218-48" aria-hidden="true" tabindex="-1"></a>                            ),</span>
<span id="cb218-49"><a href="reproducibility-and-provenance.html#cb218-49" aria-hidden="true" tabindex="-1"></a>                            tags<span class="sc">$</span><span class="fu">br</span>(),</span>
<span id="cb218-50"><a href="reproducibility-and-provenance.html#cb218-50" aria-hidden="true" tabindex="-1"></a>                            tags<span class="sc">$</span><span class="fu">hr</span>(),</span>
<span id="cb218-51"><a href="reproducibility-and-provenance.html#cb218-51" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">p</span>(<span class="st">&quot;Map of sampling locations&quot;</span>),</span>
<span id="cb218-52"><a href="reproducibility-and-provenance.html#cb218-52" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">mainPanel</span>(<span class="fu">leafletOutput</span>(<span class="st">&quot;map&quot;</span>))</span>
<span id="cb218-53"><a href="reproducibility-and-provenance.html#cb218-53" aria-hidden="true" tabindex="-1"></a>                        )</span>
<span id="cb218-54"><a href="reproducibility-and-provenance.html#cb218-54" aria-hidden="true" tabindex="-1"></a>               ),</span>
<span id="cb218-55"><a href="reproducibility-and-provenance.html#cb218-55" aria-hidden="true" tabindex="-1"></a>               </span>
<span id="cb218-56"><a href="reproducibility-and-provenance.html#cb218-56" aria-hidden="true" tabindex="-1"></a>               <span class="fu">tabPanel</span>(</span>
<span id="cb218-57"><a href="reproducibility-and-provenance.html#cb218-57" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;Explore&quot;</span>,</span>
<span id="cb218-58"><a href="reproducibility-and-provenance.html#cb218-58" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">verticalLayout</span>(</span>
<span id="cb218-59"><a href="reproducibility-and-provenance.html#cb218-59" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">mainPanel</span>(</span>
<span id="cb218-60"><a href="reproducibility-and-provenance.html#cb218-60" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">plotOutput</span>(<span class="st">&quot;distPlot&quot;</span>),</span>
<span id="cb218-61"><a href="reproducibility-and-provenance.html#cb218-61" aria-hidden="true" tabindex="-1"></a>                           <span class="at">width =</span>  <span class="dv">12</span>,</span>
<span id="cb218-62"><a href="reproducibility-and-provenance.html#cb218-62" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">absolutePanel</span>(<span class="at">id =</span> <span class="st">&quot;controls&quot;</span>,</span>
<span id="cb218-63"><a href="reproducibility-and-provenance.html#cb218-63" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">class =</span> <span class="st">&quot;panel panel-default&quot;</span>,</span>
<span id="cb218-64"><a href="reproducibility-and-provenance.html#cb218-64" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">top =</span> <span class="dv">175</span>, <span class="at">left =</span> <span class="dv">75</span>, <span class="at">width =</span> <span class="dv">300</span>, <span class="at">fixed=</span><span class="cn">TRUE</span>,</span>
<span id="cb218-65"><a href="reproducibility-and-provenance.html#cb218-65" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">draggable =</span> <span class="cn">TRUE</span>, <span class="at">height =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb218-66"><a href="reproducibility-and-provenance.html#cb218-66" aria-hidden="true" tabindex="-1"></a>                                         <span class="fu">sliderInput</span>(<span class="st">&quot;date&quot;</span>,</span>
<span id="cb218-67"><a href="reproducibility-and-provenance.html#cb218-67" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">&quot;Date:&quot;</span>,</span>
<span id="cb218-68"><a href="reproducibility-and-provenance.html#cb218-68" aria-hidden="true" tabindex="-1"></a>                                                     <span class="at">min =</span> <span class="fu">as.Date</span>(<span class="st">&quot;1998-01-01&quot;</span>),</span>
<span id="cb218-69"><a href="reproducibility-and-provenance.html#cb218-69" aria-hidden="true" tabindex="-1"></a>                                                     <span class="at">max =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>),</span>
<span id="cb218-70"><a href="reproducibility-and-provenance.html#cb218-70" aria-hidden="true" tabindex="-1"></a>                                                     <span class="at">value =</span> <span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">&quot;1998-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>)))</span>
<span id="cb218-71"><a href="reproducibility-and-provenance.html#cb218-71" aria-hidden="true" tabindex="-1"></a>                                         </span>
<span id="cb218-72"><a href="reproducibility-and-provenance.html#cb218-72" aria-hidden="true" tabindex="-1"></a>                           )</span>
<span id="cb218-73"><a href="reproducibility-and-provenance.html#cb218-73" aria-hidden="true" tabindex="-1"></a>                       ),</span>
<span id="cb218-74"><a href="reproducibility-and-provenance.html#cb218-74" aria-hidden="true" tabindex="-1"></a>                       </span>
<span id="cb218-75"><a href="reproducibility-and-provenance.html#cb218-75" aria-hidden="true" tabindex="-1"></a>                       tags<span class="sc">$</span><span class="fu">hr</span>(),</span>
<span id="cb218-76"><a href="reproducibility-and-provenance.html#cb218-76" aria-hidden="true" tabindex="-1"></a>                       </span>
<span id="cb218-77"><a href="reproducibility-and-provenance.html#cb218-77" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">sidebarLayout</span>(</span>
<span id="cb218-78"><a href="reproducibility-and-provenance.html#cb218-78" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">sidebarPanel</span>(</span>
<span id="cb218-79"><a href="reproducibility-and-provenance.html#cb218-79" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">selectInput</span>(<span class="st">&quot;x_variable&quot;</span>, <span class="st">&quot;X Variable&quot;</span>, cols, <span class="at">selected =</span> <span class="st">&quot;SampleDate&quot;</span>),</span>
<span id="cb218-80"><a href="reproducibility-and-provenance.html#cb218-80" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">selectInput</span>(<span class="st">&quot;y_variable&quot;</span>, <span class="st">&quot;Y Variable&quot;</span>, cols, <span class="at">selected =</span> <span class="st">&quot;Count&quot;</span>),</span>
<span id="cb218-81"><a href="reproducibility-and-provenance.html#cb218-81" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">selectInput</span>(<span class="st">&quot;color_variable&quot;</span>, <span class="st">&quot;Color&quot;</span>, cols, <span class="at">selected =</span> <span class="st">&quot;CommonName&quot;</span>)</span>
<span id="cb218-82"><a href="reproducibility-and-provenance.html#cb218-82" aria-hidden="true" tabindex="-1"></a>                           ),</span>
<span id="cb218-83"><a href="reproducibility-and-provenance.html#cb218-83" aria-hidden="true" tabindex="-1"></a>                           </span>
<span id="cb218-84"><a href="reproducibility-and-provenance.html#cb218-84" aria-hidden="true" tabindex="-1"></a>                           <span class="co"># Show a plot with configurable axes</span></span>
<span id="cb218-85"><a href="reproducibility-and-provenance.html#cb218-85" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">mainPanel</span>(</span>
<span id="cb218-86"><a href="reproducibility-and-provenance.html#cb218-86" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">plotOutput</span>(<span class="st">&quot;varPlot&quot;</span>)</span>
<span id="cb218-87"><a href="reproducibility-and-provenance.html#cb218-87" aria-hidden="true" tabindex="-1"></a>                           )</span>
<span id="cb218-88"><a href="reproducibility-and-provenance.html#cb218-88" aria-hidden="true" tabindex="-1"></a>                       ),</span>
<span id="cb218-89"><a href="reproducibility-and-provenance.html#cb218-89" aria-hidden="true" tabindex="-1"></a>                       tags<span class="sc">$</span><span class="fu">hr</span>()</span>
<span id="cb218-90"><a href="reproducibility-and-provenance.html#cb218-90" aria-hidden="true" tabindex="-1"></a>                   )</span>
<span id="cb218-91"><a href="reproducibility-and-provenance.html#cb218-91" aria-hidden="true" tabindex="-1"></a>               )</span>
<span id="cb218-92"><a href="reproducibility-and-provenance.html#cb218-92" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb218-93"><a href="reproducibility-and-provenance.html#cb218-93" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb218-94"><a href="reproducibility-and-provenance.html#cb218-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-95"><a href="reproducibility-and-provenance.html#cb218-95" aria-hidden="true" tabindex="-1"></a><span class="co"># Define server logic required to draw the two plots</span></span>
<span id="cb218-96"><a href="reproducibility-and-provenance.html#cb218-96" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb218-97"><a href="reproducibility-and-provenance.html#cb218-97" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb218-98"><a href="reproducibility-and-provenance.html#cb218-98" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb218-99"><a href="reproducibility-and-provenance.html#cb218-99" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>map <span class="ot">&lt;-</span> <span class="fu">renderLeaflet</span>({<span class="fu">leaflet</span>(sites) <span class="sc">%&gt;%</span> </span>
<span id="cb218-100"><a href="reproducibility-and-provenance.html#cb218-100" aria-hidden="true" tabindex="-1"></a>            <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb218-101"><a href="reproducibility-and-provenance.html#cb218-101" aria-hidden="true" tabindex="-1"></a>            <span class="fu">addCircleMarkers</span>(<span class="at">data =</span> sites,</span>
<span id="cb218-102"><a href="reproducibility-and-provenance.html#cb218-102" aria-hidden="true" tabindex="-1"></a>                             <span class="at">lat =</span> <span class="sc">~</span>Latitude,</span>
<span id="cb218-103"><a href="reproducibility-and-provenance.html#cb218-103" aria-hidden="true" tabindex="-1"></a>                             <span class="at">lng =</span> <span class="sc">~</span>Longitude,</span>
<span id="cb218-104"><a href="reproducibility-and-provenance.html#cb218-104" aria-hidden="true" tabindex="-1"></a>                             <span class="at">radius =</span> <span class="dv">10</span>, <span class="co"># arbitrary scaling</span></span>
<span id="cb218-105"><a href="reproducibility-and-provenance.html#cb218-105" aria-hidden="true" tabindex="-1"></a>                             <span class="at">fillColor =</span> <span class="st">&quot;gray&quot;</span>,</span>
<span id="cb218-106"><a href="reproducibility-and-provenance.html#cb218-106" aria-hidden="true" tabindex="-1"></a>                             <span class="at">fillOpacity =</span> <span class="dv">1</span>,</span>
<span id="cb218-107"><a href="reproducibility-and-provenance.html#cb218-107" aria-hidden="true" tabindex="-1"></a>                             <span class="at">weight =</span> <span class="fl">0.25</span>,</span>
<span id="cb218-108"><a href="reproducibility-and-provenance.html#cb218-108" aria-hidden="true" tabindex="-1"></a>                             <span class="at">color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb218-109"><a href="reproducibility-and-provenance.html#cb218-109" aria-hidden="true" tabindex="-1"></a>                             <span class="at">label =</span> <span class="sc">~</span>StationCode)</span>
<span id="cb218-110"><a href="reproducibility-and-provenance.html#cb218-110" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb218-111"><a href="reproducibility-and-provenance.html#cb218-111" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb218-112"><a href="reproducibility-and-provenance.html#cb218-112" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  turbidity plot</span></span>
<span id="cb218-113"><a href="reproducibility-and-provenance.html#cb218-113" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb218-114"><a href="reproducibility-and-provenance.html#cb218-114" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb218-115"><a href="reproducibility-and-provenance.html#cb218-115" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>(delta_data, <span class="at">mapping =</span> <span class="fu">aes</span>(SampleDate, Secchi)) <span class="sc">+</span></span>
<span id="cb218-116"><a href="reproducibility-and-provenance.html#cb218-116" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_point</span>(<span class="at">colour=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb218-117"><a href="reproducibility-and-provenance.html#cb218-117" aria-hidden="true" tabindex="-1"></a>            <span class="fu">xlim</span>(<span class="fu">c</span>(input<span class="sc">$</span>date[<span class="dv">1</span>],input<span class="sc">$</span>date[<span class="dv">2</span>])) <span class="sc">+</span></span>
<span id="cb218-118"><a href="reproducibility-and-provenance.html#cb218-118" aria-hidden="true" tabindex="-1"></a>            <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Sample Date&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Secchi Depth (m)&quot;</span>) <span class="sc">+</span></span>
<span id="cb218-119"><a href="reproducibility-and-provenance.html#cb218-119" aria-hidden="true" tabindex="-1"></a>            <span class="fu">theme_light</span>()</span>
<span id="cb218-120"><a href="reproducibility-and-provenance.html#cb218-120" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb218-121"><a href="reproducibility-and-provenance.html#cb218-121" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb218-122"><a href="reproducibility-and-provenance.html#cb218-122" aria-hidden="true" tabindex="-1"></a>    <span class="co"># mix and  match plot</span></span>
<span id="cb218-123"><a href="reproducibility-and-provenance.html#cb218-123" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>varPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb218-124"><a href="reproducibility-and-provenance.html#cb218-124" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>(delta_data, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> .data[[input<span class="sc">$</span>x_variable]],</span>
<span id="cb218-125"><a href="reproducibility-and-provenance.html#cb218-125" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">y =</span> .data[[input<span class="sc">$</span>y_variable]],</span>
<span id="cb218-126"><a href="reproducibility-and-provenance.html#cb218-126" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">color =</span> .data[[input<span class="sc">$</span>color_variable]])) <span class="sc">+</span></span>
<span id="cb218-127"><a href="reproducibility-and-provenance.html#cb218-127" aria-hidden="true" tabindex="-1"></a>            <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">to_any_case</span>(input<span class="sc">$</span>x_variable, <span class="at">case =</span> <span class="st">&quot;title&quot;</span>),</span>
<span id="cb218-128"><a href="reproducibility-and-provenance.html#cb218-128" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> <span class="fu">to_any_case</span>(input<span class="sc">$</span>y_variable, <span class="at">case =</span> <span class="st">&quot;title&quot;</span>),</span>
<span id="cb218-129"><a href="reproducibility-and-provenance.html#cb218-129" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="fu">to_any_case</span>(input<span class="sc">$</span>color_variable, <span class="at">case =</span> <span class="st">&quot;title&quot;</span>)) <span class="sc">+</span></span>
<span id="cb218-130"><a href="reproducibility-and-provenance.html#cb218-130" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb218-131"><a href="reproducibility-and-provenance.html#cb218-131" aria-hidden="true" tabindex="-1"></a>            <span class="fu">theme_light</span>()</span>
<span id="cb218-132"><a href="reproducibility-and-provenance.html#cb218-132" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb218-133"><a href="reproducibility-and-provenance.html#cb218-133" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb218-134"><a href="reproducibility-and-provenance.html#cb218-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-135"><a href="reproducibility-and-provenance.html#cb218-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-136"><a href="reproducibility-and-provenance.html#cb218-136" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the application </span></span>
<span id="cb218-137"><a href="reproducibility-and-provenance.html#cb218-137" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
<div id="resources-3" class="section level3" number="14.1.12">
<h3><span class="header-section-number">14.1.12</span> Resources</h3>
<ul>
<li><a href="http://shiny.rstudio.com/">Main Shiny site</a></li>
<li><a href="http://shiny.rstudio.com/tutorial/">Official Shiny Tutorial</a></li>
</ul>
</div>
</div>
<div id="reproducible-and-transparent-papers" class="section level2" number="14.2">
<h2><span class="header-section-number">14.2</span> Reproducible and Transparent Papers</h2>
<div id="learning-objectives-14" class="section level3" number="14.2.1">
<h3><span class="header-section-number">14.2.1</span> Learning Objectives</h3>
<p>In this lesson, we will:</p>
<ul>
<li>Discuss the concept of reproducible workflows</li>
<li>Review the importance of computational reproducibility</li>
<li>Review the utility of provenance metadata</li>
<li>Overview how R packages are great ways to package work reproducibly</li>
<li>Learn how to build a reproducible paper in RMarkdown</li>
<li>Review tools and techniques for reproducibility supported by the NCEAS and DataONE</li>
</ul>
<div id="reproducibility-and-provenance-1" class="section level4" number="14.2.1.1">
<h4><span class="header-section-number">14.2.1.1</span> Reproducibility and Provenance</h4>
<ul>
<li>Slides: <a href="files/2019-10-11-repro-sci.pdf">Accelerating synthesis science through reproducible science practices</a></li>
</ul>
</div>
<div id="reproducible-research-recap" class="section level4 unnumbered">
<h4>Reproducible Research: Recap</h4>
<p>Working in a reproducible manner:</p>
<ul>
<li>increases research efficiency, accelerating the pace of your research and collaborations</li>
<li>provides transparency by capturing and communicating scientific workflows</li>
<li>enables research to stand on the shoulders of giants (build on work that came before)</li>
<li>allows credit for secondary usage and supports easy attribution</li>
<li>increases trust in science</li>
</ul>
<p>To enable others to fully interpret, reproduce or build upon our research, we need to provide more comprehensive information than is typically included in a figure or publication. The methods sections of papers are typically inadequate to fully reproduce the work described in the paper.</p>
<p><img src="images/Smith-et-al.png" /></p>
<p>What data were used in this study? What methods applied? What were the parameter settings? What documentation or code are available to us to evaluate the results? Can we trust these data and methods?</p>
<p>Are the results reproducible?</p>
<p><strong>Computational reproducibility</strong> is the ability to document data, analyses, and models sufficiently for other researchers to be able to understand and ideally re-execute the computations that led to scientific results and conclusions.</p>
<p>Practically speaking, reproducibility includes:</p>
<ul>
<li>Preserving the data</li>
<li>Preserving the software workflow</li>
<li>Documenting what you did</li>
<li>Describing how to interpret it all</li>
</ul>
</div>
<div id="computational-provenance-and-workflows" class="section level4 unnumbered">
<h4>Computational Provenance and Workflows</h4>
<p>Computational provenance refers to the origin and processing history of data including:</p>
<ul>
<li>Input data</li>
<li>Workflow/scripts</li>
<li>Output data</li>
<li>Figures</li>
<li>Methods, dataflow, and dependencies</li>
</ul>
<p>When we put these all together with formal documentation, we create a <strong>computational workflow</strong> that captures all of the steps from inital data cleaning and integration, through analysis, modeling, and visualization.</p>
<p>Here’s an example of a computational workflow from Mark Carls: <a href="https://search.dataone.org/view/urn%3Auuid%3A3249ada0-afe3-4dd6-875e-0f7928a4c171">Mark Carls. Analysis of hydrocarbons following the Exxon Valdez oil spill, Gulf of Alaska, 1989 - 2014. Gulf of Alaska Data Portal. urn:uuid:3249ada0-afe3-4dd6-875e-0f7928a4c171.</a>, that represents a three step workflow comprising four source data files and two output visualizations.</p>
<p><img src="images/comp-workflow-1.png" /></p>
<p><img src="images/provenance.png" /></p>
<p>This screenshot of the dataset page shows how DataONE renders the workflow model information as part of our interactive user interface. You can clearly see which data files were inputs to the process, the scripts that are used to process and visualize the data, and the final output objects that are produced, in this case two graphical maps of Prince William Sound in Alaska.</p>
<p><strong>From Provenance to Reproducibility</strong></p>
<p><img src="images/Prov-History.png" /></p>
<p>At DataONE we facilitate reproducible science through provenance by:</p>
<ul>
<li>Tracking <strong>data derivation</strong> history</li>
<li>Tracking data <strong>input</strong>s and <strong>outputs</strong> of analyses</li>
<li>Preserving and documenting software <strong>workflows</strong></li>
<li>Tracking analysis and model <strong>executions</strong></li>
<li>Linking all of these to <strong>publications</strong></li>
</ul>
<p><strong>Introducing <a href="http://purl.dataone.org/provone-v1-dev">ProvONE</a></strong>, an extension of W3C PROV</p>
<p><img src="images/Prov_ONE.png" /></p>
<p>ProvONE provides the fundamental information required to understand and analyze scientific workflow-based computational experiments. It covers the main aspects that have been identified as relevant in the provenance literature including <strong>data structure</strong>. This addresses the most relevant aspects of how the data, both used and produced by a computational process, is organized and represented. For scientific workflows this implies the inputs and outputs of the various tasks that form part of the workflow.</p>
<p><img src="images/data-package.png" /></p>
</div>
</div>
<div id="data-citation-1" class="section level3 unnumbered">
<h3>Data Citation</h3>
<p>Data citation best practices are focused on providing credit where credit is due and indexing and exposing data citations across international repository networks. In 2014, Force 11 established a <a href="https://doi.org/10.25490/a97f-egyk">Joint Declaration of Data Citation Principles</a> that includes:</p>
<ul>
<li>Importance of data citation</li>
<li>Credit and Attribution</li>
<li>Evidence</li>
<li>Unique Identification</li>
<li>Access</li>
<li>Persistence</li>
<li>Specificity and Verifiability</li>
<li>Interoperability and Flexibility</li>
</ul>
<p><strong>Transitive Credit</strong></p>
<p>We want to move towards a model such that when a user cites a research publication we will also know:</p>
<ul>
<li><strong>Which data</strong> produced it</li>
<li><strong>What software</strong> produced it</li>
<li>What was <strong>derived</strong> from it</li>
<li><strong>Who to credit</strong> down the attribution stack</li>
</ul>
<p><img src="images/Transitive-Credit.png" /></p>
<p>This is transitive credit. And it changes the way in which we think about science communication and traditional publications.</p>
</div>
<div id="reproducible-papers-with-rrtools" class="section level3" number="14.2.2">
<h3><span class="header-section-number">14.2.2</span> Reproducible Papers with <code>rrtools</code></h3>
<p>A great overview of this approach to reproducible papers comes from:</p>
<blockquote>
<p>Ben Marwick, Carl Boettiger &amp; Lincoln Mullen (2018) <strong>Packaging Data Analytical Work Reproducibly Using R (and Friends)</strong>, The American Statistician, 72:1, 80-88, <a href="https://doi.org/10.1080/00031305.2017.1375986">doi:10.1080/00031305.2017.1375986</a></p>
</blockquote>
<p>This lesson will draw from existing materials:</p>
<ul>
<li><a href="https://github.com/benmarwick/rrtools">rrtools</a></li>
<li><a href="https://nceas.github.io/oss-lessons/reproducible-papers-with-rmd/reproducible-papers-with-rmd.html">Reproducible papers with RMarkdown</a></li>
</ul>
<p>The key idea in Marwick et al. (2018) is that of the “research compendium”: A single container for not just the journal article associated with your research but also the underlying analysis, data, and even the required software environment required to reproduce your work.</p>
<p><img src="images/compendia.png" alt="Research compendia from Marwick et al." />
Research compendia make it easy for researchers to do their work but also for others to inspect or even reproduce the work because all necessary materials are readily at hand due to being kept in one place. Rather than a constrained set of rules, the research compendium is a scaffold upon which to conduct reproducible research using open science tools such as:</p>
<ul>
<li><a href="https://www.r-project.org/">R</a></li>
<li><a href="https://rmarkdown.rstudio.com/">RMarkdown</a></li>
<li><a href="https://git-scm.com/">git</a> and <a href="https://github.com">GitHub</a></li>
</ul>
<p>Fortunately for us, Ben Marwick (and others) have written an R package called <a href="https://github.com/benmarwick/rrtools">rrtools</a> that helps us create a research compendium from scratch.</p>
<p>To start a reproducible paper with <code>rrtools</code>, run:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="reproducibility-and-provenance.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install `tinytex` (See below)</span></span>
<span id="cb219-2"><a href="reproducibility-and-provenance.html#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Upgrade contentid to 0.12.0</span></span>
<span id="cb219-3"><a href="reproducibility-and-provenance.html#cb219-3" aria-hidden="true" tabindex="-1"></a><span class="co">#remotes::install_github(&quot;cboettig/contentid&quot;)</span></span>
<span id="cb219-4"><a href="reproducibility-and-provenance.html#cb219-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Upgrade readr from 1.3.1 to 2.0.1</span></span>
<span id="cb219-5"><a href="reproducibility-and-provenance.html#cb219-5" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(c(&quot;readr&quot;))</span></span>
<span id="cb219-6"><a href="reproducibility-and-provenance.html#cb219-6" aria-hidden="true" tabindex="-1"></a><span class="co">#remotes::install_github(&quot;benmarwick/rrtools&quot;)</span></span>
<span id="cb219-7"><a href="reproducibility-and-provenance.html#cb219-7" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;..&quot;</span>)</span>
<span id="cb219-8"><a href="reproducibility-and-provenance.html#cb219-8" aria-hidden="true" tabindex="-1"></a>rrtools<span class="sc">::</span><span class="fu">use_compendium</span>(<span class="st">&quot;mypaper&quot;</span>)</span></code></pre></div>
<p>You should see output similar to the below:</p>
<pre><code>&gt; rrtools::use_compendium(&quot;mypaper&quot;)
The directory mypaper has been created.
✓ Setting active project to &#39;/Users/bryce/mypaper&#39;
✓ Creating &#39;R/&#39;
✓ Writing &#39;DESCRIPTION&#39;
Package: mypaper
Title: What the Package Does (One Line, Title Case)
Version: 0.0.0.9000
Authors@R (parsed):
    * First Last &lt;first.last@example.com&gt; [aut, cre]
Description: What the package does (one paragraph).
License: MIT + file LICENSE
ByteCompile: true
Encoding: UTF-8
LazyData: true
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.1.1
✓ Writing &#39;NAMESPACE&#39;
✓ Writing &#39;mypaper.Rproj&#39;
✓ Adding &#39;.Rproj.user&#39; to &#39;.gitignore&#39;
✓ Adding &#39;^mypaper\\.Rproj$&#39;, &#39;^\\.Rproj\\.user$&#39; to &#39;.Rbuildignore&#39;
✓ Setting active project to &#39;&lt;no active project&gt;&#39;
✓ The package mypaper has been created
✓ Now opening the new compendium...
✓ Done. The working directory is currently /Users/bryce

Next, you need to:  ↓ ↓ ↓ 
● Edit the DESCRIPTION file
● Use other &#39;rrtools&#39; functions to add components to the compendium</code></pre>
<p><code>rrtools</code> has created the beginnings of a research compendium for us.
At this point, it looks mostly the same as an R package.
That’s because it uses the same underlying folder structure and metadata and therefore it technically is an R package. And this means our research compendium will be easy to install, just like an R package.</p>
<p>Before we get to writing our reproducible paper, let’s fill in some more structure.
Let’s:</p>
<ol style="list-style-type: decimal">
<li>Add a license (always a good idea)</li>
<li>Set up a README file in the RMarkdown format</li>
<li>Create an <code>analysis</code> folder to hold our reproducible paper</li>
</ol>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="reproducibility-and-provenance.html#cb221-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_apache_license</span>()</span>
<span id="cb221-2"><a href="reproducibility-and-provenance.html#cb221-2" aria-hidden="true" tabindex="-1"></a>rrtools<span class="sc">::</span><span class="fu">use_readme_rmd</span>()</span>
<span id="cb221-3"><a href="reproducibility-and-provenance.html#cb221-3" aria-hidden="true" tabindex="-1"></a>rrtools<span class="sc">::</span><span class="fu">use_analysis</span>()</span></code></pre></div>
<p>This creates a starndard, predicatable layout for our code and data and outpus that mutliple people can understand. At this point, we’re ready to start writing the paper.
To follow the structure <code>rrtools</code> has put in place for us, here are some pointers:</p>
<ul>
<li>Edit <code>./analysis/paper/paper.Rmd</code> to begin writing your paper and your analysis in the same document</li>
<li>Add any citations to <code>./analysis/paper/references.bib</code></li>
<li>Add any longer R scripts that don’t fit in your paper in an <code>R</code> folder at the top level</li>
<li>Add raw data to <code>./data/raw_data</code></li>
<li>Write out any derived data (generated in <code>paper.Rmd</code>) to <code>./data/derived_data</code></li>
<li>Write out any figures in <code>./analysis/figures</code></li>
</ul>
<p>It would also be a good idea to initialize this folder as a git repo for maximum reproducibility:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="reproducibility-and-provenance.html#cb222-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git</span>()</span></code></pre></div>
<p>After that, push a copy up to <a href="https://github.com">GitHub</a>.</p>
<div id="a-quick-tour-of-features-for-reproducibility-in-rmarkdown" class="section level4" number="14.2.2.1">
<h4><span class="header-section-number">14.2.2.1</span> A quick tour of features for reproducibility in RMarkdown</h4>
<p>We’re now going to walk though some of the key features that makes writing transparent articles with RMarkdown a breeze. We’ll cover:</p>
<ul>
<li>Loading data reproducibly</li>
<li>Attractive typesetting for mathematics</li>
<li>Figures, tables, and captions</li>
<li>In-text citations</li>
<li>Bibliographies</li>
</ul>
<p>To do this, we will work from an already built-out example paper that illustrates these features. Start by:</p>
<ul>
<li>Copy the example file <a href="files/paper.Rmd"><code>paper.Rmd</code></a> to <code>analysis/paper/paper.Rmd</code> in the project you built earlier</li>
<li>Copy the example bibliography <a href="files/references.bib"><code>references.bib</code></a> to <code>analysis/paper/paper.Rmd</code> in the project you built earlier</li>
<li>Open that <code>paper.Rmd</code> file in the reproducible paper project in RStudio</li>
<li>Walk through the example file to examine each of the Rmarkdown features</li>
<li>Knot and view the file</li>
</ul>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="reproducibility-and-provenance.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;https://learning.nceas.ucsb.edu/2021-09-delta/files/paper.Rmd&quot;</span>, <span class="at">destfile =</span> <span class="st">&quot;analysis/paper/paper.Rmd&quot;</span>)</span>
<span id="cb223-2"><a href="reproducibility-and-provenance.html#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;https://learning.nceas.ucsb.edu/2021-09-delta/files/references.bib&quot;</span>, <span class="at">destfile =</span> <span class="st">&quot;analysis/paper/references.bib&quot;</span>)</span></code></pre></div>
</div>
<div id="getting-pdf-rendering-working" class="section level4" number="14.2.2.2">
<h4><span class="header-section-number">14.2.2.2</span> Getting PDF rendering working</h4>
<p>By default, <code>rrtools</code> will create papers that are meant to be rendered either as PDF documents, or as MS Word documents. You can switch between these, but for them both to work you must have the requisite software installed on your machine. For PDF, this means you need to have a version of Tex installed with pdflatex available, which can be a difficult process on Macs and Windows. We have found that installing the R package <code>tinytex</code> provides a good, reliable workaround on macs and windows machines, although there can still be some futzing involved if you already have LaTEX installed, or if you don’t have sufficient permissions to install. Its beyond the scope of time available today to diagnose all of the installation issues, but hopefully tinytex will provide a path forward for you. In brief, you can install tex in your personal account using <code>tinytex::install_tinytex()</code>, and the restart your RStudio session, and you should have a working version of pdflatex that allows things to build the documents properly.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="reproducibility-and-provenance.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tinytex&quot;</span>)</span>
<span id="cb224-2"><a href="reproducibility-and-provenance.html#cb224-2" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install_tinytex</span>()</span></code></pre></div>
</div>
<div id="wrapping-up-with-rrtools" class="section level4" number="14.2.2.3">
<h4><span class="header-section-number">14.2.2.3</span> Wrapping up with <code>rrtools</code></h4>
<p>Hopefully, now that you’ve created a research compendium with <code>rrtools</code>, you can imagine how a pre-defined structure like the one <code>rrtools</code> creates might help you organize your reproducible research and also make it easier for others to understand your work.</p>
<p>For a more complete example than the one we built above, take a look at <a href="https://github.com/benmarwick/teaching-replication-in-archaeology">benmarwick/teaching-replication-in-archaeology</a>.</p>
</div>
</div>
<div id="reproducible-papers-with-rticles" class="section level3" number="14.2.3">
<h3><span class="header-section-number">14.2.3</span> Reproducible Papers with <code>rticles</code></h3>
<p>Note that the <a href="https://github.com/rstudio/rticles%20B"><code>rticles</code></a> package provides a lot of other great templates for formatting your paper specifically to the requirements of many journals. In addition to a custom CSL file for rreference customization, <code>rticles</code> supports custom LATeX templates that fit the formatting requirements of each journals. After installing <code>rticles</code> with a command like <code>remotes::install_github("rstudio/rticles")</code> and restarting your RStudion session, you will be able to create articles from these custom templates using the <code>File | New File | R Markdown...</code> menu, which shows the following dialog:</p>
<p><img src="images/rticles-new.png" />
Select the “PNAS” template, give the file a name and choose a location for the files, and click “OK”. You can now Knit the Rmd file to see a highly-targeted article format, like this one for PNAS:</p>
<p><img src="images/rticles-pnas.png" />
While <code>rticles</code> doesn’t produce the detailed folder layout of <code>rrtools</code>, it is relatively simple to use the two packages together. Use <code>rrtools</code> to generate the core directory layout and approach to data handling, and then use <code>articles</code> to create the structure of the paper itself. The combination is incredibly flexible.</p>
</div>
<div id="the-5th-generation-of-reproducible-papers" class="section level3 unnumbered">
<h3>The 5th Generation of Reproducible Papers</h3>
<p><img src="images/Living-paper.png" /></p>
<p><strong>Whole Tale</strong> simplifies computational reproducibility. It enables researchers to easily package and share ‘tales’. Tales are executable research objects captured in a standards-based tale format complete with metadata. They can contain:</p>
<ul>
<li>data (references)</li>
<li>code (computational methods)</li>
<li>narrative (traditional science story)</li>
<li>compute environment (e.g. RStudio, Jupyter)</li>
</ul>
<p><img src="images/whole-tale-container.png" /></p>
<p>By combining data, code and the compute environment, tales allow researchers to:</p>
<ul>
<li>re-create the computational results from a scientific study</li>
<li>achieve computational reproducibility</li>
<li>“set the default to reproducible.”</li>
</ul>
<p>They also empower users to verify and extend results with different data, methods, and environments. You can browse existing tales, run and interact with published tales and create new tales via the <a href="https://dashboard.wholetale.org/browse">Whole Tale Dashboard</a>.</p>
<p><img src="images/Tale-browser.png" /></p>
<p>By integrating with DataONE and Dataverse, Whole Tale includes over 90 major research repositories from which a user can select datasets to make those datasets the starting point of an interactive data exploration and analysis inside of one of the Whole Tale environments. Within DataONE, we are adding functionality to work with data in the Whole Tale environment directly from the dataset landing page.</p>
<p><img src="images/WT-Integration.png" /></p>
<p><img src="images/Publish-Tale.png" /></p>
<p>Full circle reproducibility can be achieved by publishing data, code AND the environment.</p>

<div id="refs" class="references csl-bib-body hanging-indent">
<div class="csl-entry">
Borer, Elizabeth, Eric Seabloom, Matthew B. Jones, and Mark Schildhauer. 2009. <span>“Some <span>Simple</span> <span>Guidelines</span> for <span>Effective</span> <span>Data</span> <span>Management</span>.”</span> <em>Bulletin of the Ecological Society of America</em> 90: 205–14. <a href="https://doi.org/10.1890/0012-9623-90.2.205">https://doi.org/10.1890/0012-9623-90.2.205</a>.
</div>
<div class="csl-entry">
Hampton, Stephanie E, Sean Anderson, Sarah C Bagby, Corinna Gries, Xueying Han, Edmund Hart, Matthew B Jones, et al. 2015. <span>“The <span>Tao</span> of <span>Open</span> <span>Science</span> for <span>Ecology</span>.”</span> <em>Ecosphere</em> 6 (July). https://doi.org/<a href="http://dx.doi.org/10.1890/ES14-00402.1">http://dx.doi.org/10.1890/ES14-00402.1</a>.
</div>
<div class="csl-entry">
Munafò, Marcus R., Brian A. Nosek, Dorothy V. M. Bishop, Katherine S. Button, Christopher D. Chambers, Nathalie Percie du Sert, Uri Simonsohn, Eric-Jan Wagenmakers, Jennifer J. Ware, and John P. A. Ioannidis. 2017. <span>“A Manifesto for Reproducible Science.”</span> <em>Nature Human Behaviour</em> 1 (1): 0021. <a href="https://doi.org/10.1038/s41562-016-0021">https://doi.org/10.1038/s41562-016-0021</a>.
</div>
</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="spatial-analysis.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
