<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Scalable and Computationally Reproducible Approaches to Arctic Research - 13&nbsp; Google Earth Engine</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../sections/adc-data-publishing.html" rel="next">
<link href="../sections/data-ethics.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Google Earth Engine</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Course Materials</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://arcticdata.io" title="" class="sidebar-tool px-1"><i class="bi bi-house-door-fill"></i></a>
    <a href="https://twitter.com/arcticdatactr" title="" class="sidebar-tool px-1"><i class="bi bi-twitter"></i></a>
    <a href="https://github.com/NCEAS/scalable-computing-course" title="" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/adc-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Welcome and Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/remote-computing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Remote Computing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/python-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Python Programming on Clusters</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/parallel-programming.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Pleasingly Parallel Programming</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/data-structures-netcdf.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Structures and Formats for Large Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/parallel-with-dask.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Parallelization with Dask</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/group-project-1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Group Project: Staging and Preprocessing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/software-design-1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Software Design I: Functions and Concurrency</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/geopandas.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Spatial and Image Data Using GeoPandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/ice-wedge-polygons.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Billions of Ice Wedge Polygons</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/group-project-2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Group Project: Data Processing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/data-ethics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Data Ethics for Scalable Computing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/google-earth-engine.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Google Earth Engine</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/adc-data-publishing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Documenting and Publishing Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/group-project-3.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Group Project: Visualization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/software-design-2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Software Design II: Modules, Packages, and Testing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/cloud-computing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">What is Cloud Computing Anyways?</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/reproducibility-containers.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Reproducibility and Containers</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/parquet-arrow.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Parquet and Arrow</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link active" data-scroll-target="#learning-objectives"><span class="toc-section-number">13.1</span>  Learning Objectives</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="toc-section-number">13.2</span>  Introduction</a></li>
  <li><a href="#exercise-1-an-introductory-lesson-on-using-google-earth-engine" id="toc-exercise-1-an-introductory-lesson-on-using-google-earth-engine" class="nav-link" data-scroll-target="#exercise-1-an-introductory-lesson-on-using-google-earth-engine"><span class="toc-section-number">13.3</span>  <strong>Exercise 1:</strong> An introductory lesson on using Google Earth Engine</a>
  <ul class="collapse">
  <li><a href="#part-i.-setup" id="toc-part-i.-setup" class="nav-link" data-scroll-target="#part-i.-setup"><span class="toc-section-number">13.3.1</span>  <strong>Part i.</strong> Setup</a></li>
  <li><a href="#part-ii.-explore-the-era5-daily-aggregates-data" id="toc-part-ii.-explore-the-era5-daily-aggregates-data" class="nav-link" data-scroll-target="#part-ii.-explore-the-era5-daily-aggregates-data"><span class="toc-section-number">13.3.2</span>  <strong>Part ii.</strong> Explore the ERA5 Daily Aggregates Data</a></li>
  <li><a href="#part-iii.-visualize-global-precipitation-using-era5-daily-aggregate-data" id="toc-part-iii.-visualize-global-precipitation-using-era5-daily-aggregate-data" class="nav-link" data-scroll-target="#part-iii.-visualize-global-precipitation-using-era5-daily-aggregate-data"><span class="toc-section-number">13.3.3</span>  <strong>Part iii.</strong> Visualize global precipitation using ERA5 Daily Aggregate data</a></li>
  <li><a href="#part-iv.-takeaways" id="toc-part-iv.-takeaways" class="nav-link" data-scroll-target="#part-iv.-takeaways"><span class="toc-section-number">13.3.4</span>  <strong>Part iv.</strong> Takeaways</a></li>
  </ul></li>
  <li><a href="#exercise-2-visualize-and-analyze-fire-dynamics-in-the-arctic-using-gee" id="toc-exercise-2-visualize-and-analyze-fire-dynamics-in-the-arctic-using-gee" class="nav-link" data-scroll-target="#exercise-2-visualize-and-analyze-fire-dynamics-in-the-arctic-using-gee"><span class="toc-section-number">13.4</span>  <strong>Exercise 2:</strong> Visualize and analyze fire dynamics in the Arctic using GEE</a>
  <ul class="collapse">
  <li><a href="#part-i.-setup-1" id="toc-part-i.-setup-1" class="nav-link" data-scroll-target="#part-i.-setup-1"><span class="toc-section-number">13.4.1</span>  <strong>Part i.</strong> Setup</a></li>
  <li><a href="#part-ii.-visualize-ndvi-and-nbf-spectral-indices" id="toc-part-ii.-visualize-ndvi-and-nbf-spectral-indices" class="nav-link" data-scroll-target="#part-ii.-visualize-ndvi-and-nbf-spectral-indices"><span class="toc-section-number">13.4.2</span>  <strong>Part ii.</strong> Visualize NDVI and NBF spectral indices</a></li>
  <li><a href="#part-iii.-load-more-than-one-image-i.e.-an-imagecollection-to-analyze" id="toc-part-iii.-load-more-than-one-image-i.e.-an-imagecollection-to-analyze" class="nav-link" data-scroll-target="#part-iii.-load-more-than-one-image-i.e.-an-imagecollection-to-analyze"><span class="toc-section-number">13.4.3</span>  <strong>Part iii.</strong> Load more than one image (i.e.&nbsp;an ImageCollection) to analyze</a></li>
  <li><a href="#part-iv.-make-a-timeseries" id="toc-part-iv.-make-a-timeseries" class="nav-link" data-scroll-target="#part-iv.-make-a-timeseries"><span class="toc-section-number">13.4.4</span>  <strong>Part iv.</strong> Make a timeseries</a></li>
  <li><a href="#part-v.-annual-composite" id="toc-part-v.-annual-composite" class="nav-link" data-scroll-target="#part-v.-annual-composite"><span class="toc-section-number">13.4.5</span>  <strong>Part v.</strong> Annual Composite</a></li>
  <li><a href="#part-vi.-calculate-trend" id="toc-part-vi.-calculate-trend" class="nav-link" data-scroll-target="#part-vi.-calculate-trend"><span class="toc-section-number">13.4.6</span>  <strong>Part vi.</strong> Calculate trend</a></li>
  <li><a href="#part-v.-clustering" id="toc-part-v.-clustering" class="nav-link" data-scroll-target="#part-v.-clustering"><span class="toc-section-number">13.4.7</span>  <strong>Part v.</strong> Clustering</a></li>
  </ul></li>
  <li><a href="#additional-resources" id="toc-additional-resources" class="nav-link" data-scroll-target="#additional-resources"><span class="toc-section-number">13.5</span>  Additional Resources</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Google Earth Engine</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="learning-objectives" class="level2" data-number="13.1">
<h2 data-number="13.1" class="anchored" data-anchor-id="learning-objectives"><span class="header-section-number">13.1</span> Learning Objectives</h2>
<ul>
<li>Understand what Google Earth Engine provides and its applications</li>
<li>Learn how to search for, import, manipulate, and visualize Google Earth Engine Data</li>
<li>Learn about some real-world applications of Google Earth Engine in the geosciences</li>
</ul>
</section>
<section id="introduction" class="level2 page-columns page-full" data-number="13.2">
<h2 data-number="13.2" class="anchored" data-anchor-id="introduction"><span class="header-section-number">13.2</span> Introduction</h2>
<p><a href="https://earthengine.google.com/">Google Earth Engine</a> (GEE) is a geospatial processing platform powered by Google Cloud Platform. It contains over 30 years (and multiple petabytes) of satellite imagery and geospatial datasets that are continually updated and available instantly. Users can process data using Google Cloud Platform and built-in algorithms or by using the Earth Engine API, which is available in Python (and JavaScript) for anyone with an account (Earth Engine is free to use for research, education, and nonprofit use). <br></p>

<div class="no-row-height column-margin column-container"><div class="">
<p>GEE is just one of a number of cloud platform solutions developed for climate and geoscience research. Others include <a href="https://planetarycomputer.microsoft.com/">Microsoft Planetary Computer</a>, <a href="https://pangeo.io/">Pangeo</a>, &amp; <a href="https://sustainability.aboutamazon.com/environment/the-cloud/amazon-sustainability-data-initiative">Amazon Sustainability Data Initiative (ADSI)</a></p>
</div></div><center>
<img src="../images/gee.gif" alt="" width="600">
</center>
<center>
<span style="font-size: 85%; color: #6e6d6d;">Image Source: <a href="https://developers.google.com/earth-engine/datasets">Earth Engine Data Catalog</a></span>
</center>
<p><br> So what’s so exciting about platforms like GEE? <a href="https://scholar.google.com/citations?user=t1lmjVkAAAAJ&amp;hl=en">Ryan Abernathey</a> frames this nicely in his blogpost <a href="https://medium.com/pangeo/closed-platforms-vs-open-architectures-for-cloud-native-earth-system-analytics-1ad88708ebb6">Closed Platform vs.&nbsp;Open Architectures for Cloud-Native Earth System Analytics</a>…</p>
<ul>
<li>as Earth System data have gotten larger, the typical download-data-work-locally workflow is no longer always feasible</li>
<li>those data are also produced and distributed by lots of different organizations (e.g.&nbsp;<a href="https://www.nasa.gov/">NASA</a>, <a href="https://www.noaa.gov/">NOAA</a>, <a href="copernicus.eu/en">Copernicus</a>)</li>
<li>researchers often need to apply a wide range of analytical methods to those data, ranging from simple stats to machine learning approaches</li>
</ul>
<p>GEE offers web access (i.e.&nbsp;no need to download data to your computer) to an extensive catalog of analysis-ready geospatial data (from many different organizations) and scalable computing power via their cloud service, making global-scale analyses and visualizations possible for anyone with an account (<a href="https://signup.earthengine.google.com">sign up here</a>!). Explore the public <a href="https://developers.google.com/earth-engine/datasets/catalog">Earth Engine Data Catalog</a> which includes a variety of standard Earth science raster datasets. Browse by <a href="https://developers.google.com/earth-engine/datasets/tags">dataset tags</a> or by satellite (<a href="https://developers.google.com/earth-engine/datasets/catalog/landsat">Landsat</a>, <a href="https://developers.google.com/earth-engine/datasets/catalog/modis">MODIS</a>, <a href="https://developers.google.com/earth-engine/datasets/catalog/sentinel">Sentinel</a>).</p>
<p>In this lesson, we’ll first get some hands-on practice connecting to and using Google Earth Engine to visualize global precicpation data. We’ll then walk through a demonstration using GEE to visualize and analyze fire dynamics in the Arctic.</p>
</section>
<section id="exercise-1-an-introductory-lesson-on-using-google-earth-engine" class="level2 page-columns page-full" data-number="13.3">
<h2 data-number="13.3" class="anchored" data-anchor-id="exercise-1-an-introductory-lesson-on-using-google-earth-engine"><span class="header-section-number">13.3</span> <strong>Exercise 1:</strong> An introductory lesson on using Google Earth Engine</h2>
<section id="part-i.-setup" class="level3" data-number="13.3.1">
<h3 data-number="13.3.1" class="anchored" data-anchor-id="part-i.-setup"><span class="header-section-number">13.3.1</span> <strong>Part i.</strong> Setup</h3>
<ol type="1">
<li>Create a Google Earth Engine account (if you haven’t already done so)</li>
</ol>
<ul>
<li>Please refer back to the <a href="https://learning.nceas.ucsb.edu/2022-09-arctic/#create-a-free-google-earth-engine-gee-account">Preface</a> to find instructions on creating a GEE account.</li>
</ul>
<ol start="2" type="1">
<li>Load libraries</li>
</ol>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> ee</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geemap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Authenticate your GEE account</li>
</ol>
<ul>
<li>In order to begin using GEE, you’ll need to connect your environment (<code>scomp</code>) to the authentication credentials associated with your Google account. This will need to be done each time you connect to GEE, (but only be done once per session).</li>
</ul>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ee.Authenticate() <span class="co"># triggers the authentication process</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>This should launch a browser window where you can login with your Google account to the Google Earth Engine Authenticator. Following the prompts will generate a code, which you’ll then need to copy and paste into the VS Code command palette (at the top of the IDE). This will be saved as an authentication token so you won’t need to go through this process again until the next time you start a new session. The browser-based authentication steps will look something like this:</li>
</ul>
<ol type="a">
<li><strong>Notebook Authenticator:</strong> choose an active Google account and Cloud Project (you may have to create one if this is your first time authenticating) and click “Generate Token”<br>
</li>
<li><strong>Choose an account:</strong> if prompted, select the same Google account as above</li>
<li><strong>Google hasn’t verified this app:</strong> You may be temped to click the blue “Back to saftey” button, but don’t! Click “Continue”<br>
</li>
<li><strong>Select what Earth Engine Notebook Client can access:</strong> click both check boxes, then “Continue”<br>
</li>
<li><strong>Copy your authorization code</strong> to your clipboard to paste into the VS Code command palette</li>
</ol>
<ol start="4" type="1">
<li>Lastly, intialize. This verifies that valid credentials have been created and populates the Python client library with methods that the backend server supports.</li>
</ol>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>ee.Initialize() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If successful, you’re now ready to begin working with Earth Engine data!</p>
</section>
<section id="part-ii.-explore-the-era5-daily-aggregates-data" class="level3 page-columns page-full" data-number="13.3.2">
<h3 data-number="13.3.2" class="anchored" data-anchor-id="part-ii.-explore-the-era5-daily-aggregates-data"><span class="header-section-number">13.3.2</span> <strong>Part ii.</strong> Explore the ERA5 Daily Aggregates Data</h3>
<p>We’ll be using the ERA5 daily aggregates reanalysis dataset, produced by the <a href="https://www.ecmwf.int/">European Centre for Medium-Range Weather Forecasts</a> (ECMWF), found <a href="https://developers.google.com/earth-engine/datasets/catalog/ECMWF_ERA5_DAILY">here</a>, which models atmospheric weather observations.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>Reanalysis combines observation data with model data to provide the most complete picture of past weather and climate. To read more about reanalyses, check out the <a href="https://www.ecmwf.int/en/about/media-centre/focus/2020/fact-sheet-reanalysis#:~:text=What%20is%20reanalysis%3F,with%20modern%20weather%20forecasting%20models.">EWCMWF website</a>.</p>
</div></div><center>
<img src="../images/ERA5.png" alt="" width="600">
</center>
<center>
<span style="font-size: 85%; color: #6e6d6d;"><a href="https://developers.google.com/earth-engine/datasets/catalog/ECMWF_ERA5_DAILY">ERA5 Daily Aggregates</a> dataset, available via the Earth Engine Data Catelog</span>
</center>
<p><br> Take a few moments to explore the metadata record for this dataset. You’ll notice that it includes a bunch of important information, including:</p>
<ul>
<li><strong>Dataset Availability:</strong> the date range</li>
<li><strong>Dataset Provider:</strong> where the data come from</li>
<li><strong>Earth Engine Snippet:</strong> a code snippet used for loading the dataset</li>
<li><strong>Description (tab):</strong> get to know a bit about the data</li>
<li><strong>Bands (tab):</strong> the variables present in the dataset; each band has its own name, data type, scale, mask and projection</li>
<li><strong>Image Properties:</strong> metadata available for each image band</li>
<li><strong>Example Code:</strong> a script to load and visualize ERA5 climate reanalysis parameters in Google Earth Engine (JavaScript)</li>
</ul>
</section>
<section id="part-iii.-visualize-global-precipitation-using-era5-daily-aggregate-data" class="level3 page-columns page-full" data-number="13.3.3">
<h3 data-number="13.3.3" class="anchored" data-anchor-id="part-iii.-visualize-global-precipitation-using-era5-daily-aggregate-data"><span class="header-section-number">13.3.3</span> <strong>Part iii.</strong> Visualize global precipitation using ERA5 Daily Aggregate data</h3>
<p><em>Content for this section was adapted from Dr.&nbsp;Sam Stevenson’s <a href="https://github.com/samanthastevenson/EDS220_Fall2021/blob/main/Week1_ERA5Maps_GEE.ipynb">Visualizing global precipitation using Google Earth Engine</a> lesson, given in her <a href="https://samanthastevenson.github.io/EDS220_site/">EDS 220 course</a> in Fall 2021.</em></p>
<ol type="1">
<li>Create an interactive basemap</li>
</ol>
<ul>
<li>The default basemap is (you guessed it) Google Maps. The following code displays an empty Google Map that you can manipulate just like you would in the typical Google Maps interface. Do this using the <code>Map</code> method from the <code>geemap</code> library. We’ll also center the map at a specified latitude and longitude (here, 40N, 100E), set a zoom level, and save our map as an object called <code>myMap</code>.</li>
</ul>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>myMap <span class="op">=</span> geemap.Map(center <span class="op">=</span> [<span class="dv">40</span>, <span class="op">-</span><span class="dv">100</span>], zoom <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>myMap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Load the ERA5 Image Collection from GEE</li>
</ol>
<ul>
<li>Next, we need to tell GEE what data we want to layer on top of our basemap. The <code>ImageCollection</code> method extracts a set of individual images that satisfies some criterion that you pass to GEE through the <code>ee</code> package. This is stored as an <strong>ImageCollection</strong> object which can be filtered and processed in various ways. We can pass the <code>ImageCollction</code> method agruments to tell GEE which data we want to retrieve. Below, we retrieve all daily ERA5 data.</li>
</ul>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Earth Engine Snippets make importing ImageCollections easy!
</div>
</div>
<div class="callout-body-container callout-body">
<p>To import an ImageCollection, copy and paste the Earth Engine Snippet for your dataset of interest. For example, the Earth Enginge Snippet to import the ERA5 daily aggregates data can be found on the <a href="https://developers.google.com/earth-engine/datasets/catalog/ECMWF_ERA5_DAILY">dataset page</a>.</p>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>weatherData <span class="op">=</span> ee.ImageCollection(<span class="st">'ECMWF/ERA5/DAILY'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Select an image to plot</li>
</ol>
<ul>
<li>To plot a map over our Google Maps basemap, we need an <em>Image</em> rather than an <em>ImageCollection</em>. ERA5 contains many different climate variables – explore which variables the dataset contains under the <a href="https://developers.google.com/earth-engine/datasets/catalog/ECMWF_ERA5_DAILY#bands">Bands</a> tab. We’ll use the <code>select</code> method to choose the parameter(s) we’re interested in from our <code>weatherData</code> object. Let’s select the <code>total_precipitation</code> band.</li>
</ul>

<div class="no-row-height column-margin column-container"><div class="">
<p>Plotting an <strong>Image</strong> will produce a static visualization (e.g.&nbsp;total precipitation at a particular point in time, or the average precipitation over a specified date range), while an <strong>ImageCollection</strong> can be visualized as either an animation or as a series of thumbnails (aka a “filmstrip”), such as this animation showing a three-day progression of Atlantic hurricanes in September, 2017 (source: <a href="https://developers.google.com/earth-engine/guides/ic_visualization">Google Earth Engine</a>).</p>
<br>
<center>
<img src="../images/hurricanes.gif" alt="" width="200">
</center>
</div></div><div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select desired bands (total_preciptation)</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>precip <span class="op">=</span> weatherData.select(<span class="st">"total_precipitation"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>We can look at our <code>precip</code> object metadata using the <code>print</code> method to see that we’ve isolated the <code>total_precipitation</code> band, but it’s still an <em>ImageCollection</em>.</li>
</ul>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(precip)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You may see a message in that says, <strong>“Output exceeds the size limit. Open the full output data in a text editor”</strong> when printing your image object metadata. Click here to see the entire output, which includes date range information.</p>
</div>
</div>
<ul>
<li>Let’s say that we want to look at data for a particular time of interest – e.g.&nbsp;January 1, 2019 - December 31, 2019. We can apply the <code>filterDate</code> method to our selected <code>total_precipitation</code> parameter to filter for data from our chosen date range. We can also apply the <code>mean</code> method, which takes whatever precedes it and calculates the average – this step reduces our <code>ImageCollection</code> to a single <code>Image</code>.</li>
</ul>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initial date of interest (inclusive)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>i_date <span class="op">=</span> <span class="st">'2019-01-01'</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># final data of interest (exclusive)</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>f_date <span class="op">=</span> <span class="st">'2020-01-01'</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># select desired bands (total_preciptation), dates, and calculate mean precipitation across that date range</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>precip <span class="op">=</span> weatherData.select(<span class="st">"total_precipitation"</span>).filterDate(i_date, f_date).mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Use the <code>print</code> method again to check out your new <code>precip</code> object – notice that it’s now an <code>ee.Image</code> (rather than <code>ee.ImageCollection</code>) and the start and end date values over which the average is taken are as we specified.</li>
</ul>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(precip)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>Add the precipitation Image to the basemap</li>
</ol>
<ul>
<li>We can use the <code>setCenter</code> method to center our map, <code>myMap</code>, over an area of interest – here, we’ve chosen coordinates for Cook Inlet, Alaska. <code>setCenter</code> takes the longitude and latitude as the first two arguments, followed by the zoom level.</li>
</ul>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>myMap.setCenter(lat <span class="op">=</span> <span class="dv">60</span>, lon <span class="op">=</span> <span class="op">-</span><span class="dv">151</span>, zoom <span class="op">=</span> <span class="dv">4</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>myMap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Next, set a color palette to use when plotting the data layer. The following is a palette specified for ERA5 precipitation data (scroll down to the example code, available on the <a href="https://developers.google.com/earth-engine/datasets/catalog/ECMWF_ERA5_DAILY">landing page for the ERA5 metadata</a> in the Earth Engine Data Catelog). Here, we adjusted the max value to change the range of pixel values to which the palette should be applied – this will make our colors stand out a bit more when we layer our precipitation data on our basemap, below.</li>
</ul>

<div class="no-row-height column-margin column-container"><div class="">
<p>Learn more about GEE color palettes and Image visualization <a href="https://developers.google.com/earth-engine/guides/image_visualization">here</a>.</p>
</div></div><div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>precip_palette <span class="op">=</span> {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'min'</span>:<span class="dv">0</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'max'</span>:<span class="fl">0.01</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'palette'</span>: [<span class="st">'#FFFFFF'</span>, <span class="st">'#00FFFF'</span>, <span class="st">'#0080FF'</span>, <span class="st">'#DA00FF'</span>, <span class="st">'#FFA400'</span>, <span class="st">'#FF0000'</span>]</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>GEE has lots of pre-defined color palettes to choose from based on the type of data you want to visualize. Also check out <a href="https://doi.org/10.1038/s41467-020-19160-7">Crameri et al.&nbsp;2020</a> for recommended best practices when choosing color gradients that accurately represent data and are readable by those with color vision deficiencies.</p>
</div>
</div>
<ul>
<li>Finally, plot our filtered data, <code>precip</code>, on top of our basemap using the <a href="https://developers.google.com/earth-engine/apidocs/map-addlayer"><code>addLayer</code></a> method. We’ll also pass it our visualization parameters (colors and ranges stored in <code>precip_palette</code>, the name of the data field, <code>total precipitation</code>, and opacity (so that we can see the basemap underneath).</li>
</ul>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>myMap.addLayer(precip, precip_palette, <span class="st">'total precipitation'</span>, opacity <span class="op">=</span> <span class="fl">0.3</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>myMap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<center>
<iframe src="../images/precip_map.html" height="600" width="600" title="GEE Precipitation Map">
</iframe>
</center>
</section>
<section id="part-iv.-takeaways" class="level3" data-number="13.3.4">
<h3 data-number="13.3.4" class="anchored" data-anchor-id="part-iv.-takeaways"><span class="header-section-number">13.3.4</span> <strong>Part iv.</strong> Takeaways</h3>
<p>In just about five lines of code (and mere seconds of execution time), we’ve applied and visualized a global precipitation model (that’s pretty cool, right??). We can zoom in/out across our interactive map while Google Earth Engine recalculates and revisualizes our model in near real-time.</p>
<p>GEE does have some limitations. To name a few:</p>
<ul>
<li>it’s a closed platform service, so GEE software can only be run on Google’s infrastructure, as opposed to other open source options, like Pangeo</li>
<li>it’s only free for non-commercial use</li>
<li>there are memory and storage limits</li>
</ul>
<p>Despite these limitations, GEE’s data catelog and cloud computing resources can vastly streamline and expedite analyzing and visualizing large geospatial datasets.</p>
</section>
</section>
<section id="exercise-2-visualize-and-analyze-fire-dynamics-in-the-arctic-using-gee" class="level2" data-number="13.4">
<h2 data-number="13.4" class="anchored" data-anchor-id="exercise-2-visualize-and-analyze-fire-dynamics-in-the-arctic-using-gee"><span class="header-section-number">13.4</span> <strong>Exercise 2:</strong> Visualize and analyze fire dynamics in the Arctic using GEE</h2>
<p>Landscape changes in Arctic permafrost regions can occur as the result of a variety of processes including slope processes (thaw slumps, landslides), wildfires, hydrological changes, and coastal dynamics.</p>
<p>In this exercise, we’ll explore fire dynamics Batagay, Russia, the location of the largest permafrost crater in the world – the <a href="https://en.wikipedia.org/wiki/Batagaika_crater">Batagaika crater</a>. <br></p>
<center>
<img src="../images/main_batagai.jpeg" alt="" width="300"><br><img src="../images/MODIS_snapshot-2021-08-13T00_00_00Z.jpeg" alt="" width="300">
</center>
<center>
<span style="font-size: 85%; color: #6e6d6d;">Top image source: <a href="https://www.science.org/do/10.1126/science.abe0581/full/main_batagai_1280p2.jpg" class="uri">https://www.science.org/do/10.1126/science.abe0581/full/main_batagai_1280p2.jpg</a>. Bottom image source: <a href="https://worldview.earthdata.nasa.gov/" class="uri">https://worldview.earthdata.nasa.gov/</a></span>
</center>
<p><br></p>
<p>Using the following code, we’ll demonstrate how to:</p>
<ul>
<li>load and visualize image data<br>
</li>
<li>calculate and visualize indices<br>
</li>
<li>work with ImageCollections<br>
</li>
<li>extract time-series<br>
</li>
<li>clustering / unsupervized classification</li>
</ul>
<section id="part-i.-setup-1" class="level3" data-number="13.4.1">
<h3 data-number="13.4.1" class="anchored" data-anchor-id="part-i.-setup-1"><span class="header-section-number">13.4.1</span> <strong>Part i.</strong> Setup</h3>
<ol type="1">
<li>Import libraries</li>
</ol>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> ee </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geemap</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> eemont</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Authenticate &amp; Initialize (if you haven’t done so already in your work session)</li>
</ol>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>ee.Authenticate()</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>ee.Initialize() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Create basemap displaying the Batagay region</li>
</ol>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># site coordinates</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>xy <span class="op">=</span> [<span class="fl">134.6</span>, <span class="fl">67.66</span>]</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>poi <span class="op">=</span> ee.Geometry.Point(xy) <span class="co"># Point</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>bbox <span class="op">=</span> ee.Geometry.BBox(<span class="fl">134.45</span>, <span class="fl">67.7</span>, <span class="fl">134.8</span>, <span class="fl">67.5970</span>) <span class="co"># Polygon</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create map</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>Map <span class="op">=</span> geemap.Map()</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>Map.addLayer(bbox, {}, <span class="st">'AOI'</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>Map.centerObject(poi, zoom<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>Map</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="part-ii.-visualize-ndvi-and-nbf-spectral-indices" class="level3" data-number="13.4.2">
<h3 data-number="13.4.2" class="anchored" data-anchor-id="part-ii.-visualize-ndvi-and-nbf-spectral-indices"><span class="header-section-number">13.4.2</span> <strong>Part ii.</strong> Visualize NDVI and NBF spectral indices</h3>
<p>We’ll plot <em>Image</em> data from the <a href="https://developers.google.com/earth-engine/datasets/catalog/COPERNICUS_S2_SR#description">Sentinel-2 MSI</a> dataset using two different multispectral indices: (1) <strong>Normalized Difference Vegetation Index (NDVI)</strong> for visualizing vegegation, using RGB (Red - Green - Blue), and (2) <strong>Normalized Burn Ratio (NBF)</strong> for visualizing burned areas, using Color-Infrared (NIR - Red - Green).</p>
<ol type="1">
<li>Instantiate map</li>
</ol>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>Map <span class="op">=</span> geemap.Map()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Load map</li>
</ol>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
TODO: errors out at <code>.spectralIndices()</code> line
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load image</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>S2_Image <span class="op">=</span> (ee.Image(<span class="st">'COPERNICUS/S2_SR/20210805T030551_20210805T030545_T53WMR'</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>            .scaleAndOffset()</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>            .spectralIndices([<span class="st">'NDVI'</span>, <span class="st">'NBR'</span>]) <span class="co"># Calculate multispectral indices</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Show</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>Map.addLayer(S2_Image, <span class="bu">dict</span>(<span class="bu">min</span><span class="op">=</span><span class="fl">0.0</span>, <span class="bu">max</span><span class="op">=</span><span class="fl">0.1</span>, gamma<span class="op">=</span><span class="fl">1.5</span>, bands<span class="op">=</span>[<span class="st">'B4'</span>, <span class="st">'B3'</span>, <span class="st">'B2'</span>]), <span class="st">'RGB'</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>Map.addLayer(S2_Image, <span class="bu">dict</span>(<span class="bu">min</span><span class="op">=</span><span class="fl">0.0</span>, <span class="bu">max</span><span class="op">=</span><span class="fl">0.3</span>, gamma<span class="op">=</span><span class="fl">1.5</span>, bands<span class="op">=</span>[<span class="st">'B8'</span>, <span class="st">'B4'</span>, <span class="st">'B3'</span>]), <span class="st">'Color-Infrared'</span>, <span class="va">False</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>RdYlGn <span class="op">=</span> [<span class="st">'#d7191c'</span>,<span class="st">'#fdae61'</span>,<span class="st">'#ffffbf'</span>,<span class="st">'#a6d96a'</span>,<span class="st">'#1a9641'</span>]</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>Map.addLayer(S2_Image, <span class="bu">dict</span>(<span class="bu">min</span><span class="op">=</span><span class="fl">0.0</span>, <span class="bu">max</span><span class="op">=</span><span class="fl">0.8</span>, bands<span class="op">=</span>[<span class="st">'NDVI'</span>], palette<span class="op">=</span>RdYlGn), <span class="st">'NDVI'</span>, <span class="va">False</span>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>Map.addLayer(S2_Image, <span class="bu">dict</span>(<span class="bu">min</span><span class="op">=</span><span class="fl">0.0</span>, <span class="bu">max</span><span class="op">=</span><span class="fl">0.8</span>, bands<span class="op">=</span>[<span class="st">'NBR'</span>], palette<span class="op">=</span>RdYlGn), <span class="st">'NBR'</span>, <span class="va">False</span>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>Map.centerObject(S2_Image, zoom<span class="op">=</span><span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Select point on the map above and pull location as an <code>ee.Feature</code></li>
</ol>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>point_fire <span class="op">=</span> Map.draw_last_feature</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>point_fire</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># or alternatively, use this code:</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># point_fire = ee.Geometry.Point([134.6339, 68.0397])</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="part-iii.-load-more-than-one-image-i.e.-an-imagecollection-to-analyze" class="level3" data-number="13.4.3">
<h3 data-number="13.4.3" class="anchored" data-anchor-id="part-iii.-load-more-than-one-image-i.e.-an-imagecollection-to-analyze"><span class="header-section-number">13.4.3</span> <strong>Part iii.</strong> Load more than one image (i.e.&nbsp;an ImageCollection) to analyze</h3>
<p>You can do the same analysis with an <em>ImageCollection</em> (stacks of images of the same type).</p>
<ol type="1">
<li>Here, we’ll load the full Sentinel-2 (S2) series and filter for our data of interest (Location: Batagay &amp; Dates: months June - September). We’ll also filter out cloud cover, which can obstruct our spectral indices analysis.:</li>
</ol>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Image Collection</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>ds <span class="op">=</span> <span class="st">'COPERNICUS/S2_SR'</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>S2 <span class="op">=</span> (ee.ImageCollection(ds)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>      <span class="co">### Filters </span><span class="al">###</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>      .filterBounds(poi) <span class="co"># only images, which intersect our point/region</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>      .<span class="bu">filter</span>(ee.Filter.calendarRange(<span class="dv">6</span>,<span class="dv">9</span>,<span class="st">'month'</span>)) <span class="co"># only June through September, Summer only</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>      .<span class="bu">filter</span>(ee.Filter.lt(<span class="st">'CLOUDY_PIXEL_PERCENTAGE'</span>, <span class="dv">10</span>)) <span class="co"># only images with less that 10 % clouds</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>      <span class="co">#.filterDate('2022-07-01','2022-12-31')</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>      <span class="co">### PreProcessing </span><span class="al">###</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>      .scaleAndOffset()</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>      .spectralIndices([<span class="st">'NDVI'</span>, <span class="st">'NBR'</span>])</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>      .maskClouds()</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>      .sort(<span class="st">'CLOUDY_PIXEL_PERCENTAGE'</span>)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>     )<span class="co">#.first()</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate indices (e.g. NDVI, NBR)</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Number of images </span><span class="sc">{</span>S2<span class="sc">.</span>size()<span class="sc">.</span>getInfo()<span class="sc">}</span><span class="ss">'</span>) <span class="co"># Print number of images</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Visualize satellite data - GET RID OF THIS</li>
</ol>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Map = geemap.Map()</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>Map.addLayer(S2, <span class="bu">dict</span>(<span class="bu">min</span><span class="op">=</span><span class="fl">0.0</span>, <span class="bu">max</span><span class="op">=</span><span class="fl">0.15</span>, gamma<span class="op">=</span><span class="fl">1.5</span>, bands<span class="op">=</span>[<span class="st">'B2'</span>, <span class="st">'B3'</span>, <span class="st">'B2'</span>]), <span class="st">'RGB_Collection'</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>Map.addLayer(S2, <span class="bu">dict</span>(<span class="bu">min</span><span class="op">=</span><span class="fl">0.0</span>, <span class="bu">max</span><span class="op">=</span><span class="fl">0.3</span>, gamma<span class="op">=</span><span class="fl">1.5</span>, bands<span class="op">=</span>[<span class="st">'B8'</span>, <span class="st">'B4'</span>, <span class="st">'B3'</span>]), <span class="st">'Color-Infrared_Collection'</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>RdYlGn <span class="op">=</span> [<span class="st">'#d7191c'</span>,<span class="st">'#fdae61'</span>,<span class="st">'#ffffbf'</span>,<span class="st">'#a6d96a'</span>,<span class="st">'#1a9641'</span>]</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Show NDVI</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Map.addLayer(S2_Image, dict(min=0.0, max=0.8, bands=['NDVI'], palette=RdYlGn), 'NDVI')</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Show NDVI </span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Map.addLayer(S2_Image, dict(min=0.0, max=0.8, bands=['NBR'], palette=RdYlGn), 'NBR')</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>Map.centerObject(S2_Image, zoom<span class="op">=</span><span class="dv">8</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>Map</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="part-iv.-make-a-timeseries" class="level3" data-number="13.4.4">
<h3 data-number="13.4.4" class="anchored" data-anchor-id="part-iv.-make-a-timeseries"><span class="header-section-number">13.4.4</span> <strong>Part iv.</strong> Make a timeseries</h3>
<p>*Example taken from <a href="https://eemont.readthedocs.io/en/0.2.0/guide/timeSeries.html" class="uri">https://eemont.readthedocs.io/en/0.2.0/guide/timeSeries.html</a>.</p>
<ol type="1">
<li>Create timeseries &amp; clean data</li>
</ol>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># function to load and prepare landsat data</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> load_and_prepare_Landsat(collection_name):</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    collection <span class="op">=</span> (ee.ImageCollection(collection_name)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>      <span class="co">### Filters </span><span class="al">###</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>      .filterBounds(bbox) <span class="co"># only images, which intersect our point/region</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>      .<span class="bu">filter</span>(ee.Filter.calendarRange(<span class="dv">7</span>,<span class="dv">8</span>,<span class="st">'month'</span>)) <span class="co"># only June through September, Summer only</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>      .<span class="bu">filter</span>(ee.Filter.lt(<span class="st">'CLOUD_COVER_LAND'</span>, <span class="dv">10</span>)) <span class="co"># only images with less that 10 % clouds</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>      <span class="co">#.filterDate('2022-07-01','2022-12-31')</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>      <span class="co">### PreProcessing </span><span class="al">###</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>      .scaleAndOffset()</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>      .spectralIndices([<span class="st">'NDVI'</span>, <span class="st">'NBR'</span>])</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>      .maskClouds()</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>     )</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> collection</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load data and merge </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>L9 <span class="op">=</span> load_and_prepare_Landsat(<span class="st">"LANDSAT/LC09/C02/T1_L2"</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>L8 <span class="op">=</span> load_and_prepare_Landsat(<span class="st">"LANDSAT/LC08/C02/T1_L2"</span>)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>L7 <span class="op">=</span> load_and_prepare_Landsat(<span class="st">"LANDSAT/LE07/C02/T1_L2"</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>L5 <span class="op">=</span> load_and_prepare_Landsat(<span class="st">"LANDSAT/LT05/C02/T1_L2"</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>LS <span class="op">=</span> L9.merge(L8).merge(L7).merge(L5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> LS.getTimeSeriesByRegion(reducer <span class="op">=</span> ee.Reducer.mean(),</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                              geometry <span class="op">=</span> point_fire,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                              bands <span class="op">=</span> [<span class="st">'NBR'</span>,<span class="st">'NDVI'</span>],</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                              scale <span class="op">=</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>tsPandas <span class="op">=</span> geemap.ee_to_pandas(ts)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>tsPandas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a little more cleaning is necessary</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>tsPandas[tsPandas <span class="op">==</span> <span class="op">-</span><span class="dv">9999</span>] <span class="op">=</span> np.nan</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>tsPandas[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(tsPandas[<span class="st">'date'</span>],infer_datetime_format <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>tsPandas <span class="op">=</span> tsPandas.sort_values(by<span class="op">=</span><span class="st">'date'</span>).dropna(axis<span class="op">=</span><span class="dv">0</span>).reset_index()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>tsPandas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Visualize output (example using plotly, but can use library of your choice e.g.&nbsp;matplotlib, seaborn, etc.)</li>
</ol>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># scatterplot</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>px.scatter(tsPandas, x<span class="op">=</span><span class="st">'date'</span>, y<span class="op">=</span>[<span class="st">'NDVI'</span>, <span class="st">'NBR'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># line plot</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>px.line(tsPandas, x<span class="op">=</span><span class="st">'date'</span>, y<span class="op">=</span>[<span class="st">'NDVI'</span>, <span class="st">'NBR'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="part-v.-annual-composite" class="level3" data-number="13.4.5">
<h3 data-number="13.4.5" class="anchored" data-anchor-id="part-v.-annual-composite"><span class="header-section-number">13.4.5</span> <strong>Part v.</strong> Annual Composite</h3>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>LS_2020 <span class="op">=</span> LS.filterDate(<span class="st">'2020-01-01'</span>, <span class="st">'2020-12-31'</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>LS_2019 <span class="op">=</span> LS.filterDate(<span class="st">'2019-01-01'</span>, <span class="st">'2019-12-31'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li></li>
</ul>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>LS_2020_reduced <span class="op">=</span> LS_2020.<span class="bu">reduce</span>(ee.Reducer.median())</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>LS_2019_reduced <span class="op">=</span> LS_2019.<span class="bu">reduce</span>(ee.Reducer.median())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>Map <span class="op">=</span> geemap.Map()</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>Map.addLayer(LS_2020_reduced,<span class="bu">dict</span>(<span class="bu">min</span><span class="op">=-</span><span class="dv">1</span>, <span class="bu">max</span><span class="op">=</span><span class="dv">1</span>, bands<span class="op">=</span>[<span class="st">'NDVI_median'</span>]), <span class="st">'Median NDVI 2020'</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>Map.addLayer(LS_2019_reduced,<span class="bu">dict</span>(<span class="bu">min</span><span class="op">=-</span><span class="dv">1</span>, <span class="bu">max</span><span class="op">=</span><span class="dv">1</span>, bands<span class="op">=</span>[<span class="st">'NDVI_median'</span>]), <span class="st">'Median NDVI 2019'</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Map.centerObject(LS_2020_reduced, 9)</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>Map</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="part-vi.-calculate-trend" class="level3" data-number="13.4.6">
<h3 data-number="13.4.6" class="anchored" data-anchor-id="part-vi.-calculate-trend"><span class="header-section-number">13.4.6</span> <strong>Part vi.</strong> Calculate trend</h3>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> make_dateband(image):</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  factor <span class="op">=</span> ee.Number(<span class="dv">864000000000</span>) <span class="co"># seconds to years</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  time <span class="op">=</span> ee.Number(image.get(<span class="st">"system:time_start"</span>))</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  time2 <span class="op">=</span> time.toDouble().divide(factor)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  date_image <span class="op">=</span> ee.Image.constant(time2).toFloat().select([<span class="dv">0</span>], [<span class="st">'Date'</span>])</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#TODO: rename to 'Date'</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> image.addBands(date_image)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>LS <span class="op">=</span> LS.<span class="bu">map</span>(make_dateband)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>index <span class="op">=</span> <span class="st">'NDVI'</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>trend_image <span class="op">=</span> ee.Image()</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>trend <span class="op">=</span> ee.ImageCollection(LS.select([<span class="st">'Date'</span>, index])).<span class="bu">reduce</span>(ee.Reducer.linearFit().unweighted())</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>trend_image <span class="op">=</span> trend_image.addBands(trend)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>palette <span class="op">=</span> geemap.get_palette_colors(cmap_name<span class="op">=</span><span class="st">'RdYlGn'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>Map <span class="op">=</span> geemap.Map()</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>Map.addLayer(trend_image.clip(bbox), <span class="bu">dict</span>(<span class="bu">min</span><span class="op">=-</span><span class="fl">0.3</span>, <span class="bu">max</span><span class="op">=</span><span class="fl">0.3</span>, palette<span class="op">=</span>palette, bands<span class="op">=</span>[<span class="st">'scale'</span>]))</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Map.centerObject(trend_image, 8)</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>Map</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add some nice temporal data</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Tasseled Cap Trends: 2001-2020</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>TCVIS <span class="op">=</span> ee.ImageCollection(<span class="st">'users/ingmarnitze/TCTrend_SR_2001-2020_TCVIS'</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>Map.addLayer(TCVIS, {}, <span class="st">'TCVIS'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="part-v.-clustering" class="level3" data-number="13.4.7">
<h3 data-number="13.4.7" class="anchored" data-anchor-id="part-v.-clustering"><span class="header-section-number">13.4.7</span> <strong>Part v.</strong> Clustering</h3>
<p><em>Example taken from <a href="https://geemap.org/notebooks/31_unsupervised_classification/#make-training-dataset" class="uri">https://geemap.org/notebooks/31_unsupervised_classification/#make-training-dataset</a></em>.</p>
<ol type="1">
<li>Group individual images into several “similar” objects</li>
</ol>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>image <span class="op">=</span> S2_Image</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the training dataset.</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>training <span class="op">=</span> image.sample(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>{</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">#     'region': region,</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'scale'</span>: <span class="dv">10</span>,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'numPixels'</span>: <span class="dv">5000</span>,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'seed'</span>: <span class="dv">0</span>,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'geometries'</span>: <span class="va">True</span>,  <span class="co"># Set this to False to ignore geometries</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Instantiate the clusterer and train it.</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>n_clusters <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>clusterer <span class="op">=</span> ee.Clusterer.wekaKMeans(n_clusters).train(training)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cluster the input using the trained clusterer.</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> image.cluster(clusterer)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># # Display the clusters with random colors.</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>Map.addLayer(result.randomVisualizer(), {}, <span class="st">'clusters'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>legend_keys <span class="op">=</span> [<span class="st">'One'</span>, <span class="st">'Two'</span>, <span class="st">'Three'</span>, <span class="st">'Four'</span>, <span class="st">'ect'</span>]</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>legend_colors <span class="op">=</span> [<span class="st">'#8DD3C7'</span>, <span class="st">'#FFFFB3'</span>, <span class="st">'#BEBADA'</span>, <span class="st">'#FB8072'</span>, <span class="st">'#80B1D3'</span>]</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the map</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> result.remap([<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>])</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>Map.addLayer(</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    result, {<span class="st">'min'</span>: <span class="dv">1</span>, <span class="st">'max'</span>: <span class="dv">5</span>, <span class="st">'palette'</span>: legend_colors}, <span class="st">'Labelled clusters'</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>Map.add_legend(</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    legend_keys<span class="op">=</span>legend_keys, legend_colors<span class="op">=</span>legend_colors, position<span class="op">=</span><span class="st">'bottomright'</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>Map</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="additional-resources" class="level2" data-number="13.5">
<h2 data-number="13.5" class="anchored" data-anchor-id="additional-resources"><span class="header-section-number">13.5</span> Additional Resources</h2>
<p><strong>Tools:</strong></p>
<ul>
<li><a href="https://code.earthengine.google.com/">GEE Code Editor</a>, a web-based IDE for using GEE (JavaScript)</li>
</ul>
<p><strong>Data:</strong></p>
<ul>
<li><a href="https://developers.google.com/earth-engine/datasets">Earth Engine Data Catalog</a>, the main resource for “official” GEE Datasets<br>
</li>
<li><a href="https://samapriya.github.io/awesome-gee-community-datasets/">awesome-gee-community-datasets</a>, the main resource for “community” GEE Datasets</li>
</ul>
<p><strong>Documentation, Tutorials, &amp; Help:</strong></p>
<ul>
<li><a href="https://developers.google.com/earth-engine/guides/python_install"><code>earthengine-api</code> installation instructions</a><br>
</li>
<li><a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects">Creating and managing Google Cloud projects</a><br>
</li>
<li><a href="https://developers.google.com/earth-engine/guides/python_install#troubleshooting-authentication-issues">Troubleshooting authentication issues</a><br>
</li>
<li><a href="https://developers.google.com/earth-engine/tutorials/community/intro-to-python-api">An Intro to the Earth Engine Python API</a><br>
</li>
<li><a href="https://geemap.org/">geemap documentation</a><br>
</li>
<li><a href="https://www.youtube.com/c/Qiushengwu">Qiusheng Wu’s YouTube channel for GEE &amp; geemap Python tutorials</a></li>
<li><a href="https://gis.stackexchange.com/questions/tagged/google-earth-engine">GEE on StackExhange</a></li>
</ul>
<p><strong>Other:</strong></p>
<ul>
<li><a href="https://app.climateengine.com/climateEngine">Climate Engine App</a>, a no-code user interface to Google Earth Engine for quickly and easily visualizing various Earth observation processes and variables</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../sections/data-ethics.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Data Ethics for Scalable Computing</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../sections/adc-data-publishing.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Documenting and Publishing Data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>